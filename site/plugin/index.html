<?php 
$title="The Plugin Utility";
$section="plugin";
$component="Plugin Utility";
$highlightSyntax = true;
$releasenotes = true;
include "../inc/header.inc";
?>
<div id="yui-main">
    <div class="yui-b">
        <div class="yui-ge">
            <div class="yui-u first" id="main">
            <!-- main column -->

                <h2><?php echo $component;?></h2>

                <div id="promo" class="component">
                	<p>The Plugin Utility allows you to unobtrusively add functionality to nodes and widgets.  Plugins can inherit from an optional Plugin base class, but this is primarily targeted at widget plugins, as Node plugins should be relatively simple, standalone classes.</p> 
                    <div class="yui-g">
                        <div class="yui-u first">
                            <div id="jumps">
                                <h4>On This Page</h4>
                                <ul>
                                    <li><a href="#start">Getting Started</a></li>
                                    <li><a href="#using">Using the <?php echo $component;?></a>
                                        <ul class="topspace">
                                            <li><a href="#plugintemplate">Plugin Template</a>
                                            <li><a href="#staticprops">Static Properties</a>
                                                <ul>
                                                    <li><a href="#nameprop">The NAME Property</a></li>
                                                    <li><a href="#nsprop">The NS Property</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="#nodeplugins">Node Plugins</a></li>
                                            <li><a href="#pluginclass">The Plugin Base Class</a></li>
                                                <ul>
                                                    <li><a href="#extendingplugin">Extending Plugin</a></li>
                                                    <li><a href="#pluginlisteners">Plugin Listeners</a></li>
                                                </ul>
                                        </ul></li>
                                    <li><a href="#support">Support &amp; Community</a></li>
                                    <li><a href="#filingbugs">Bug Reports &amp; Feature Requests</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="yui-u">
                            <?php
                            include('../inc/quicklinks.inc');
                            ?>
                        </div>
                    </div>
                    <div class="clear"></div>
                </div><!-- /promo -->

                <?php
                    $componentShort = "Plugin";
                    $requiredModules = array("plugin");
                    include("../inc/gettingStarted.inc");
                ?>

                <h3 id="using">Using the <?php echo $component;?></h3>

                <p>This section describes how to use the <?php echo $component;?> in further detail.  It contains these subsections:</p>
                
				<ul class="topspace">
                    <li><a href="#staticprops">Static Properties</a>
                        <ul>
                            <li><a href="#nameprop">The NAME Property</a></li>
                            <li><a href="#nsprop">The NS Property</a></li>
                        </ul>
                    </li>
                    <li><a href="#initdestroy">Initialization and Destruction</a></li>
                    <li><a href="#buildcreate">Build and Create</a></li>
                </ul>

            	<h4 id="plugintemplate">Plugin Template</h4>

            	<p>In order to build a plugin, first you will build a simple class to use as a template for all instances of the plugin.  When plugins are added to a host Node, the node instance is automatically added to the config as the <code>owner</code>.  Widgets instances receive the widget itself as the <code>owner</code>.  For Node plugins you will probably want to keep a reference to the owner bound to your plugin for later reference.  Plugins that inherit from the base <code>Plugin</code> class get this reference set up automatically.  As with any class you build, methods should live on the class's prototype.</p>

           	 	<textarea name="code" class="JScript" cols="60" rows="1">
	            function MyPlugin(config) {
	                this._owner = config.owner;
	            }

	            MyPlugin.prototype = {
	                doSomething: function() {

	                }
	            };
	            </textarea>

            <h4 id="staticprops">Static Properties</h4>

            <p>Plugin requires a a couple of "static" properties on your class constructor - <code>NAME</code> and <code>NS</code>, which it uses when registering your plugin.</p>
            <h5 id="nameprop">NAME</h5>

            <p>The <code>NAME</code> property is a string which is used to identify the class.  This is used when registering your component as a module among other uses.</p>

            <textarea name="code" class="JScript" cols="60" rows="1">
            MyPlugin.NAME = 'myplugin';
            </textarea>

            <h5 id="nsprop">NS</h5>

            <p>The <code>NS</code> property is used to bind instances of your plugin to the host object.  This is where the plugin instance and all of its functionality live.  This can be a short or abbreviated reference to your class.</p>

            <textarea name="code" class="JScript" cols="60" rows="1">
            MyPlugin.NS = 'mp';
            </textarea>

            Putting it all together, a basic plugin template looks like:
            <textarea name="code" class="JScript" cols="60" rows="1">
            function MyPlugin(config) {
                this._owner = config.owner;
            }

            MyPlugin.NAME = 'myplugin';
            MyPlugin.NS = 'mp';

            MyPlugin.prototype = {
                doSomething: function() {

                }
            };

            </textarea>
            <h4 id="nodeplugins">Node Plugins</h4>

            <p>A basic node plugin simply binds functionality onto a Node instance, attaching a reference to the node.  The <code>plug</code> method is used to add plugins to node instances.</p>

            <textarea name="code" class="JScript" cols="60" rows="1">
            YUI().use('node', function(Y) {
                function MyPlugin(config) {
                    this._owner = config.owner;
                }

                MyPlugin.NAME = 'myplugin';
                MyPlugin.NS = 'mp';

                MyPlugin.prototype = {
                    doSomething: function() {
                        alert('hello world');
                    }
                };

                var myNode = Y.get('#demo');
                myNode.plug(MyClass);
            });
            </textarea>

            <p>The <code>plug</code> method uses its <code>NS</code> property to add itself to the node.</p>

            <textarea name="code" class="JScript" cols="60" rows="1">
            YUI().use('node', function(Y) {
                function MyPlugin(config) {
                    this._owner = config.owner;
                }

                MyPlugin.NAME = 'myplugin';
                MyPlugin.NS = 'mp';

                MyPlugin.prototype = {
                    doSomething: function() {
                        alert('hello world');
                    }
                };

                var myNode = Y.get('#demo');
                myNode.plug(MyClass);

                myNode.mp.doSomething(); // addressing plugin by namespace
            });
            </textarea>

            <h4 id="pluginclass">The Plugin Base Class</h4>
            <p>A base <code>Plugin</code> class is provided to enable widget plugins to unobtrusively wire behaviors around widget behavior.  <code>Plugin is a subclass of <code>Base</code>, providing managed attributes, lifecycle methods, and listeners to wire plugin functionality around <code>Widget</code> events and methods.</p>

            <h5 id="extendingplugin">Extending Plugin</h5>

            <p>When building a widget plugin, you will probably want your plugin class to extend the base <code>Plugin</code> class.</p>

            <textarea name="code" class="JScript" cols="60" rows="1">

            YUI().use('node', function(Y) {
                function MyPlugin(config) {
                    this._owner = config.owner;
                }

                MyPlugin.NAME = 'myplugin';
                MyPlugin.NS = 'mp';

                MyPlugin.prototype = {
                    doSomething: function() {
                        alert('hello world');
                    }
                };

                Y.extend(Y.Plugin, MyPlugin); // inherit from Plugin
            });
            </textarea>

            <p>See <code>Base</code> <a href="../api/Base.html">build method API documentation</a> for more details about what it provides for <code>Plugin</code>.</p>

            <h5 id="pluginlisteners">Plugin Listeners</h5>

            <p>In addition to the functionality that <code>Base</code> provides, the main value added from <code>Plugin</code> is the ability to react to the owner widget's events and methods using the <code>doBefore</code> and <code>doAfter</code> methods.</p>

            <h6>Events</h6>
            <p>All widgets fire a <code>render</code> render event when they are rendered.  Your plugin may need to know when this occurs.</p>
            <textarea name="code" class="JScript" cols="60" rows="1">
            YUI().use('node', function(Y) {
                function MyPlugin(config) {

                }

                MyPlugin.NAME = 'myplugin';
                MyPlugin.NS = 'mp';

                MyPlugin.prototype = {
                    initializer: function(config) { // automatically called from Base
                        this.doAfter('render', this.afterRender); // "render" is a widget event 
                    },

                    afterRender: function() {
                        // do something DOM related
                    }
                };

                Y.extend(Y.Plugin, MyPlugin); // inherit from Plugin
            });
            </textarea>

            <h6>Methods</h6>
            <p>All widgets have <code>show</code> and <code>hide</code> methods.  Your plugin may interested in knowing when these are called so that it can add some extra functionality.</p>
    
            <textarea name="code" class="JScript" cols="60" rows="1">
            YUI().use('node', function(Y) {
                function MyPlugin(config) {

                }

                MyPlugin.NAME = 'myplugin';
                MyPlugin.NS = 'mp';

                MyPlugin.prototype = {
                    initializer: function(config) { // automatically called from Base
                        this.doBefore('show', this.beforeShow); // "show" is a widget method 
                        this.doAfter('hide', this.afterHide); // "hide" is a widget method 
                    },

                    beforeShow: function() {
                        // do something before the widget is shown
                    },

                    afterHide: function() {
                        // do something after the widget is hidden
                    }
                };

                Y.extend(Y.Plugin, MyPlugin); // inherit from Plugin
            });
			</textarea>
			
            <?php # include "../inc/mobileSection.inc";?>
            <?php include "../inc/support.inc"; ?>

        </div>
        <div class="yui-u sidebar">
  
			<!-- delicious module -->
			<?php require('../inc/mod-delicious.inc'); ?>
			<!-- /delicious module -->


        </div>
      </div>
</div>
</div>
<?php include "../inc/side.inc" ?>
<?php include "../inc/footer.inc" ?>
