<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>About Y.StyleSheet</title>
    <link type="text/css" rel="stylesheet" href="/assets/dpSyntaxHighlighter.css">
    <style id="byNode" type="text/css">
        #demo {
            background: #ffe;
            font-family: arial,helvetica,sans-serif;
        }
        #demo p {
            margin: 0;
        }
    </style>
</head>
<body>
<h1>Y.StyleSheet</h1>
<h2>Synopsis</h2>

<p><a href="#demo_title">demo</a></p>
<div>
    <div id="demo_js"></div>
    <div id="demo_markup"></div>
    <h3>Style elements</h3>
    <p>The first is an existing style node on the page.  The others are generated by Y.StyleSheet.</p>
    <div id="demo_css"></div>
</div>
<div class="markup">

    <h3 id="demo_title">Demo</h3>
    <div id="demo">
        <p>This is text in a paragraph. <a href="#">A link with <span>a span</span></a>.</p>
        <p>This is another paragraph with <span>a span</span>.</p>
        <pre>This is a <code>pre</code> with &lt;code&gt;pre&lt;/code&gt;.</pre>

    </div>
    <input type="button" id="change" value="change">
</div>

<h2>API</h2>
<h3>Construction</h3>
<p>StyleSheet(seed,name)</p>
<ul>
    <li>if seed is a style/link node ref or its id.  That node is used.  xdomain link elements are read-only.  This is not accounted for currently.</li>
    <li>if seed is text containing { char. Treated as an entire stylesheet.  New style node is created and populated with seed.</li>

    <li>else, seed is used as name to register a new instance with no rules.</li>
</ul>

<p>Caching is by name and expando property yuiSSID added to the style node.  Passing a previous name or yuiSSID to the constructor will return the same StyleSheet instance.</p>

<h3>Instance API</h3>
<p>No prototype due to node reference hiding concerns and IE's DOM API differences.  Instance methods are assigned to <code>this</code>.  Very few methods for now.</p>

<ul>
    <li>sheet.set(sel, o)</li>

    <li>sheet.unset(sel, arr|str|undefined)</li>
    <li>sheet.enable(), disable(), isEnabled()</li>
    <li>getId()</li>
</ul>

<p><code>set</code> and <code>unset</code> assemble the rule properties via worker.style.prop, then assign rule.style.cssText = worker.style.cssText.</p>

<h3>Static API</h3>

<ul>
    <li>StyleSheet.toCssText(o, cssText|undefined)</li>
    <li>StyleSheet.register(name,sheet)</li>
    <li>StyleSheet.isValidSelector(sel)</li>
</ul>

<script type="text/javascript" src="../../build/yui/yui-min.js"></script>

<script type="text/javascript">
YUI({base:'../../build/'}).use('stylesheet',function (Y) {

// function StyleSheet(seed,name) {...}

// Option 1. Instantiate
var sheet = new Y.StyleSheet(); // or ..eet('test') to auto register
sheet.set('#demo', {
        border: '10px solid #090',
        padding: '20px',
        position: 'relative',
        width: '500px'
    });

Y.StyleSheet.register('test',sheet);

// Option 2. Factory style
Y.StyleSheet('test'). // returns the same StyleSheet instance as above
    set('#demo p span', {
        backgroundColor: '#0f0',
        color: 'rgb(255,255,255)',
        fontWeight: 'bold',
        fontSize: '150%',
        'float': 'right',
        opacity: .3
    }). // chaining
    set('#demo a:hover, #demo pre code:hover', { // multiple selectors
        background: 'black',
        font: 'normal 125% serif',
        color: 'red'
    });

// Option 3. HTMLElement ref
new Y.StyleSheet(document.getElementById('byNode'),'existing');

// Option 4. Create entire sheet in one shot
Y.StyleSheet('h3 { font-family: arial,helvetica,sans-serif; }','all in one');

Y.use('node',function (Y) {

    Y.on('click',function () {

        new Y.StyleSheet('test').
            unset('#demo pre code:hover', ['font','background']). // multi
            unset('#demo p span',         'cssFloat');            // single
    
        Y.StyleSheet('all in one').unset('h3'); // removes rule entirely

        Y.StyleSheet('existing').disable(); // off switch

    }, '#change');

});

});
</script>
<script type="text/javascript" src="/assets/dpSyntaxHighlighter.js" ></script>
<script type="text/javascript" src="/assets/dpSyntaxHighlightExample.js?highlight=markup,javascript,css&markupTarget=demo_markup&jsTarget=demo_js&cssTarget=demo_css&headers=false"></script>
</body>
</html>
