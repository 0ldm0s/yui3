YUI.add("dd-drop",function(C){var A="node",B=C.DD.DDM,F="offsetHeight",E="offsetWidth";var D=function(){D.superclass.constructor.apply(this,arguments);this.createShim();B.regTarget(this);};D.NAME="drop";D.ATTRS={node:{set:function(G){return C.Node.get(G);}},groups:{value:["default"],set:function(G){this._groups={};C.each(G,function(I,H){this._groups[I]=true;},this);}},padding:{value:"0",set:function(G){return B.cssSizestoObject(G);}},lock:{value:false,set:function(G){if(G){this.get(A).addClass("yui-dd-drop-locked");}else{this.get(A).removeClass("yui-dd-drop-locked");}}}};C.extend(D,C.Base,{_createEvents:function(){var G=["drop:over","drop:enter","drop:exit"];C.each(G,function(I,H){this.publish(I,{emitFacade:true,preventable:false});},this);this.addTarget(B);},_active:null,_valid:null,_groups:null,shim:null,region:null,overTarget:null,inGroup:function(G){this._valid=false;var H=false;C.each(G,function(J,I){if(this._groups[J]){H=true;this._valid=true;}},this);return H;},initializer:function(){this._createEvents();},deactivateShim:function(){this.get(A).removeClass("dd-drop-active-valid");this.get(A).removeClass("dd-drop-active-invalid");this.get(A).removeClass("dd-drop-over");this.shim.setXY([-999,-999]);this._active=false;this.overTarget=false;},activateShim:function(){if(this.get(A)===B.activeDrag.get(A)){return false;}if(this.get("lock")){return false;}if(this.inGroup(B.activeDrag.get("groups"))){this.get(A).addClass("dd-drop-active-valid");B.addValid(this);this._active=false;this.overTarget=false;this.sizeShim();}else{this.get(A).addClass("dd-drop-active-invalid");}},sizeShim:function(){var J=this.get(A).get(F),H=this.get(A).get(E),M=this.get(A).getXY(),L=this.get("padding");H=H+L.left+L.right;J=J+L.top+L.bottom;M[0]=M[0]-L.left;M[1]=M[1]-L.top;if(B.mode===B.INTERSECT){var G=B.activeDrag,K=G.get(A).get(F),I=G.get(A).get(E);J=(J+K);H=(H+I);M[0]=M[0]-(K-G.deltaXY[0]);M[1]=M[1]-(I-G.deltaXY[1]);}this.shim.setStyles({height:J+"px",width:H+"px",top:M[1]+"px",left:M[0]+"px"});this.region={"0":M[0],"1":M[1],area:0,top:M[1],right:M[0]+H,bottom:M[1]+J,left:M[0]};},createShim:function(){var G=C.Node.create(["div",{id:this.get(A).get("id")+"_shim"}]);G.setStyles({height:this.get(A).get(F)+"px",width:this.get(A).get(E)+"px",backgroundColor:"yellow",opacity:".5",zIndex:10,position:"absolute"});B.pg.appendChild(G);G.setXY([-900,-900]);this.shim=G;G.on("mouseover",this._handleOverEvent,this,true);G.on("mouseout",this._handleOutEvent,this,true);},_handleTargetOver:function(G){if(B.isOverTarget(this)){this.get(A).addClass("dd-drop-over");B.activeDrop=this;B.otherDrops[this]=this;if(this.overTarget){this.fire("drop:over");B.activeDrag.fire("drag:over",{drop:this});}else{this.overTarget=true;this.fire("drop:enter");B.activeDrag.fire("drag:enter",{drop:this});B._handleTargetOver(this,G);}}else{this._handleOut();}},_handleOverEvent:function(){B._activeShims[this]=true;},_handleOutEvent:function(){delete B._activeShims[this];},_handleOut:function(){if(!B.isOverTarget(this)){if(this.overTarget){this.overTarget=false;if(B.activeDrag){this.fire("drop:exit");B.activeDrag.fire("drag:exit",{drop:this});delete B.otherDrops[this];this.get(A).removeClass("dd-drop-over");}}}},toString:function(){return"Drop (#"+this.get(A).get("id")+")";}});C.DD.Drop=D;},"@VERSION@",{requires:["dd-ddm-drop"],skinnable:false});