YUI.add("datatable-scroll",function(B){var M=B.Do,N=B.Node,K=B.Lang,P=B.UA,G=B.ClassNameManager.getClassName,O="datatable",A=G(O,"hd"),E=G(O,"bd"),L=G(O,"liner"),J=G(O,"scrollable"),I='<div class="'+A+'"></div>',D='<div class="'+E+'"></div>',C='<th id="{id}" rowspan="{rowspan}" colspan="{colspan}"><div class="'+L+'" style="width:100px">{value}</div></th>',F='<td headers="{headers}"><div class="'+L+'" style="width:100px">{value}</div></td>',H="<table></table>";function Q(){Q.superclass.constructor.apply(this,arguments);}B.mix(Q,{NS:"scroll",NAME:"dataTableScroll",ATTRS:{width:{value:undefined},height:{value:undefined},scroll:{value:"y"},COLOR_COLUMNFILLER:{value:"#f2f2f2",validator:K.isString,setter:function(R){if(this._headerContainerNode){this._headerContainerNode.setStyle("backgroundColor",R);}}}}});B.extend(Q,B.Plugin.Base,{tdTemplate:F,thTemplate:C,_parentTableNode:null,_parentTheadNode:null,_parentTbodyNode:null,_parentMsgNode:null,_parentContainer:null,_bodyContainerNode:null,_headerContainerNode:null,initializer:function(R){var S=this.get("host");this._parentContainer=S.get("contentBox");this._parentContainer.addClass(J);this._setUpNodes();},_setUpNodes:function(){var R=this.get("host");this.afterHostMethod("_addTableNode",this._setUpParentTableNode);this.afterHostMethod("_addTheadNode",this._setUpParentTheadNode);this.afterHostMethod("_addTbodyNode",this._setUpParentTbodyNode);this.afterHostMethod("_addMessageNode",this._setUpParentMessageNode);this.afterHostMethod("renderUI",this.renderUI);this.afterHostMethod("syncUI",this.syncUI);if(this.get("scroll")==="y"){this.afterHostMethod("_attachTheadThNode",this._attachTheadThNode);this.afterHostMethod("_attachTbodyTdNode",this._attachTbodyTdNode);}},_setUpParentTableNode:function(){this._parentTableNode=this.get("host")._tableNode;},_setUpParentTheadNode:function(){this._parentTheadNode=this.get("host")._theadNode;},_setUpParentTbodyNode:function(){this._parentTbodyNode=this.get("host")._tbodyNode;},_setUpParentMessageNode:function(){this._parentMsgNode=this.get("host")._msgNode;},renderUI:function(){this._createBodyContainer();this._createHeaderContainer();this._setContentBoxDimensions();},syncUI:function(){this._syncWidths();this._syncScroll();},_syncWidths:function(){var S=N.all("#"+this._parentContainer.get("id")+" .yui3-datatable-hd table thead th"),T=N.one("#"+this._parentContainer.get("id")+" .yui3-datatable-bd table .yui3-datatable-data").get("firstChild").get("children"),U,X,Z,W,Y,V,R=P.ie;for(U=0,X=S.size();U<X;U++){Y=S.item(U).get("firstChild");V=T.item(U).get("firstChild");if(!R){Z=Y.get("clientWidth");W=T.item(U).get("clientWidth");}else{Z=Y.get("offsetWidth");W=T.item(U).get("offsetWidth");}if(Z>W){V.setStyle("width",(Z-20+"px"));}else{if(W>Z){Y.setStyle("width",(W-20+"px"));}}}if(R&&this.get("scroll")==="y"){this._headerContainerNode.setStyle("width",this._parentContainer.get("offsetWidth")+15+"px");}},_attachTheadThNode:function(S){var R=S.column.get("width")||"auto";if(R!=="auto"){S.th.get("firstChild").setStyles({"width":R,"overflow":"hidden"});}return S;},_attachTbodyTdNode:function(S){var R=S.column.get("width")||"auto";if(R!=="auto"){S.td.get("firstChild").setStyles({"width":R,"overflow":"hidden"});}return S;},_createBodyContainer:function(){var S=N.create(D),R=B.bind("_onScroll",this);this._bodyContainerNode=S;this._setStylesForTbody();S.appendChild(this._parentTableNode);this._parentContainer.appendChild(S);S.on("scroll",R);},_createHeaderContainer:function(){var S=N.create(I),R=N.create(H);this._headerContainerNode=S;this._setStylesForThead();R.appendChild(this._parentTheadNode);S.appendChild(R);this._parentContainer.prepend(S);},_setStylesForTbody:function(){var S=this.get("scroll"),R=this.get("width")||"",U=this.get("height")||"",T=this._bodyContainerNode,V={"width":"","height":U};if(S==="x"){V["overflowY"]="hidden";V["width"]=R;}else{if(S==="y"){V["overflowX"]="hidden";}else{V["width"]=R;}}T.setStyles(V);return T;},_setStylesForThead:function(){var S=this.get("scroll"),R=this.get("width")||"",T=this._headerContainerNode;if(S!=="y"){T.setStyles({"width":R,"overflow":"hidden"});}},_setContentBoxDimensions:function(){if(this.get("scroll")==="y"||(!this.get("width"))){this._parentContainer.setStyle("width","auto");}},_onScroll:function(){this._headerContainerNode.set("scrollLeft",this._bodyContainerNode.get("scrollLeft"));},_syncScroll:function(){this._syncScrollX();this._syncScrollY();this._syncScrollOverhang();if(P.opera){this._headerContainerNode.set("scrollLeft",this._bodyContainerNode.get("scrollLeft"));if(!this.get("width")){document.body.style+="";}}},_syncScrollY:function(){var R=this._parentTbodyNode,T=this._bodyContainerNode,S;if(!this.get("width")){S=(T.get("scrollHeight")>T.get("clientHeight"))?(R.get("parentNode").get("clientWidth")+19)+"px":(R.get("parentNode").get("clientWidth")+2)+"px";this._parentContainer.setStyle("width",S);}},_syncScrollX:function(){var R=this._parentTbodyNode,T=this._bodyContainerNode,S;this._headerContainerNode.set("scrollLeft",this._bodyContainerNode.get("scrollLeft"));if(!this.get("height")&&(P.ie)){S=(T.get("scrollWidth")>T.get("offsetWidth"))?(R.get("parentNode").get("offsetHeight")+18)+"px":R.get("parentNode").get("offsetHeight")+"px";T.setStyle("height",S);}if(R.get("rows").length===0){this._parentMsgNode.get("parentNode").setStyle("width",this._parentTheadNode.get("parentNode").get("offsetWidth")+"px");}else{this._parentMsgNode.get("parentNode").setStyle("width","");}},_syncScrollOverhang:function(){var R=this._bodyContainerNode,S=1;if((R.get("scrollHeight")>R.get("clientHeight"))||(R.get("scrollWidth")>R.get("clientWidth"))){S=18;}this._setOverhangValue(S);},_setOverhangValue:function(S){var U=this.get("host"),W=U.get("columnset").get("columns"),R=W.length,V=S+"px solid "+this.get("COLOR_COLUMNFILLER"),T=N.all("#"+this._parentContainer.get("id")+" ."+A+" table thead th");T.item(R-1).setStyle("borderRight",V);}});B.namespace("Plugin").DataTableScroll=Q;},"@VERSION@",{requires:["plugin","datatable-base","stylesheet"]});
