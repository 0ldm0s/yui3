YUI.add("datatable-base",function(C){var V=C.Lang,f=C.Lang.substitute,D=C.Node,S=D.create,O=C.ClassNameManager.getClassName,P="datatable",Q="column",h="focus",k="keydown",G="mouseenter",N="mouseleave",J="mouseup",X="mousedown",c="click",U="dblclick",E=O(P,"columns"),b=O(P,"data"),B=O(P,"msg"),K=O(P,"liner"),e=O(P,"first"),H=O(P,"last"),T=O(P,"even"),a=O(P,"odd"),d="<table></table>",W="<col></col>",i='<thead class="'+E+'"></thead>',F='<tbody class="'+b+'"></tbody>',j='<th id="{id}" rowspan="{rowspan}" colspan="{colspan}" class="{classnames}"><div class="'+K+'">{value}</div></th>',g='<tr id="{id}"></tr>',A='<td headers="{headers}" class="{classnames}"><div class="'+K+'">{value}</div></td>',I="{value}",M='<tbody class="'+B+'"></tbody>';function L(Y){L.superclass.constructor.apply(this,arguments);}C.mix(L,{NAME:"column",ATTRS:{id:{valueFn:"_defaultId",writeOnce:true},key:{valueFn:"_defaultKey"},field:{valueFn:"_defaultField"},label:{valueFn:"_defaultLabel"},children:{value:null},abbr:{value:null},classnames:{readOnly:true,getter:"_getClassnames"},formatter:{},sortable:{value:false},editor:{},width:{},resizeable:{},minimized:{},minWidth:{},maxAutoWidth:{}}});C.extend(L,C.Widget,{_defaultId:function(){return C.guid();},_defaultKey:function(Y){return Y||C.guid();},_defaultField:function(Y){return Y||this.get("key");},_defaultLabel:function(Y){return Y||this.get("key");},_afterAbbrChange:function(Y){this._uiSetAbbr(Y.newVal);},keyIndex:null,headers:null,colSpan:1,rowSpan:1,parent:null,initializer:function(Y){},destructor:function(){},_getClassnames:function(){return C.ClassNameManager.getClassName(Q,this.get("id"));},syncUI:function(){this._uiSetAbbr(this.get("abbr"));},_uiSetAbbr:function(Y){this._thNode.set("abbr",Y);}});C.Column=L;function Z(Y){Z.superclass.constructor.apply(this,arguments);}C.mix(Z,{NAME:"columnset",ATTRS:{definitions:{setter:"_setDefinitions"}}});C.extend(Z,C.Base,{_setDefinitions:function(Y){return C.clone(Y);},tree:null,hash:null,keys:null,initializer:function(){var Y=[],p={},o=[],n=this.get("definitions"),l=this;function m(x,w,v){var s=0,r=w.length,u,t,q;x++;if(!Y[x]){Y[x]=[];}for(;s<r;++s){u=w[s];u=V.isString(u)?{key:u}:u;t=new C.Column(u);u.yuiColumnId=t.get("id");p[t.get("id")]=t;if(v){t.parent=v;}if(V.isArray(u.children)){q=u.children;t._set("children",q);l._setColSpans(t,u);l._cascadePropertiesToChildren(t,q);if(!Y[x+1]){Y[x+1]=[];}m(x,q,t);}else{t.keyIndex=o.length;o.push(t);}Y[x].push(t);}x--;}m(-1,n);this.tree=Y;this.hash=p;this.keys=o;this._setRowSpans();this._setHeaders();},destructor:function(){},_cascadePropertiesToChildren:function(n,l){var m=0,Y=l.length,o;for(;m<Y;++m){o=l[m];if(n.get("className")&&(o.className===undefined)){o.className=n.get("className");}if(n.get("editor")&&(o.editor===undefined)){o.editor=n.get("editor");}if(n.get("formatter")&&(o.formatter===undefined)){o.formatter=n.get("formatter");}if(n.get("resizeable")&&(o.resizeable===undefined)){o.resizeable=n.get("resizeable");}if(n.get("sortable")&&(o.sortable===undefined)){o.sortable=n.get("sortable");}if(n.get("hidden")){o.hidden=true;}if(n.get("width")&&(o.width===undefined)){o.width=n.get("width");}if(n.get("minWidth")&&(o.minWidth===undefined)){o.minWidth=n.get("minWidth");}if(n.get("maxAutoWidth")&&(o.maxAutoWidth===undefined)){o.maxAutoWidth=n.get("maxAutoWidth");}}},_setColSpans:function(m,l){var n=0;function Y(q){var r=q.children,p=0,o=r.length;for(;p<o;++p){if(V.isArray(r[p].children)){Y(r[p]);}else{n++;}}}Y(l);m.colSpan=n;},_setRowSpans:function(){function Y(n){var o=1,r,q,l,t;function s(w,v){v=v||1;var u=0,m=w.length,p;for(;u<m;++u){p=w[u];if(V.isArray(p.children)){v++;s(p.children,v);v--;}else{if(p.get&&V.isArray(p.get("children"))){v++;s(p.get("children"),v);v--;}else{if(v>o){o=v;}}}}}for(l=0;l<n.length;l++){r=n[l];s(r);for(t=0;t<r.length;t++){q=r[t];if(!V.isArray(q.get("children"))){q.rowSpan=o;}}o=1;}}Y(this.tree);},_setHeaders:function(){var p,n,m=this.keys,l=0,Y=m.length;function o(r,q){r.push(q.get("key"));if(q.parent){o(r,q.parent);}}for(;l<Y;++l){p=[];n=m[l];o(p,n);n.headers=p.reverse().join(" ");}},getColumn:function(){}});C.Columnset=Z;function R(Y){R.superclass.constructor.apply(this,arguments);}C.mix(R,{NAME:"dataTable",ATTRS:{columnset:{setter:"_setColumnset"},recordset:{value:new C.Recordset({records:[]}),setter:"_setRecordset"},strings:{valueFn:function(){return C.Intl.get("datatable-base");}},thValueTemplate:{value:I},tdValueTemplate:{value:I},trTemplate:{value:g}},HTML_PARSER:{}});C.extend(R,C.Widget,{thTemplate:j,tdTemplate:A,_theadNode:null,_tbodyNode:null,_msgNode:null,_setColumnset:function(Y){return V.isArray(Y)?new C.Columnset({definitions:Y}):Y;},_setRecordset:function(Y){if(V.isArray(Y)){Y=new C.Recordset({records:Y});}Y.addTarget(this);return Y;},_afterColumnsetChange:function(Y){if(this.get("rendered")){this._uiSetColumnset(Y.newVal);}},_afterRecordsetChange:function(Y){if(this.get("rendered")){this._uiSetRecordset(Y.newVal);}},_afterStringsChange:function(Y){if(this.get("rendered")){this._uiSetStrings(Y.newVal);}},initializer:function(Y){this.after("columnsetChange",this._afterColumnsetChange);this.after("recordsetChange",this._afterRecordsetChange);},destructor:function(){this.get("recordset").removeTarget(this);},renderUI:function(){return(this._addTableNode(this.get("contentBox"))&&this._addColgroupNode(this._tableNode)&&this._addTheadNode(this._tableNode)&&this._addTbodyNode(this._tableNode)&&this._addMessageNode(this._tableNode)&&this._addCaptionNode(this._tableNode));},_addTableNode:function(Y){if(!this._tableNode){this._tableNode=Y.appendChild(S(d));}return this._tableNode;},_addColgroupNode:function(m){var Y=this.get("columnset").keys.length,l=0,n=["<colgroup>"];for(;l<Y;++l){n.push(W);}n.push("</colgroup>");this._colgroupNode=m.insertBefore(S(n.join("")),m.get("firstChild"));return this._colgroupNode;},_addTheadNode:function(Y){if(Y){this._theadNode=Y.insertBefore(S(i),this._colgroupNode.next());return this._theadNode;}},_addTbodyNode:function(Y){this._tbodyNode=Y.appendChild(S(F));
return this._tbodyNode;},_addMessageNode:function(Y){this._msgNode=Y.insertBefore(S(M),this._tbodyNode);return this._msgNode;},_addCaptionNode:function(Y){this._captionNode=Y.invoke("createCaption");return this._captionNode;},bindUI:function(){var o=this._tableNode,l=this.get("contentBox"),m="thead."+E+">tr>th",n="tbody."+b+">tr>td",Y="tbody."+B+">tr>td";this.publish("theadCellFocus",{defaultFn:this._defTheadCellFocusFn,emitFacade:false,queuable:true});this.publish("theadRowFocus",{defaultFn:this._defTheadRowFocusFn,emitFacade:false,queuable:true});this.publish("theadFocus",{defaultFn:this._defTheadFocusFn,emitFacade:false,queuable:true});this.publish("tbodyCellFocus",{defaultFn:this._defTbodyCellFocusFn,emitFacade:false,queuable:true});this.publish("tbodyRowFocus",{defaultFn:this._defTbodyRowFocusFn,emitFacade:false,queuable:true});this.publish("tbodyFocus",{defaultFn:this._defTbodyFocusFn,emitFacade:false,queuable:true});this.publish("msgCellFocus",{defaultFn:this._defMsgCellFocusFn,emitFacade:false,queuable:true});this.publish("msgRowFocus",{defaultFn:this._defMsgRowFocusFn,emitFacade:false,queuable:true});this.publish("msgTbodyFocus",{defaultFn:this._defMsgTbodyFocusFn,emitFacade:false,queuable:true});this.publish("theadCellKeydown",{defaultFn:this._defTheadCellKeydownFn,emitFacade:false,queuable:true});this.publish("theadRowKeydown",{defaultFn:this._defTheadRowKeydownFn,emitFacade:false,queuable:true});this.publish("theadKeydown",{defaultFn:this._defTheadKeydownFn,emitFacade:false,queuable:true});this.publish("tbodyCellKeydown",{defaultFn:this._defTbodyCellKeydownFn,emitFacade:false,queuable:true});this.publish("tbodyRowKeydown",{defaultFn:this._defTbodyRowKeydownFn,emitFacade:false,queuable:true});this.publish("tbodyKeydown",{defaultFn:this._defTbodyKeydownFn,emitFacade:false,queuable:true});this.publish("msgCellKeydown",{defaultFn:this._defMsgCellKeydownFn,emitFacade:false,queuable:true});this.publish("msgRowKeydown",{defaultFn:this._defMsgRowKeydownFn,emitFacade:false,queuable:true});this.publish("msgTbodyKeydown",{defaultFn:this._defMsgTbodyKeydownFn,emitFacade:false,queuable:true});this.publish("theadCellMouseenter",{defaultFn:this._defTheadCellMouseenterFn,emitFacade:false,queuable:true});this.publish("theadRowMouseenter",{defaultFn:this._defTheadRowMouseenterFn,emitFacade:false,queuable:true});this.publish("theadMouseenter",{defaultFn:this._defTheadMouseenterFn,emitFacade:false,queuable:true});this.publish("tbodyCellMouseenter",{defaultFn:this._defTbodyCellMouseenterFn,emitFacade:false,queuable:true});this.publish("tbodyRowMouseenter",{defaultFn:this._defTbodyRowMouseenterFn,emitFacade:false,queuable:true});this.publish("tbodyMouseenter",{defaultFn:this._defTbodyMouseenterFn,emitFacade:false,queuable:true});this.publish("msgCellMouseenter",{defaultFn:this._defMsgCellMouseenterFn,emitFacade:false,queuable:true});this.publish("msgRowMouseenter",{defaultFn:this._defMsgRowMouseenterFn,emitFacade:false,queuable:true});this.publish("msgTbodyMouseenter",{defaultFn:this._defMsgTbodyMouseenterFn,emitFacade:false,queuable:true});this.publish("theadCellMouseleave",{defaultFn:this._defTheadCellMouseleaveFn,emitFacade:false,queuable:true});this.publish("theadRowMouseleave",{defaultFn:this._defTheadRowMouseleaveFn,emitFacade:false,queuable:true});this.publish("theadMouseleave",{defaultFn:this._defTheadMouseleaveFn,emitFacade:false,queuable:true});this.publish("tbodyCellMouseleave",{defaultFn:this._defTbodyCellMouseleaveFn,emitFacade:false,queuable:true});this.publish("tbodyRowMouseleave",{defaultFn:this._defTbodyRowMouseleaveFn,emitFacade:false,queuable:true});this.publish("tbodyMouseleave",{defaultFn:this._defTbodyMouseleaveFn,emitFacade:false,queuable:true});this.publish("msgCellMouseleave",{defaultFn:this._defMsgCellMouseleaveFn,emitFacade:false,queuable:true});this.publish("msgRowMouseleave",{defaultFn:this._defMsgRowMouseleaveFn,emitFacade:false,queuable:true});this.publish("msgTbodyMouseleave",{defaultFn:this._defMsgTbodyMouseleaveFn,emitFacade:false,queuable:true});this.publish("theadCellMouseup",{defaultFn:this._defTheadCellMouseupFn,emitFacade:false,queuable:true});this.publish("theadRowMouseup",{defaultFn:this._defTheadRowMouseupFn,emitFacade:false,queuable:true});this.publish("theadMouseup",{defaultFn:this._defTheadMouseupFn,emitFacade:false,queuable:true});this.publish("tbodyCellMouseup",{defaultFn:this._defTbodyCellMouseupFn,emitFacade:false,queuable:true});this.publish("tbodyRowMouseup",{defaultFn:this._defTbodyRowMouseupFn,emitFacade:false,queuable:true});this.publish("tbodyMouseup",{defaultFn:this._defTbodyMouseupFn,emitFacade:false,queuable:true});this.publish("msgCellMouseup",{defaultFn:this._defMsgCellMouseupFn,emitFacade:false,queuable:true});this.publish("msgRowMouseup",{defaultFn:this._defMsgRowMouseupFn,emitFacade:false,queuable:true});this.publish("msgTbodyMouseup",{defaultFn:this._defMsgTbodyMouseupFn,emitFacade:false,queuable:true});this.publish("theadCellMousedown",{defaultFn:this._defTheadCellMousedownFn,emitFacade:false,queuable:true});this.publish("theadRowMousedown",{defaultFn:this._defTheadRowMousedownFn,emitFacade:false,queuable:true});this.publish("theadMousedown",{defaultFn:this._defTheadMousedownFn,emitFacade:false,queuable:true});this.publish("tbodyCellMousedown",{defaultFn:this._defTbodyCellMousedownFn,emitFacade:false,queuable:true});this.publish("tbodyRowMousedown",{defaultFn:this._defTbodyRowMousedownFn,emitFacade:false,queuable:true});this.publish("tbodyMousedown",{defaultFn:this._defTbodyMousedownFn,emitFacade:false,queuable:true});this.publish("msgCellMousedown",{defaultFn:this._defMsgCellMousedownFn,emitFacade:false,queuable:true});this.publish("msgRowMousedown",{defaultFn:this._defMsgRowMousedownFn,emitFacade:false,queuable:true});this.publish("msgTbodyMousedown",{defaultFn:this._defMsgTbodyMousedownFn,emitFacade:false,queuable:true});this.publish("theadCellClick",{defaultFn:this._defTheadCellClickFn,emitFacade:false,queuable:true});this.publish("theadRowClick",{defaultFn:this._defTheadRowClickFn,emitFacade:false,queuable:true});
this.publish("theadClick",{defaultFn:this._defTheadClickFn,emitFacade:false,queuable:true});this.publish("tbodyCellClick",{defaultFn:this._defTbodyCellClickFn,emitFacade:false,queuable:true});this.publish("tbodyRowClick",{defaultFn:this._defTbodyRowClickFn,emitFacade:false,queuable:true});this.publish("tbodyClick",{defaultFn:this._defTbodyClickFn,emitFacade:false,queuable:true});this.publish("msgCellClick",{defaultFn:this._defMsgCellClickFn,emitFacade:false,queuable:true});this.publish("msgRowClick",{defaultFn:this._defMsgRowClickFn,emitFacade:false,queuable:true});this.publish("msgTbodyClick",{defaultFn:this._defMsgTbodyClickFn,emitFacade:false,queuable:true});this.publish("theadCellDblclick",{defaultFn:this._defTheadCellDblclickFn,emitFacade:false,queuable:true});this.publish("theadRowDblclick",{defaultFn:this._defTheadRowDblclickFn,emitFacade:false,queuable:true});this.publish("theadDblclick",{defaultFn:this._defTheadDblclickFn,emitFacade:false,queuable:true});this.publish("tbodyCellDblclick",{defaultFn:this._defTbodyCellDblclickFn,emitFacade:false,queuable:true});this.publish("tbodyRowDblclick",{defaultFn:this._defTbodyRowDblclickFn,emitFacade:false,queuable:true});this.publish("tbodyDblclick",{defaultFn:this._defTbodyDblclickFn,emitFacade:false,queuable:true});this.publish("msgCellDblclick",{defaultFn:this._defMsgCellDblclickFn,emitFacade:false,queuable:true});this.publish("msgRowDblclick",{defaultFn:this._defMsgRowDblclickFn,emitFacade:false,queuable:true});this.publish("msgTbodyDblclick",{defaultFn:this._defMsgTbodyDblclickFn,emitFacade:false,queuable:true});o.delegate(h,this._onDomEvent,m,this,"theadCellFocus");o.delegate(k,this._onDomEvent,m,this,"theadCellKeydown");o.delegate(G,this._onDomEvent,m,this,"theadCellMouseenter");o.delegate(N,this._onDomEvent,m,this,"theadCellMouseleave");o.delegate(J,this._onDomEvent,m,this,"theadCellMouseup");o.delegate(X,this._onDomEvent,m,this,"theadCellMousedown");o.delegate(c,this._onDomEvent,m,this,"theadCellClick");l.delegate(U,this._onDomEvent,m,this,"theadCellDblclick");o.delegate(h,this._onDomEvent,n,this,"tbodyCellFocus");o.delegate(k,this._onDomEvent,n,this,"tbodyCellKeydown");o.delegate(G,this._onDomEvent,n,this,"tbodyCellMouseenter");o.delegate(N,this._onDomEvent,n,this,"tbodyCellMouseleave");o.delegate(J,this._onDomEvent,n,this,"tbodyCellMouseup");o.delegate(X,this._onDomEvent,n,this,"tbodyCellMousedown");o.delegate(c,this._onDomEvent,n,this,"tbodyCellClick");l.delegate(U,this._onDomEvent,n,this,"tbodyCellDblclick");o.delegate(h,this._onDomEvent,Y,this,"msgCellFocus");o.delegate(k,this._onDomEvent,Y,this,"msgCellKeydown");o.delegate(G,this._onDomEvent,Y,this,"msgCellMouseenter");o.delegate(N,this._onDomEvent,Y,this,"msgCellMouseleave");o.delegate(J,this._onDomEvent,Y,this,"msgCellMouseup");o.delegate(X,this._onDomEvent,Y,this,"msgCellMousedown");o.delegate(c,this._onDomEvent,Y,this,"msgCellClick");l.delegate(U,this._onDomEvent,Y,this,"msgCellDblclick");},_onDomEvent:function(l,Y){this.fire(Y,l);},_defTheadCellClickFn:function(Y){this.fire("theadRowClick",Y);},_defTheadRowClickFn:function(Y){this.fire("theadClick",Y);},_defTheadClickFn:function(Y){},syncUI:function(){this._uiSetColumnset(this.get("columnset"));this._uiSetRecordset(this.get("recordset"));this._uiSetStrings(this.get("strings"));},_uiSetStrings:function(Y){this._uiSetSummary(Y.summary);this._uiSetCaption(Y.caption);},_uiSetSummary:function(Y){this._tableNode.set("summary",Y);},_uiSetCaption:function(Y){this._captionNode.setContent(Y);},_uiSetColumnset:function(o){var l=o.tree,q=this._theadNode,m=0,Y=l.length,n=q.get("parentNode"),p=q.next();q.remove();q.get("children").remove(true);for(;m<Y;++m){this._addTheadTrNode({thead:q,columns:l[m]},(m===0),(m===Y-1));}n.insert(q,p);},_addTheadTrNode:function(m,Y,l){m.tr=this._createTheadTrNode(m,Y,l);this._attachTheadTrNode(m);},_createTheadTrNode:function(s,l,r){var q=S(f(this.get("trTemplate"),s)),n=0,m=s.columns,Y=m.length,p;if(l){q.addClass(e);}if(r){q.addClass(H);}for(;n<Y;++n){p=m[n];this._addTheadThNode({value:p.get("label"),column:p,tr:q});}return q;},_attachTheadTrNode:function(Y){Y.thead.appendChild(Y.tr);},_addTheadThNode:function(Y){Y.th=this._createTheadThNode(Y);this._attachTheadThNode(Y);},_createTheadThNode:function(l){var Y=l.column;l.id=Y.get("id");l.colspan=Y.colSpan;l.rowspan=Y.rowSpan;l.classnames=Y.get("classnames");l.value=f(this.get("thValueTemplate"),l);return S(f(this.thTemplate,l));},_attachTheadThNode:function(Y){Y.tr.appendChild(Y.th);},_uiSetRecordset:function(l){var n=0,Y=l.getLength(),m=this._tbodyNode,p=m.get("parentNode"),q=m.next(),r={tbody:m};m.remove();for(;n<Y;++n){r.record=l.getRecord(n);r.rowindex=n;this._addTbodyTrNode(r);}p.insert(m,q);},_addTbodyTrNode:function(m){var l=m.tbody,Y=m.record;m.tr=l.one("#"+Y.get("id"))||this._createTbodyTrNode(m);this._attachTbodyTrNode(m);},_createTbodyTrNode:function(p){var n=S(f(this.get("trTemplate"),{id:p.record.get("id")})),l=0,m=this.get("columnset").keys,Y=m.length;p.tr=n;for(;l<Y;++l){p.column=m[l];this._addTbodyTdNode(p);}return n;},_attachTbodyTrNode:function(p){var l=p.tbody,n=p.tr,Y=p.rowindex,m=l.get("children").item(Y)||null,q=(Y%2===0);if(q){n.replaceClass(a,T);}else{n.replaceClass(T,a);}l.insertBefore(n,m);},_addTbodyTdNode:function(Y){Y.td=this._createTbodyTdNode(Y);this._attachTbodyTdNode(Y);},_createTbodyTdNode:function(l){var Y=l.column;l.headers=Y.get("headers");l.classnames=Y.get("classnames");l.value=this.formatDataCell(l);return S(f(this.tdTemplate,l));},_attachTbodyTdNode:function(Y){Y.tr.appendChild(Y.td);},formatDataCell:function(l){var Y=l.record;l.data=Y.get("data");l.value=Y.getValue(l.column.get("field"));return f(this.get("tdValueTemplate"),l);}});C.namespace("DataTable").Base=R;},"@VERSION@",{lang:["en"],requires:["intl","substitute","widget","recordset-base"]});