YUI.add("datatable-sort",function(G){var A=G.Sort.compare,C="asc",B="desc",E='<a class="{link_class}" title="{link_title}" href="{link_href}">{value}</a>';function F(H,I,J){F.superclass.constructor.apply(this,arguments);}G.mix(F,{NS:"sort",NAME:"recordsetSort",ATTRS:{dt:{},defaultSorter:{value:function(J,H,K,L){var I=A(J.getValue(K),H.getValue(K),L);if(I===0){return A(J.get("id"),H.get("id"),L);}else{return I;}}}}});G.extend(F,G.Plugin.Base,{initializer:function(H){this.addTarget(this.get("dt"));this.publish("sort",{defaultFn:G.bind("_defSortFn",this)});},destructor:function(H){},_defSortFn:function(H){this.get("host").get("records").sort(function(J,I){return(H.sorter)(J,I,H.field,H.desc);});},sort:function(H,I,J){this.fire("sort",{field:H,desc:I,sorter:J||this.get("defaultSorter")});},custom:function(){alert("sort custom");},asc:function(){alert("sort asc");},desc:function(){alert("sort desc");},reverse:function(){alert("sort reverse");}});G.namespace("Plugin").RecordsetSort=F;function D(){D.superclass.constructor.apply(this,arguments);}G.mix(D,{NS:"sort",NAME:"dataTableSort",ATTRS:{sortedBy:{value:null}}});G.extend(D,G.Plugin.Base,{thLinkTemplate:E,initializer:function(H){var I=this.get("host");I.get("recordset").plug(F,{dt:I});I.on("theadCellClick",this._onEventSortColumn);I.after("recordsetSort:sort",function(){I._uiSetRecordset(I.get("recordset"));});I.after("sortedByChangeEvent",function(){alert("ok");});},_onEventSortColumn:function(L){L.halt();var J=this.get("columnset").get("hash")[L.target.get("id")],K=J.get("field"),I=this.get("sortedBy"),H=(I&&I.field===K&&I.dir===C)?B:C,M=J.get("sortFn");this.get("recordset").sort.sort(K,H===B,M);this.set("sortedBy",{field:K,dir:H});}});G.namespace("Plugin").DataTableSort=D;},"@VERSION@",{lang:["en"],requires:["plugin","datatable-base"]});