YUI.add("recordset-base",function(D){function A(E){A.superclass.constructor.apply(this,arguments);}A.NAME="record";A.ATTRS={id:{valueFn:"_setId",writeOnce:true},data:{setter:function(E){if(E instanceof D.Record){this.value=E.data;}}}};D.extend(A,D.Base,{_setId:function(){return D.guid();},initializer:function(E){},destructor:function(){},getValue:function(E){if(E===undefined){return this.get("data");}else{return this.get("data")[E];}return null;}});D.Record=A;var B=D.ArrayList;var C=D.Base.create("recordset",D.Base,[],{initializer:function(){this._recordsetChanged();},destructor:function(){},_add:function(F,E){E=(D.Lang.isNumber(E)&&(E>-1))?E:this.get("records").length;this._items.splice(E,0,F);return F;},_updateGivenArray:function(E,F,H){var G=0,J=[],I=[];for(;G<E.length;G++){I[G]=this._changeToRecord(E[G]);if(G===0){J[G]=this.get("records").splice(F,1,I[G])[0];}else{J[G]=this._updateGivenObject(I[G],F+G,H).overwritten[0];if(J[G]===undefined){J.pop();}}}return({updated:I,overwritten:J});},_updateGivenObject:function(G,E,F){var I=[],H=[];I[0]=this._changeToRecord(G);if(F){H[0]=this.get("records").splice(E,1,I[0])[0];}else{this.get("records").splice(E,0,I[0]);}return({updated:I,overwritten:H});},_changeToRecord:function(F){var E;if(F instanceof D.Record){E=F;}else{E=new D.Record({data:F});}return E;},_recordsetChanged:function(){this.on(["recordsetUpdatedEvent","recordsetAddedEvent","recordsetRemovedEvent","recordsetEmptiedEvent"],function(){this.fire("recordsetChangedEvent",{});});},_recordAdded:function(F,E){this.fire("recordsetAddedEvent",{data:F,index:E});},_recordRemoved:function(F,E){this.fire("recordsetRemovedEvent",{data:F,index:E});},_recordsetEmptied:function(){this.fire("recordsetEmptiedEvent",{});},_recordsetUpdated:function(H,F,E){var G={data:{updated:H,overwritten:F},index:E};this.fire("recordsetUpdatedEvent",G);},getRecord:function(E){return this._items[E];},getRecords:function(G,F){var H=0,E=[];F=(D.Lang.isNumber(F)&&(F>0))?F:1;for(;H<F;H++){E.push(this._items[G+H]);}return E;},getLength:function(){return this.size();},getValuesByKey:function(G){var F=0,E=this.get("records").length,H=[];for(;F<E;F++){H.push(this.getRecord(F).getValue(G));}return H;},add:function(J,F){var H,I=[],E,G;if(D.Lang.isArray(J)){I=[];E=(D.Lang.isNumber(F)&&(F>-1))?F:this._items.length;for(G=0;G<J.length;G++){H=new D.Record({data:J[G]});I[G]=this._add(H,E);E++;}}else{if(D.Lang.isObject(J)&&!(J instanceof D.Record)){H=new D.Record({data:J});I[0]=this._add(H,F);}else{if(J instanceof D.Record){I[0]=this._add(H,F);}}}this._recordAdded(I,F);return({data:I,index:F});},remove:function(F,E){var G=[];F=(D.Lang.isNumber(F)&&(F>-1))?F:(this.size()-1);E=(D.Lang.isNumber(E)&&(E>0))?E:1;G=this._items.splice(F,E);this._recordRemoved(G,F);return({data:G,index:F});},empty:function(){this._items=[];this._recordsetEmptied();return null;},update:function(H,E,F){var G;if(D.Lang.isArray(H)){G=this._updateGivenArray(H,E,F);}else{if(D.Lang.isObject(H)){G=this._updateGivenObject(H,E,true);}}this._recordsetUpdated(G.updated,G.overwritten,E);return null;}},{ATTRS:{records:{validator:D.Lang.isArray,getter:function(){return D.Array(this._items);},setter:function(G){var F=[];function E(H){if(H instanceof D.Record){F.push(H);}else{o=new D.Record({data:H});F.push(o);}}D.Array.each(G,E);this._items=D.Array(F);},lazyAdd:false}}});D.augment(C,B);D.Recordset=C;},"@VERSION@",{requires:["base","record","collection"]});YUI.add("recordset-sort",function(C){var A=C.ArraySort.compare;function B(D,E,F){B.superclass.constructor.apply(this,arguments);}C.mix(B,{NS:"sort",NAME:"recordsetSort",ATTRS:{lastSortProperties:{value:{field:undefined,desc:undefined,sorter:undefined}},defaultSorter:{value:function(F,D,G,H){var E=A(F.getValue(G),D.getValue(G),H);if(E===0){return A(F.get("id"),D.get("id"),H);}else{return E;}}}}});C.extend(B,C.Plugin.Base,{initializer:function(D){this.publish("sort",{defaultFn:C.bind("_defSortFn",this)});},destructor:function(D){},_defSortFn:function(D){this.set("lastSortProperties",D);this.get("host").get("records").sort(function(F,E){return(D.sorter)(F,E,D.field,D.desc);});},sort:function(D,E,F){this.fire("sort",{field:D,desc:E,sorter:F||this.get("defaultSorter")});},resort:function(){var D=this.get("lastSortProperties");this.fire("sort",{field:D.field,desc:D.desc,sorter:this.get("defaultSorter")});},reverse:function(){var E=this.get("host"),D=E.getLength()-1,G=0;for(;G<=D;G++){if(G<(D-G)){var H=E.getRecord(G);var F=E.getRecord(D-G);E.update(H,D-G);E.update(F,G);}}}});C.namespace("Plugin").RecordsetSort=B;},"@VERSION@",{requires:["recordset-base","arraysort","plugin"]});YUI.add("recordset-filter",function(B){function A(C){A.superclass.constructor.apply(this,arguments);}B.mix(A,{NS:"filter",NAME:"recordsetFilter",ATTRS:{}});B.extend(A,B.Plugin.Base,{initializer:function(C){},destructor:function(C){},alert:function(){alert("im working!!");},filter:function(E,D){var I=[],F=0,H,C,G;G=this.get("host");C=G.get("records").getLength();for(;F<C;F++){H=G.getRecord(F);if((B.Lang.isFunction(E)&&D===undefined&&E(H))||(B.Lang.isString(E)&&B.Lang.isValue(D)&&H.getValue(E)===D)){I.push(H);}}return new G.constructor({records:I});}});B.namespace("Plugin").RecordsetFilter=A;},"@VERSION@",{requires:["recordset-base","plugin"]});YUI.add("recordset",function(A){},"@VERSION@",{use:["recordset-base","recordset-sort","recordset-filter"]});