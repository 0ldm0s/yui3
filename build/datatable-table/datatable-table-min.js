YUI.add("datatable-table",function(g,e){var c=g.Array,b=g.Lang,d=b.sub,a=b.isArray,f=b.isFunction;g.namespace("DataTable").TableView=g.Base.create("table",g.View,[],{CAPTION_TEMPLATE:'<caption class="{className}"/>',TABLE_TEMPLATE:'<table cellspacing="0" class="{className}"/>',getCell:function(i,h){return this.body&&this.body.getCell&&this.body.getCell.apply(this.body,arguments);},getClassName:function(){var h=this.host,i=(h&&h.constructor.NAME)||this.constructor.NAME;if(h&&h.getClassName){return h.getClassName.apply(h,arguments);}else{return g.ClassNameManager.getClassName.apply(g.ClassNameManager,[i].concat(c(arguments,0,true)));}},getRecord:function(){return this.body&&this.body.getRecord&&this.body.getRecord.apply(this.body,arguments);},getRow:function(h){return this.body&&this.body.getRow&&this.body.getRow.apply(this.body,arguments);},_afterSummaryChange:function(h){this._uiSetSummary(h.newVal);},_afterCaptionChange:function(h){this._uiSetCaption(h.newVal);},_afterWidthChange:function(h){this._uiSetWidth(h.newVal);},_bindUI:function(){var h;if(!this._eventHandles){h=g.bind("_relayAttrChange",this);this._eventHandles=this.after({columnsChange:h,modelListChange:h,summaryChange:g.bind("_afterSummaryChange",this),captionChange:g.bind("_afterCaptionChange",this),widthChange:g.bind("_afterWidthChange",this)});}},_createTable:function(){return g.Node.create(d(this.TABLE_TEMPLATE,{className:this.getClassName("table")})).empty();},_defRenderBodyFn:function(h){h.view.render();},_defRenderFooterFn:function(h){h.view.render();},_defRenderHeaderFn:function(h){h.view.render();},_defRenderTableFn:function(j){var h=this.get("container"),i=this.getAttrs();if(!this.tableNode){this.tableNode=this._createTable();}i.host=this.get("host")||this;i.table=this;i.container=this.tableNode;this._uiSetCaption(this.get("caption"));this._uiSetSummary(this.get("summary"));this._uiSetWidth(this.get("width"));if(this.head||j.headerView){if(!this.head){this.head=new j.headerView(g.merge(i,j.headerConfig));}this.fire("renderHeader",{view:this.head});}if(this.foot||j.footerView){if(!this.foot){this.foot=new j.footerView(g.merge(i,j.footerConfig));}this.fire("renderFooter",{view:this.foot});}i.columns=this.displayColumns;if(this.body||j.bodyView){if(!this.body){this.body=new j.bodyView(g.merge(i,j.bodyConfig));}this.fire("renderBody",{view:this.body});}if(!h.contains(this.tableNode)){h.append(this.tableNode);}this._bindUI();},destructor:function(){if(this.head&&this.head.destroy){this.head.destroy();}delete this.head;if(this.foot&&this.foot.destroy){this.foot.destroy();}delete this.foot;if(this.body&&this.body.destroy){this.body.destroy();}delete this.body;if(this._eventHandles){this._eventHandles.detach();delete this._eventHandles;}if(this.tableNode){this.tableNode.remove().destroy(true);}},_extractDisplayColumns:function(){var h=this.get("columns"),j=[];function i(n){var m,k,l;for(m=0,k=n.length;m<k;++m){l=n[m];if(a(l.children)){i(l.children);}else{j.push(l);}}}i(h);this.displayColumns=j;},_initEvents:function(){this.publish({renderTable:{defaultFn:g.bind("_defRenderTableFn",this)},renderHeader:{defaultFn:g.bind("_defRenderHeaderFn",this)},renderBody:{defaultFn:g.bind("_defRenderBodyFn",this)},renderFooter:{defaultFn:g.bind("_defRenderFooterFn",this)}});},initializer:function(h){this.host=h.host;this._initEvents();this._extractDisplayColumns();this.after("columnsChange",this._extractDisplayColumns,this);},_relayAttrChange:function(i){var h=i.attrName,j=i.newVal;if(this.head){this.head.set(h,j);}if(this.foot){this.foot.set(h,j);}if(this.body){if(h==="columns"){j=this.displayColumns;}this.body.set(h,j);}},render:function(){if(this.get("container")){this.fire("renderTable",{headerView:this.get("headerView"),headerConfig:this.get("headerConfig"),bodyView:this.get("bodyView"),bodyConfig:this.get("bodyConfig"),footerView:this.get("footerView"),footerConfig:this.get("footerConfig")});}return this;},_uiSetCaption:function(j){var i=this.tableNode,h=this.captionNode;if(j){if(!h){this.captionNode=h=g.Node.create(d(this.CAPTION_TEMPLATE,{className:this.getClassName("caption")}));i.prepend(this.captionNode);}h.setHTML(j);}else{if(h){h.remove(true);delete this.captionNode;}}},_uiSetSummary:function(h){if(h){this.tableNode.setAttribute("summary",h);}else{this.tableNode.removeAttribute("summary");}},_uiSetWidth:function(h){var i=this.tableNode;i.setStyle("width",!h?"":(this.get("container").get("offsetWidth")-(parseInt(i.getComputedStyle("borderLeftWidth"),10)|0)-(parseInt(i.getComputedStyle("borderLeftWidth"),10)|0))+"px");i.setStyle("width",h);},_validateView:function(h){return f(h)&&h.prototype.render;}},{ATTRS:{columns:{validator:a},width:{value:"",validator:b.isString},headerView:{value:g.DataTable.HeaderView,validator:"_validateView"},footerView:{validator:"_validateView"},bodyView:{value:g.DataTable.BodyView,validator:"_validateView"}}});},"@VERSION@",{"requires":["datatable-core","datatable-head","datatable-body","view","classnamemanager"]});