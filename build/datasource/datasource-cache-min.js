YUI.add("datasource-cache",function(D){var C=D.Lang,B=D.DataSource.Base,A={};A.ATTRS={cache:{value:null,validator:function(E){return((E instanceof D.Cache)||(E===null));},set:function(G){var F=0,E=this._cacheHandlers;if(G!==null){if(E===null){E=[];E.push(D.before(this.beforeSendRequest,this,"sendRequest"));E.push(D.before(this.beforeReturnData,this,"returnData"));}}else{if(E!==null){for(;F<E;F++){D.detach(E[F]);}E=null;}}}}};A.prototype={_cacheHandlers:null,beforeSendRequest:function(F){var E=(this.get("cache"))?this.get("cache").retrieve(F.request,F.callback):null;if(E&&E.entry){F.preventDefault();D.DataSource.issueCallback(F.callback,[F.request,E.entry],false);return new D.Do.Halt("msg","newRetVal");}},beforeReturnData:function(H,G,F,E){if(this.get("cache")){this.get("cache").add(F[0],F[1],F[2]);}}};D.Base.build(B,[A],{dynamic:false});},"@VERSION@",{requires:["datasource-base"]});