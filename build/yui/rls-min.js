YUI.add("rls",function(a){a.rls_locals=function(c,i,b){if(c.config.modules){var g=[],j=a.Array.hash(i),d="fullpath",h,e=c.config.modules;for(h in e){if(e[h][d]){if(j[h]){g.push(e[h][d]);if(e[h].requires){a.Array.each(e[h].requires,function(k){if(!YUI.Env.mods[k]){if(e[k]){if(e[k][d]){g.push(e[k][d]);i.push(k);}}}});}}}}if(g.length){a.Get.script(g,{onEnd:function(f){b(c,i);},data:i});}else{b(c,i);}}else{b(c,i);}};a.rls_needs=function(e,b){var c=b||this,d=c.config;if(!YUI.Env.mods[e]&&!(d.modules&&d.modules[e])){return true;}return false;};a._rls=function(u){var x=a.config,f=x.modules,h=a.Array,c=a.Object,g=x.rls||{m:1,v:a.version,gv:x.gallery,env:1,lang:x.lang,"2in3v":x["2in3"],"2v":x.yui2,filt:x.filter,filts:x.filters,tests:1},n=function(d){return c.keys(h.hash(d));},l=x.rls_base||"load?",p=x.rls_tmpl||function(){var d=[],i;for(i in g){if(i in g&&g[i]){d.push(i+"={"+i+"}");}}return d.join("&");}(),r=[],j={},q,v,y,k=[],b=[],s,t=u.length,e;for(s=0;s<t;s++){j[u[s]]=1;if(a.rls_needs(u[s])){r.push(u[s]);}else{}}if(f){for(s in f){if(j[s]&&f[s].requires){t=f[s].requires.length;for(q=0;q<t;q++){y=f[s].requires[q];if(a.rls_needs(y)){r.push(y);}else{v=YUI.Env.mods[y]||f[y];if(v){v=v.details||v;if(v.requires){h.each(v.requires,function(d){if(a.rls_needs(d)){r.push(d);}});}}}}}}}c.each(YUI.Env.mods,function(d){if(j[d.name]){if(d.details&&d.details.requires){h.each(d.details.requires,function(i){if(a.rls_needs(i)){r.push(i);}});}}});r=n(r);h.each(r,function(d){if(d.indexOf("gallery-")===0||d.indexOf("yui2-")===0){b.push(d);if(!a.Loader){k.push("loader-base");u.push("loader-base");}}else{k.push(d);}});r=k;r=n(r);b=n(b);u=n(u);if(!r.length){return false;}g.m=r.sort();g.env=[].concat(c.keys(YUI.Env.mods),n(YUI._rls_skins)).sort();g.tests=a.Features.all("load",[a]);e=a.Lang.sub(l+p,g);x.rls=g;x.rls_tmpl=p;YUI._rls_active={asked:u,attach:r,gallery:b,inst:a,url:e};return e;};a.rls_oncomplete=function(b){YUI._rls_active.cb=b;};a.rls_done=function(b){YUI._rls_active.cb(b);};if(!YUI._rls_active){YUI._rls_active={};}if(!YUI._rls_skins){YUI._rls_skins=[];}if(!YUI.$rls){YUI.$rls=function(c){var e=YUI._rls_active,d=e.inst;if(d){if(c.css){d.Get.css(e.url+"&css=1");}if(e.gallery.length){c.modules=c.modules||[];c.modules=[].concat(c.modules,e.gallery);}if(c.modules&&!c.css){if(c.modules.length&&c.modules[0].indexOf("lang")===0){c.modules.unshift("intl");}d.Env.bootstrapped=true;d.Array.each(c.modules,function(f){if(f.indexOf("skin-")>-1){YUI._rls_skins.push(f);}});d._attach([].concat(c.modules,e.attach));if(e.gallery.length&&d.Loader){var b=new d.Loader(e.inst.config);b.onEnd=d.rls_done;b.context=d;b.data=e.gallery;b.ignoreRegistered=false;b.require(e.gallery);b.insert(null,(d.config.fetchCSS)?null:"js");}else{d.rls_done({data:e.asked});}}}};}},"@VERSION@",{requires:["get","features"]});