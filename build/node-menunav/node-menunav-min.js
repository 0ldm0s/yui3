YUI.add("node-menunav",function(A){YUI.add("node-menunav",function(E){var o=E.UA,AP=E.Lang,v=E.later,AL=E.ClassNameManager.getClassName,k=true,AJ=false,n=null,Q="menu",H="menuitem",AG="hidden",AC="tabIndex",R="parentNode",X="children",y="offsetHeight",AB="offsetWidth",AN="px",h="id",J=".",F="handledMouseOut",t="handledMouseOver",c="active",AK="label",e="a",w="mousedown",AO="keydown",AA="click",P="",V="first-of-type",m=AL(Q),AF=AL(Q,AG),b=AL(Q,"horizontal"),AH=AL(Q,AK),j=AL(Q,AK,c),a=AL(Q,AK,(Q+"visible")),K=AL(H),B=AL(H,c),i=J+m;var L=function(Y){var AR=Y.previous(),AQ;if(!AR){AQ=Y.get(R).get(X);AR=AQ.item(AQ.size()-1);}return AR;};var d=function(Y){var AR=Y.next(),AQ;if(!AR){AQ=Y.get(R).get(X);AR=AQ.item(0);}return AR;};var S=function(Y,AQ){Y.setAttribute("role",AQ);};var T=function(Y,AR,AQ){Y.setAttribute(("aria-"+AR),AQ);};var AI=function(Y){S(Y,"presentation");};var AD=function(Y){Y.set(AC,-1);};var N=function(Y){Y.set(AC,0);};var G=function(Y){var AQ=AJ;if(Y){AQ=Y.get("nodeName").toLowerCase()===e;}return AQ;};var O=function(Y){return Y.hasClass(K);};var u=function(Y){return Y.hasClass(AH);};var s=function(Y){return Y.hasClass(b);};var p=function(Y){return Y.hasClass(a);};var r=function(Y){return G(Y)?Y:Y.query(e);};var z=function(AR,AQ,Y){var AS;if(AR){if(AR.hasClass(AQ)){AS=AR;}if(!AS&&Y){AS=AR.ancestor((J+AQ));}}return AS;};var M=function(Y){return Y.ancestor(i);};var Z=function(AQ,Y){return z(AQ,m,Y);};var AE=function(AQ,Y){var AR;if(AQ){AR=z(AQ,K,Y);}return AR;};var q=function(AQ,Y){var AR;if(AQ){if(Y){AR=z(AQ,AH,Y);}else{AR=z(AQ,AH)||AQ.query((J+AH));}}return AR;};var C=function(AQ,Y){var AR;if(AQ){AR=AE(AQ,Y)||q(AQ,Y);}return AR;};var W=function(AS,AR){var Y,AT,AQ;if(AS){Y=O(AS)?AS:AS.get(R);AT=AR?L(Y):d(Y);AQ=C(AT);}return AQ;};var AM=function(Y){return W(Y,true);};var D=function(Y){return C(Y.query("li"));};var g=function(Y){return O(Y)?B:j;};var l=function(AR){var AQ=r(AR);try{AQ.blur();}catch(Y){}};var x=function(AR){var AQ=r(AR);try{AQ.focus();}catch(Y){}};var f=function(Y,AQ){return Y&&!Y[t]&&(Y===AQ||Y.contains(AQ));};var I=function(AQ,Y){return AQ&&!AQ[F]&&(AQ!==Y&&!AQ.contains(Y));};var U=function(AT){var AS=this,Af=AT.owner,Ab,AY,Ac,Ad,AX,AU,Y,Aa,AZ,AW,AR,Ae,AV,AQ;if(Af){Ad=AT.useARIA;AX=AT.autoSubmenuDisplay;AU=AT.mouseOutHideDelay;AS._useARIA=AP.isBoolean(Ad)?Ad:((o.gecko&&o.gecko>=1.9)||(o.ie&&o.ie>=8));AS._autoSubmenuDisplay=AP.isBoolean(AX)?AX:k;AS._submenuShowDelay=AT.submenuShowDelay||250;AS._submenuHideDelay=AT.submenuHideDelay||250;AS._mouseOutHideDelay=AP.isNumber(AU)?AU:750;AW=Af.queryAll(i);if(AW){AW.addClass(AF);}AQ=Af.queryAll("ul:"+V);if(AQ){AQ.addClass(V);}Af.on("mouseover",AS._onMouseOver,AS);Af.on("mouseout",AS._onMouseOut,AS);Af.on("mousemove",AS._onMouseMove,AS);Af.on(w,AS._toggleSubmenuDisplay,AS);Af.on(AO,AS._toggleSubmenuDisplay,AS);Af.on(AA,AS._toggleSubmenuDisplay,AS);Af.on("keypress",AS._onKeyPress,AS);Af.on(AO,AS._onKeyDown,AS);Ab=Af.get("ownerDocument");Ab.on(w,AS._onDocMouseDown,AS);E.on("focus",E.bind(AS._onDocFocus,AS),Ab);AS._rootMenu=Af;if(AS._useARIA){S(Af,"menubar");AZ=Af.queryAll("ul,li");if(AZ){AZ.each(function(Ag){AI(Ag);});}AR=Af.queryAll((J+AL(H,"content")));if(AR){AR.each(function(Ag){AD(Ag);S(Ag,H);});}Ae=Af.queryAll((J+AH));if(Ae){Ae.each(function(Ag){Y=Ag;Aa=Ag.query((J+AL(Q,"toggle")));if(Aa){AI(Aa);AD(Aa);Y=Aa.previous();}S(Y,H);T(Y,"haspopup",k);AD(Y);Ac=Y.get(h);if(!Ac){Ac=E.guid();Y.set(h,Ac);}AY=Ag.next();S(AY,Q);T(AY,"labelledby",Ac);T(AY,AG,k);});}AV=D(Af);if(AV){N(r(AV));AS._firstItem=AV;}}}};U.NAME="nodeMenuNav";U.NS="nodeMenuNav";U.SHIM_TEMPLATE_TITLE="Menu Stacking Shim";U.SHIM_TEMPLATE='<iframe frameborder="0" role="presentation" class="'+AL("shim")+'" title="'+U.SHIM_TEMPLATE_TITLE+'" src="javascript:false;"></iframe>';U.prototype={_rootMenu:n,_activeItem:n,_activeMenu:n,_hasFocus:AJ,_blockMouseEvent:AJ,_currentMouseX:0,_movingToSubmenu:AJ,_showSubmenuTimer:n,_hideSubmenuTimer:n,_hideAllSubmenusTimer:n,_firstItem:n,_autoSubmenuDisplay:k,_isRoot:function(Y){return this._rootMenu.compareTo(Y);},_getTopmostSubmenu:function(AS){var AR=this,Y=M(AS),AQ;if(!Y){AQ=AS;}else{if(AR._isRoot(Y)){AQ=AS;}else{AQ=AR._getTopmostSubmenu(Y);}}return AQ;},_clearActiveItem:function(){var AQ=this,Y=AQ._activeItem;if(Y){Y.removeClass(g(Y));if(AQ._useARIA){AD(r(Y));}}AQ._activeItem=n;},_setActiveItem:function(AQ){var Y=this;Y._clearActiveItem();AQ.addClass(g(AQ));if(Y._useARIA){N(r(AQ));}Y._activeItem=AQ;},_focusItem:function(Y){if(this._hasFocus){v(0,null,x,Y);}},_showMenu:function(AV){var AS=this,AQ=M(AV),AT=AV.get(R),AR=AT.getXY(),Y,AU;if(s(AQ)){AR[1]=AR[1]+AT.get(y);}else{AR[0]=AR[0]+AT.get(AB);}AV.setXY(AR);if(o.ie<8){if(o.ie===6&&!AV.iframeShim){AV.appendChild(E.Node.create(U.SHIM_TEMPLATE));AV.iframeShim=Y;}AV.setStyles({height:P,width:P});AV.setStyles({height:(AV.get(y)+AN),width:(AV.get(AB)+AN)});}AV.previous().addClass(a);AV.removeClass(AF);if(AS._useARIA){T(AV,AG,AJ);}AU=D(AV);AS._focusItem(AU);},_hideMenu:function(AS,AQ){var AR=this,AT=AS.previous(),Y;AT.removeClass(a);if(AQ){AR._setActiveItem(AT);AR._focusItem(AT);}Y=AS.query((J+B));if(Y){Y.removeClass(B);}AS.setStyles({left:P,top:P});AS.addClass(AF);T(AS,AG,k);},_hideAllSubmenus:function(AR){var AQ=this,Y=AR.queryAll(i);if(Y){Y.each(E.bind(function(AS){AQ._hideMenu(AS);},AQ));}},_cancelShowSubmenuTimer:function(){var AQ=this,Y=AQ._showSubmenuTimer;if(Y){Y.cancel();AQ._showSubmenuTimer=n;}},_cancelHideSubmenuTimer:function(){var Y=this,AQ=Y._hideSubmenuTimer;if(AQ){AQ.cancel();Y._hideSubmenuTimer=n;}},_onMenuMouseOver:function(AS,AR){var AQ=this,Y=AQ._hideAllSubmenusTimer;if(Y){Y.cancel();AQ._hideAllSubmenusTimer=n;}AQ._cancelHideSubmenuTimer();AQ._activeMenu=AS;if(AQ._movingToSubmenu&&s(AS)){AQ._movingToSubmenu=AJ;}},_onMenuMouseOut:function(AW,AU){var AT=this,AR=AT._activeMenu,AV=AU.relatedTarget,Y=AT._activeItem,AS,AQ;if(AR&&!AR.contains(AV)){AS=M(AR);if(AS&&!AS.contains(AV)){if(AT._mouseOutHideDelay>0){AT._cancelShowSubmenuTimer();AT._hideAllSubmenusTimer=v(AT._mouseOutHideDelay,AT,function(){var AX;
AR=AT._activeMenu;AT._hideAllSubmenus(AT._rootMenu);if(AR){AX=AT._getTopmostSubmenu(AR);AT._focusItem(AX.previous());}});}}else{if(Y){AQ=M(Y);if(!AT._isRoot(AQ)){AT._focusItem(AQ.previous());}}}}},_onMenuLabelMouseOver:function(AT,AV){var AU=this,AS=AU._activeMenu,Y=AU._isRoot(AS),AR=(AU._autoSubmenuDisplay&&Y||!Y),AQ;AU._setActiveItem(AT);AU._focusItem(AT);if(AR&&!AU._movingToSubmenu){AU._cancelHideSubmenuTimer();AU._cancelShowSubmenuTimer();if(!p(AT)){AQ=AT.next();if(AQ){AU._hideAllSubmenus(AS);AU._showSubmenuTimer=v(AU._submenuShowDelay,AU,AU._showMenu,AQ);}}}},_onMenuLabelMouseOut:function(AS,AU){var AT=this,Y=AT._isRoot(AT._activeMenu),AR=(AT._autoSubmenuDisplay&&Y||!Y),AV=AU.relatedTarget,AQ=AS.next();AT._clearActiveItem();if(AR){if(AT._movingToSubmenu&&!AT._showSubmenuTimer&&AQ){AT._hideSubmenuTimer=v(AT._submenuHideDelay,AT,AT._hideMenu,AQ);}else{if(!AT._movingToSubmenu&&AQ&&!AQ.contains(AV)&&AV!==AQ){AT._cancelShowSubmenuTimer();AT._hideMenu(AQ);}}}},_onMenuItemMouseOver:function(AS,AU){var AT=this,AR=AT._activeMenu,Y=AT._isRoot(AR),AQ=(AT._autoSubmenuDisplay&&Y||!Y);AT._setActiveItem(AS);AT._focusItem(AS);if(AQ&&!AT._movingToSubmenu){AT._hideAllSubmenus(AR);}},_onMenuItemMouseOut:function(Y,AQ){this._clearActiveItem();},_onVerticalMenuKeyDown:function(Y){var AQ=this,AV=AQ._activeMenu,Ab=AQ._rootMenu,AR=Y.target,AT=C(AR,k),AU=AJ,AZ=Y.keyCode,AX,AS,AW,Aa,AY;switch(AZ){case 37:AS=M(AV);if(AS&&s(AS)){AQ._hideMenu(AV);AW=L(AV.get(R));AY=C(AW);if(AY){if(u(AY)){AX=AY.next();if(AX){AQ._showMenu(AX);AQ._setActiveItem(D(AX));}}else{AQ._setActiveItem(AY);x(AY);}}}else{if(!AQ._isRoot(AV)){AQ._hideMenu(AV,k);}}AU=k;break;case 39:if(u(AR)){AX=AR.next();if(AX){AQ._showMenu(AX);AQ._setActiveItem(D(AX));}}else{if(s(Ab)){AX=AQ._getTopmostSubmenu(AV);AW=d(AX.get(R));AY=C(AW);AQ._hideAllSubmenus(Ab);if(AY){if(u(AY)){AX=AY.next();if(AX){AQ._showMenu(AX);AQ._setActiveItem(D(AX));}}else{AQ._setActiveItem(AY);x(AY);}}}}AU=k;break;case 38:case 40:AQ._hideAllSubmenus(AV);Aa=AZ===38?AM(AT):W(AT);AQ._setActiveItem(Aa);x(Aa);AU=k;break;}if(AU){Y.preventDefault();}},_onHorizontalMenuKeyDown:function(Y){var AQ=this,AU=AQ._activeMenu,AR=Y.target,AS=C(AR,k),AT=AJ,AW=Y.keyCode,AX,AV;switch(AW){case 37:case 39:AQ._hideAllSubmenus(AU);AX=AW===37?AM(AS):W(AS);AQ._setActiveItem(AX);x(AX);AT=k;break;case 40:AQ._hideAllSubmenus(AU);if(u(AS)){AV=AS.next();if(AV){AQ._showMenu(AV);AQ._setActiveItem(D(AV));}AT=k;}break;}if(AT){Y.preventDefault();}},_onMouseMove:function(AQ){var Y=this;v(10,Y,function(){Y._currentMouseX=AQ.pageX;});},_onMouseOver:function(AT){var AS=this,AQ,Y,AV,AR,AU;if(AS._blockMouseEvent){AS._blockMouseEvent=AJ;}else{AQ=AT.target;Y=Z(AQ,k);AV=q(AQ,k);AU=AE(AQ,k);if(f(Y,AQ)){AS._onMenuMouseOver(Y,AT);Y[t]=k;Y[F]=AJ;AR=M(Y);if(AR){AR[F]=k;AR[t]=AJ;}}if(f(AV,AQ)){AS._onMenuLabelMouseOver(AV,AT);AV[t]=k;AV[F]=AJ;}if(f(AU,AQ)){AS._onMenuItemMouseOver(AU,AT);AU[t]=k;AU[F]=AJ;}}},_onMouseOut:function(AQ){var AR=this,AT=AR._activeMenu,AY=AJ,AS,AU,AW,Y,AV,AX;AR._movingToSubmenu=(AT&&!s(AT)&&((AQ.pageX-5)>AR._currentMouseX));AS=AQ.target;AU=AQ.relatedTarget;AW=Z(AS,k);Y=q(AS,k);AX=AE(AS,k);if(I(Y,AU)){AR._onMenuLabelMouseOut(Y,AQ);Y[F]=k;Y[t]=AJ;}if(I(AX,AU)){AR._onMenuItemMouseOut(AX,AQ);AX[F]=k;AX[t]=AJ;}if(Y){AV=Y.next();if(AV&&(AU===AV||AV.contains(AU))){AY=k;}}if(I(AW,AU)||AY){AR._onMenuMouseOut(AW,AQ);AW[F]=k;AW[t]=AJ;}},_toggleSubmenuDisplay:function(AR){var AS=this,AT=AR.target,AQ=q(AT,k),Y=AR.type,AX,AW,AV,AY,AZ,AU;if(AQ){AX=G(AT)?AT:AT.ancestor(G);if(AX){AV=AX.getAttribute("href",2);AY=AV.indexOf("#");AZ=AV.length;if(AY===0&&AZ>1){AU=AV.substr(1,AZ);AW=AQ.next();if(AW&&(AW.get(h)===AU)){if(Y===w||(Y===AO&&AR.keyCode===13)){if(o.webkit&&!AS._hasFocus){AS._hasFocus=k;}if(p(AQ)){AS._hideMenu(AW);x(AQ);}else{AS._hideAllSubmenus(AS._rootMenu);AS._showMenu(AW);}}if(Y===AA){AR.preventDefault();}}}}}},_onKeyPress:function(Y){switch(Y.keyCode){case 37:case 38:case 39:case 40:Y.preventDefault();break;}},_onKeyDown:function(AT){var AS=this,Y=AS._activeItem,AQ=AT.target,AR=M(AQ);if(AR){AS._activeMenu=AR;if(s(AR)){AS._onHorizontalMenuKeyDown(AT);}else{AS._onVerticalMenuKeyDown(AT);}if(AT.keyCode===27){if(!AS._isRoot(AR)){AS._hideMenu(AR,k);AT.stopPropagation();AS._blockMouseEvent=o.gecko?k:AJ;}else{if(Y){l(AQ);AS._clearActiveItem();}}}}},_onDocMouseDown:function(AS){var AR=this,AQ=AR._rootMenu,Y=AS.target;if(!AQ.compareTo(Y)&&!AQ.contains(Y)){AR._hideAllSubmenus(AQ);if(o.webkit){AR._hasFocus=AJ;AR._clearActiveItem();}}},_onDocFocus:function(AT){var AS=this,AQ=AS._useARIA,AU=AS._firstItem,Y=AS._activeItem,AR=AT.target;if(AS._rootMenu.contains(AR)){if(!AS._hasFocus){AS._hasFocus=k;Y=C(AR,k);if(Y){AS._setActiveItem(Y);}}}else{AS._clearActiveItem();AS._hasFocus=AJ;if(AU&&AQ){N(r(AU));}}}};E.namespace("Plugin");E.Plugin.NodeMenuNav=U;},"@VERSION@",{requires:["node","classnamemanager"]});},"@VERSION@",{requires:["node","classnamemanager"]});