YUI.add("node-menunav",function(A){YUI.add("node-menunav",function(B){var l=B.UA,AG=B.Lang,c=AG.later,AD=B.ClassNameManager.getClassName,i=true,AB=false,k=null,V=k,O="menu",F="menuitem",y="hidden",u="tabIndex",P="parentNode",X="children",q="offsetHeight",t="offsetWidth",AE="px",g="id",H=".",D="handledMouseOut",n="handledMouseOver",W="hover",AC="label",e="a",p="mousedown",AF="keydown",s="click",N="",j=AD(O),x=AD(O,y),b=AD(O,"horizontal"),z=AD(O,AC),T=AD(O,AC,W),a=AD(O,AC,(O+"visible")),I=AD(F),M=AD(F,W),U=AD("shim"),h=H+j,C=":first-child";var J=function(Y){var AI=Y.previous(),AH;if(!AI){AH=Y.get(P).get(X);AI=AH.item(AH.get("length")-1);}return AI;};var d=function(Y){var AI=Y.next(),AH;if(!AI){AH=Y.get(P).get(X);AI=AH.item(0);}return AI;};var Q=function(Y,AH){Y.setAttribute("role",AH);};var R=function(Y,AI,AH){Y.setAttribute(("aria-"+AI),AH);};var AA=function(Y){Q(Y,"presentation");};var v=function(Y){Y.set(u,-1);};var L=function(Y){Y.set(u,0);};var E=function(Y){var AH=AB;if(Y){AH=Y.get("nodeName").toLowerCase()===e;}return AH;};var o=function(Y){var AH;if(Y){AH=E(Y)?Y:Y.ancestor(E);}return AH;};var r=function(AH,Y){var AI;if(AH){AI=AH.hasClass(Y)?AH:AH.ancestor((H+Y));}return AI;};var K=function(Y){return Y.ancestor(h);};var Z=function(Y){return r(Y,j);};var m=function(Y){return r(Y,z);};var w=function(Y){return r(Y,I);};var f=function(Y,AH){return Y&&!Y[n]&&(Y===AH||Y.contains(AH));};var G=function(AH,Y){return AH&&!AH[D]&&(AH!==Y&&!AH.contains(Y));};var S=function(AK){var AH=this,AS=AK.owner,AP,AI,AN,AJ,AQ,AR,AM,AL,Y,AO;if(AS){AR=AK.useARIA;AM=AK.autoSubmenuDisplay;AL=AK.mouseOutHideDelay;AH._useARIA=AG.isBoolean(AR)?AR:((l.gecko&&l.gecko>=1.9)||(l.ie&&l.ie>=8));AH._autoSubmenuDisplay=AG.isBoolean(AM)?AM:i;AH._submenuShowDelay=AK.submenuShowDelay||250;AH._submenuHideDelay=AK.submenuHideDelay||250;AH._mouseOutHideDelay=AG.isNumber(AL)?AL:750;AS.queryAll(h).addClass(x);AS.on("mouseover",B.bind(AH._onMouseOver,AH));AS.on("mouseout",B.bind(AH._onMouseOut,AH));AS.on("mousemove",B.bind(AH._onMouseMove,AH));AS.on(p,B.bind(AH._toggleSubmenuDisplay,AH));AS.on(AF,B.bind(AH._toggleSubmenuDisplay,AH));AS.on(s,B.bind(AH._toggleSubmenuDisplay,AH));AS.on("keypress",B.bind(AH._onKeyPress,AH));AS.on(AF,B.bind(AH._onKeyDown,AH));AP=AS.get("ownerDocument");AP.on(p,B.bind(AH._onDocMouseDown,AH));B.on("focus",B.bind(AH._onDocFocus,AH),AP);AH._rootMenu=AS;if(AH._useARIA){Q(AS,"menubar");AI=AS.queryAll("li").each(function(AT){AA(AT);});AS.queryAll("ul").each(function(AT){AA(AT);});AS.queryAll((H+AD(F,"content"))).each(function(AT){v(AT);Q(AT,F);});AS.queryAll((H+z)).each(function(AT){Y=AT;AO=AT.query((H+AD(O,"toggle")));if(AO){AA(AO);v(AO);Y=AO.previous();}Q(Y,F);R(Y,"haspopup",i);v(Y);AQ=Y.get(g);if(!AQ){AQ=Y.get("_yuid");Y.set(g,AQ);}AN=AT.next();Q(AN,O);R(AN,"labelledby",AQ);R(AN,y,i);});if(AI){AJ=AI.item(0).query(e);L(AJ);AH._firstItem=w(AJ)||m(AJ);}}}};S.prototype={_rootMenu:k,_activeItem:k,_activeMenu:k,_hasFocus:AB,_blockMouseEvent:AB,_currentMouseX:0,_movingToSubmenu:AB,_showSubmenuTimer:k,_hideSubmenuTimer:k,_hideAllSubmenusTimer:k,_firstItem:k,_autoSubmenuDisplay:i,_isRoot:function(Y){return this._rootMenu.compareTo(Y);},_getTopmostSubmenu:function(AJ){var AI=this,Y=K(AJ),AH;if(!Y){AH=AJ;}else{if(AI._isRoot(Y)){AH=AJ;}else{AH=AI._getTopmostSubmenu(Y);}}return AH;},_blurItem:function(AI){var AH=E(AI)?AI:AI.query(e);try{AH.blur();}catch(Y){}},_focusItem:function(AI){var AH;if(this._hasFocus){AH=E(AI)?AI:AI.query(e);try{AH.focus();}catch(Y){}}},_showMenu:function(AL){var AJ=this,AH=K(AL),Y,AK,AI;if(AH){AK=AL.get(P);AI=AK.getXY();if(AH.hasClass(b)){AI[1]=AI[1]+AK.get(q);}else{AI[0]=AI[0]+AK.get(t);}AL.setXY(AI);}if(l.ie===6){if(!V){V=B.Node.create(B.Plugin.NodeMenuNav.SHIM_TEMPLATE);}Y=AL.query(H+U);if(!Y){Y=V.cloneNode();AL.appendChild(Y);}AL.setStyles({height:(AL.get(q)+AE),width:(AL.get(t)+AE)});}AL.previous().addClass(a);AL.removeClass(x);if(AJ._useARIA){R(AL,y,AB);}AJ._focusItem(AL.query(e));},_hideMenu:function(Y,AI){var AH=Y.previous();AH.removeClass(a);if(AI){this._focusItem(AH);}Y.queryAll((H+M)).removeClass(M);Y.setStyles({left:N,top:N});Y.addClass(x);R(Y,y,i);},_hideActiveItemMenu:function(){var AI=this,Y=AI._activeItem,AH;if(Y&&Y.hasClass(a)){AH=Y.next();if(AH){AI._hideMenu(AH,i);}}},_hideAllSubmenus:function(AI){var AH=this,Y=AI.queryAll(h);Y.each(B.bind(function(AJ){AH._hideMenu(AJ);},AH));},_cancelShowSubmenuTimer:function(){var AH=this,Y=AH._showSubmenuTimer;if(Y){Y.cancel();AH._showSubmenuTimer=k;}},_cancelHideSubmenuTimer:function(){var Y=this,AH=Y._hideSubmenuTimer;if(AH){AH.cancel();Y._hideSubmenuTimer=k;}},_focusNextItem:function(){var AI=this,Y=AI._activeItem,AK,AJ,AH;if(Y){AK=Y.hasClass(I)?Y:Y.get(P);AJ=d(AK);AH=AJ.query(e);if(AH){AI._focusItem(AH);}}},_focusPreviousItem:function(){var AI=this,AH=AI._activeItem,AK,AJ,Y;if(AH){AK=AH.hasClass(I)?AH:AH.get(P);AJ=J(AK);Y=AJ.query(e);if(Y){AI._focusItem(Y);}}},_onMenuMouseOver:function(AI,AH){var Y=this;Y._cancelHideSubmenuTimer();Y._activeMenu=AI;},_onMenuMouseOut:function(AN,AL){var AK=this,AI=AK._activeMenu,AM=AL.relatedTarget,Y=AK._activeItem,AJ,AH;if(AI&&!AI.contains(AM)){AJ=K(AI);if(AJ&&!AJ.contains(AM)){if(AK._mouseOutHideDelay>0){AK._cancelShowSubmenuTimer();AK._hideAllSubmenusTimer=c(AK._mouseOutHideDelay,AK,function(){var AO;AI=AK._activeMenu;AK._hideAllSubmenus(AK._rootMenu);if(AI){AO=AK._getTopmostSubmenu(AI);AK._focusItem(AO.previous());}});}}else{if(Y){AH=K(Y);if(!AK._isRoot(AH)){AK._focusItem(AH.previous());}}}}},_onMenuLabelMouseOver:function(AK,AN){var AM=this,AJ=AM._activeMenu,Y=AM._isRoot(AJ),AI=(AM._autoSubmenuDisplay&&Y||!Y),AL=AM._hideAllSubmenusTimer,AH;AM._focusItem(AK);AK.addClass(T);if(AI&&!AM._movingToSubmenu){if(AL){AL.cancel();AM._hideAllSubmenusTimer=k;}AM._cancelHideSubmenuTimer();AM._cancelShowSubmenuTimer();if(!AK.hasClass(a)){AH=AK.next();if(AH){AM._hideAllSubmenus(AJ);AM._showSubmenuTimer=c(AM._submenuShowDelay,AM,AM._showMenu,AH);}}}},_onMenuLabelMouseOut:function(AJ,AL){var AK=this,Y=AK._isRoot(AK._activeMenu),AI=(AK._autoSubmenuDisplay&&Y||!Y),AM=AL.relatedTarget,AH=AJ.next();
AJ.removeClass(T);if(AI){if(AK._movingToSubmenu&&!AK._showSubmenuTimer&&AH){AK._hideSubmenuTimer=c(AK._submenuHideDelay,AK,AK._hideMenu,AH);}else{if(!AK._movingToSubmenu&&AH&&!AH.contains(AM)&&AM!==AH){AK._cancelShowSubmenuTimer();AK._hideMenu(AH);}}}},_onMenuItemMouseOver:function(AJ,AL){var AK=this,AI=AK._activeMenu,Y=AK._isRoot(AI),AH=(AK._autoSubmenuDisplay&&Y||!Y);AJ.addClass(M);AK._focusItem(AJ);if(AH&&!AK._movingToSubmenu){AK._hideAllSubmenus(AI);}},_onMenuItemMouseOut:function(Y,AH){Y.removeClass(M);},_onVerticalMenuKeyDown:function(Y){var AH=this,AL=AH._activeMenu,AP=AH._rootMenu,AI=Y.target,AK=AB,AN,AJ,AM,AO;switch(Y.keyCode){case 37:AJ=K(AL);if(AJ&&AJ.hasClass(b)){AH._hideMenu(AL);AM=J(AL.get(P));AO=AM.query(C);if(AO){if(AO.hasClass(z)){AN=AO.next();if(AN){AH._showMenu(AN);}}else{AH._focusItem(AO);}}}else{if(!AH._isRoot(AL)){AH._hideMenu(AL,i);}}AK=i;break;case 38:AH._hideActiveItemMenu();AH._focusPreviousItem();AK=i;break;case 39:if(AI.hasClass(z)){AN=AI.next();if(AN){AH._showMenu(AN);}}else{if(AP.hasClass(b)){AN=AH._getTopmostSubmenu(AL);AM=d(AN.get(P));AO=AM.query(C);AH._hideAllSubmenus(AP);if(AO){if(AO.hasClass(z)){AN=AO.next();if(AN){AH._showMenu(AN);}}else{AH._focusItem(AO);}}}}AK=i;break;case 40:AH._hideActiveItemMenu();AH._focusNextItem();AK=i;break;}if(AK){Y.preventDefault();}},_onHorizontalMenuKeyDown:function(AK){var AJ=this,Y=AJ._activeItem,AI=AB,AH;switch(AK.keyCode){case 37:AJ._hideActiveItemMenu();AJ._focusPreviousItem();AI=i;break;case 39:AJ._hideActiveItemMenu();AJ._focusNextItem();AI=i;break;case 40:if(Y.hasClass(z)){AH=Y.next();if(AH){AJ._showMenu(AH);}AI=i;}break;}if(AI){AK.preventDefault();}},_onMouseMove:function(Y){this._currentMouseX=Y.pageX;},_onMouseOver:function(AK){var AJ=this,AH,Y,AM,AI,AL;if(AJ._blockMouseEvent){AJ._blockMouseEvent=AB;}else{AH=AK.target;Y=Z(AH);AM=m(AH);AL=w(AH);if(f(Y,AH)){AJ._onMenuMouseOver(Y,AK);Y[n]=i;Y[D]=AB;AI=K(Y);if(AI){AI[D]=i;AI[n]=AB;}}if(f(AM,AH)){AJ._onMenuLabelMouseOver(AM,AK);AM[n]=i;AM[D]=AB;}if(f(AL,AH)){AJ._onMenuItemMouseOver(AL,AK);AL[n]=i;AL[D]=AB;}}},_onMouseOut:function(AH){var AI=this,AK=AI._activeMenu,AP=AB,AJ,AL,AN,Y,AM,AO;AI._movingToSubmenu=(AK&&!AK.hasClass(b)&&((AH.pageX-5)>AI._currentMouseX));AJ=AH.target;AL=AH.relatedTarget;AN=Z(AJ);Y=m(AJ);AO=w(AJ);if(G(Y,AL)){AI._onMenuLabelMouseOut(Y,AH);Y[D]=i;Y[n]=AB;}if(G(AO,AL)){AI._onMenuItemMouseOut(AO,AH);AO[D]=i;AO[n]=AB;}if(Y){AM=Y.next();if(AM&&(AL===AM||AM.contains(AL))){AP=i;}}if(G(AN,AL)||AP){AI._onMenuMouseOut(AN,AH);AN[D]=i;AN[n]=AB;}},_toggleSubmenuDisplay:function(AI){var AJ=this,AK=AI.target,AH=m(AK),Y=AI.type,AO,AN,AM,AP,AQ,AL;if(AH){AO=o(AK);if(AO){AM=AO.getAttribute("href",2);AP=AM.indexOf("#");AQ=AM.length;if(AP===0&&AQ>1){AL=AM.substr(1,AQ);AN=AH.next();if(AN&&(AN.get(g)===AL)){if(Y===p||(Y===AF&&AI.keyCode===13)){if(l.webkit&&!AJ._hasFocus){AJ._hasFocus=i;}if(AH.hasClass(a)){AJ._hideMenu(AN);AJ._focusItem(AH);}else{AJ._hideAllSubmenus(AJ._rootMenu);AJ._showMenu(AN);}}if(Y===s){AI.preventDefault();}}}}}},_onKeyPress:function(Y){switch(Y.keyCode){case 37:case 38:case 39:case 40:Y.preventDefault();break;}},_onKeyDown:function(AJ){var AI=this,Y=AI._activeItem,AH=K(AJ.target);if(AH){AI._activeMenu=AH;if(AH.hasClass(b)){AI._onHorizontalMenuKeyDown(AJ);}else{AI._onVerticalMenuKeyDown(AJ);}if(AJ.keyCode===27){if(!AI._isRoot(AH)){AI._hideMenu(AH,i);AJ.stopPropagation();AI._blockMouseEvent=l.gecko?i:AB;}else{if(Y){AI._blurItem(Y);}}}}},_onDocMouseDown:function(AJ){var AI=this,AH=AI._rootMenu,Y=AJ.target;if(!AH.compareTo(Y)&&!AH.contains(Y)){AI._hideAllSubmenus(AH);if(l.webkit){AI._hasFocus=AB;}}},_onDocFocus:function(AM){var AL=this,AH=AL._useARIA,AN=AL._firstItem,Y=AL._activeItem,AJ=AM.target,AK,AI;AL._hasFocus=AL._rootMenu.contains(AJ);if(AL._hasFocus){if(AH){if(Y){AI=E(Y)?Y:Y.query(e);v(AI);}L(AJ);}AL._activeItem=w(AJ)||m(AJ);}else{if(AH&&AN){AK=E(AN)?AN:AN.query(e);L(AK);}AL._activeItem=k;}}};B.namespace("Plugin");B.Plugin.NodeMenuNav=S;B.Plugin.NodeMenuNav.NAME="nodeMenuNav";B.Plugin.NodeMenuNav.NS="nodeMenuNav";B.Plugin.NodeMenuNav.SHIM_TEMPLATE='<iframe role="presentation" class="'+U+'" title="Menu Stacking Shim" src="javascript:FALSE;"></iframe>';},"@VERSION@",{requires:["node","classnamemanager"]});},"@VERSION@",{requires:["node","classnamemanager"]});