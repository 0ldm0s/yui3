YUI.add("node-menunav",function(D){var n=D.UA,AO=D.Lang,u=D.later,AK=D.ClassNameManager.getClassName,j=true,AI=false,m=null,P="menu",G="menuitem",AF="hidden",AB="tabIndex",Q="parentNode",W="children",x="offsetHeight",AA="offsetWidth",AM="px",g="id",I=".",E="handledMouseOut",s="handledMouseOver",b="active",AJ="label",d="a",v="mousedown",AN="keydown",z="click",O="",U="first-of-type",l=AK(P),AE=AK(P,AF),a=AK(P,"horizontal"),AG=AK(P,AJ),i=AK(P,AJ,b),Z=AK(P,AJ,(P+"visible")),J=AK(G),A=AK(G,b),h=I+l;var K=function(Y){var AQ=Y.previous(),AP;if(!AQ){AP=Y.get(Q).get(W);AQ=AP.item(AP.size()-1);}return AQ;};var c=function(Y){var AQ=Y.next(),AP;if(!AQ){AP=Y.get(Q).get(W);AQ=AP.item(0);}return AQ;};var R=function(Y,AP){Y.setAttribute("role",AP);};var S=function(Y,AQ,AP){Y.setAttribute(("aria-"+AQ),AP);};var AH=function(Y){R(Y,"presentation");};var AC=function(Y){Y.set(AB,-1);};var M=function(Y){Y.set(AB,0);};var F=function(Y){var AP=AI;if(Y){AP=Y.get("nodeName").toLowerCase()===d;}return AP;};var N=function(Y){return Y.hasClass(J);};var t=function(Y){return Y.hasClass(AG);};var r=function(Y){return Y.hasClass(a);};var o=function(Y){return Y.hasClass(Z);};var q=function(Y){return F(Y)?Y:Y.query(d);};var y=function(AQ,AP,Y){var AR;if(AQ){if(AQ.hasClass(AP)){AR=AQ;}if(!AR&&Y){AR=AQ.ancestor((I+AP));}}return AR;};var L=function(Y){return Y.ancestor(h);};var X=function(AP,Y){return y(AP,l,Y);};var AD=function(AP,Y){var AQ;if(AP){AQ=y(AP,J,Y);}return AQ;};var p=function(AP,Y){var AQ;if(AP){if(Y){AQ=y(AP,AG,Y);}else{AQ=y(AP,AG)||AP.query((I+AG));}}return AQ;};var B=function(AP,Y){var AQ;if(AP){AQ=AD(AP,Y)||p(AP,Y);}return AQ;};var V=function(AR,AQ){var Y,AS,AP;if(AR){Y=N(AR)?AR:AR.get(Q);AS=AQ?K(Y):c(Y);AP=B(AS);}return AP;};var AL=function(Y){return V(Y,true);};var C=function(Y){return B(Y.query("li"));};var f=function(Y){return N(Y)?A:i;};var k=function(AQ){var AP=q(AQ);try{AP.blur();}catch(Y){}};var w=function(AQ){var AP=q(AQ);try{AP.focus();}catch(Y){}};var e=function(Y,AP){return Y&&!Y[s]&&(Y===AP||Y.contains(AP));};var H=function(AP,Y){return AP&&!AP[E]&&(AP!==Y&&!AP.contains(Y));};var T=function(AS){var AR=this,Ae=AS.owner,Aa,AX,Ab,Ac,AW,AT,Y,AZ,AY,AV,AQ,Ad,AU,AP;if(Ae){Ac=AS.useARIA;AW=AS.autoSubmenuDisplay;AT=AS.mouseOutHideDelay;AR._useARIA=AO.isBoolean(Ac)?Ac:((n.gecko&&n.gecko>=1.9)||(n.ie&&n.ie>=8));AR._autoSubmenuDisplay=AO.isBoolean(AW)?AW:j;AR._submenuShowDelay=AS.submenuShowDelay||250;AR._submenuHideDelay=AS.submenuHideDelay||250;AR._mouseOutHideDelay=AO.isNumber(AT)?AT:750;AV=Ae.queryAll(h);if(AV){AV.addClass(AE);}AP=Ae.queryAll("ul:"+U);if(AP){AP.addClass(U);}Ae.on("mouseover",AR._onMouseOver,AR);Ae.on("mouseout",AR._onMouseOut,AR);Ae.on("mousemove",AR._onMouseMove,AR);Ae.on(v,AR._toggleSubmenuDisplay,AR);Ae.on(AN,AR._toggleSubmenuDisplay,AR);Ae.on(z,AR._toggleSubmenuDisplay,AR);Ae.on("keypress",AR._onKeyPress,AR);Ae.on(AN,AR._onKeyDown,AR);Aa=Ae.get("ownerDocument");Aa.on(v,AR._onDocMouseDown,AR);D.on("focus",D.bind(AR._onDocFocus,AR),Aa);AR._rootMenu=Ae;if(AR._useARIA){R(Ae,"menubar");AY=Ae.queryAll("ul,li");if(AY){AY.each(function(Af){AH(Af);});}AQ=Ae.queryAll((I+AK(G,"content")));if(AQ){AQ.each(function(Af){AC(Af);R(Af,G);});}Ad=Ae.queryAll((I+AG));if(Ad){Ad.each(function(Af){Y=Af;AZ=Af.query((I+AK(P,"toggle")));if(AZ){AH(AZ);AC(AZ);Y=AZ.previous();}R(Y,G);S(Y,"haspopup",j);AC(Y);Ab=Y.get(g);if(!Ab){Ab=D.guid();Y.set(g,Ab);}AX=Af.next();R(AX,P);S(AX,"labelledby",Ab);S(AX,AF,j);});}AU=C(Ae);if(AU){M(q(AU));AR._firstItem=AU;}}}};T.NAME="nodeMenuNav";T.NS="nodeMenuNav";T.SHIM_TEMPLATE='<iframe frameborder="0" role="presentation" class="'+AK("shim")+'" title="Menu Stacking Shim" src="javascript:false;"></iframe>';T.prototype={_rootMenu:m,_activeItem:m,_activeMenu:m,_hasFocus:AI,_blockMouseEvent:AI,_currentMouseX:0,_movingToSubmenu:AI,_showSubmenuTimer:m,_hideSubmenuTimer:m,_hideAllSubmenusTimer:m,_firstItem:m,_autoSubmenuDisplay:j,_isRoot:function(Y){return this._rootMenu.compareTo(Y);},_getTopmostSubmenu:function(AR){var AQ=this,Y=L(AR),AP;if(!Y){AP=AR;}else{if(AQ._isRoot(Y)){AP=AR;}else{AP=AQ._getTopmostSubmenu(Y);}}return AP;},_clearActiveItem:function(){var AP=this,Y=AP._activeItem;if(Y){Y.removeClass(f(Y));if(AP._useARIA){AC(q(Y));}}AP._activeItem=m;},_setActiveItem:function(AP){var Y=this;Y._clearActiveItem();AP.addClass(f(AP));if(Y._useARIA){M(q(AP));}Y._activeItem=AP;},_focusItem:function(Y){if(this._hasFocus){u(0,null,w,Y);}},_showMenu:function(AU){var AR=this,AP=L(AU),AS=AU.get(Q),AQ=AS.getXY(),Y,AT;if(r(AP)){AQ[1]=AQ[1]+AS.get(x);}else{AQ[0]=AQ[0]+AS.get(AA);}AU.setXY(AQ);if(n.ie<8){if(n.ie===6&&!AU.iframeShim){AU.appendChild(D.Node.create(T.SHIM_TEMPLATE));AU.iframeShim=Y;}AU.setStyles({height:O,width:O});AU.setStyles({height:(AU.get(x)+AM),width:(AU.get(AA)+AM)});}AU.previous().addClass(Z);AU.removeClass(AE);if(AR._useARIA){S(AU,AF,AI);}AT=C(AU);AR._focusItem(AT);},_hideMenu:function(AR,AP){var AQ=this,AS=AR.previous(),Y;AS.removeClass(Z);if(AP){AQ._setActiveItem(AS);AQ._focusItem(AS);}Y=AR.query((I+A));if(Y){Y.removeClass(A);}AR.setStyles({left:O,top:O});AR.addClass(AE);S(AR,AF,j);},_hideAllSubmenus:function(AQ){var AP=this,Y=AQ.queryAll(h);if(Y){Y.each(D.bind(function(AR){AP._hideMenu(AR);},AP));}},_cancelShowSubmenuTimer:function(){var AP=this,Y=AP._showSubmenuTimer;if(Y){Y.cancel();AP._showSubmenuTimer=m;}},_cancelHideSubmenuTimer:function(){var Y=this,AP=Y._hideSubmenuTimer;if(AP){AP.cancel();Y._hideSubmenuTimer=m;}},_onMenuMouseOver:function(AR,AQ){var AP=this,Y=AP._hideAllSubmenusTimer;if(Y){Y.cancel();AP._hideAllSubmenusTimer=m;}AP._cancelHideSubmenuTimer();AP._activeMenu=AR;if(AP._movingToSubmenu&&r(AR)){AP._movingToSubmenu=AI;}},_onMenuMouseOut:function(AV,AT){var AS=this,AQ=AS._activeMenu,AU=AT.relatedTarget,Y=AS._activeItem,AR,AP;if(AQ&&!AQ.contains(AU)){AR=L(AQ);if(AR&&!AR.contains(AU)){if(AS._mouseOutHideDelay>0){AS._cancelShowSubmenuTimer();AS._hideAllSubmenusTimer=u(AS._mouseOutHideDelay,AS,function(){var AW;AQ=AS._activeMenu;AS._hideAllSubmenus(AS._rootMenu);if(AQ){AW=AS._getTopmostSubmenu(AQ);
AS._focusItem(AW.previous());}});}}else{if(Y){AP=L(Y);if(!AS._isRoot(AP)){AS._focusItem(AP.previous());}}}}},_onMenuLabelMouseOver:function(AS,AU){var AT=this,AR=AT._activeMenu,Y=AT._isRoot(AR),AQ=(AT._autoSubmenuDisplay&&Y||!Y),AP;AT._setActiveItem(AS);AT._focusItem(AS);if(AQ&&!AT._movingToSubmenu){AT._cancelHideSubmenuTimer();AT._cancelShowSubmenuTimer();if(!o(AS)){AP=AS.next();if(AP){AT._hideAllSubmenus(AR);AT._showSubmenuTimer=u(AT._submenuShowDelay,AT,AT._showMenu,AP);}}}},_onMenuLabelMouseOut:function(AR,AT){var AS=this,Y=AS._isRoot(AS._activeMenu),AQ=(AS._autoSubmenuDisplay&&Y||!Y),AU=AT.relatedTarget,AP=AR.next();AS._clearActiveItem();if(AQ){if(AS._movingToSubmenu&&!AS._showSubmenuTimer&&AP){AS._hideSubmenuTimer=u(AS._submenuHideDelay,AS,AS._hideMenu,AP);}else{if(!AS._movingToSubmenu&&AP&&!AP.contains(AU)&&AU!==AP){AS._cancelShowSubmenuTimer();AS._hideMenu(AP);}}}},_onMenuItemMouseOver:function(AR,AT){var AS=this,AQ=AS._activeMenu,Y=AS._isRoot(AQ),AP=(AS._autoSubmenuDisplay&&Y||!Y);AS._setActiveItem(AR);AS._focusItem(AR);if(AP&&!AS._movingToSubmenu){AS._hideAllSubmenus(AQ);}},_onMenuItemMouseOut:function(Y,AP){this._clearActiveItem();},_onVerticalMenuKeyDown:function(Y){var AP=this,AU=AP._activeMenu,Aa=AP._rootMenu,AQ=Y.target,AS=B(AQ,j),AT=AI,AY=Y.keyCode,AW,AR,AV,AZ,AX;switch(AY){case 37:AR=L(AU);if(AR&&r(AR)){AP._hideMenu(AU);AV=K(AU.get(Q));AX=B(AV);if(AX){if(t(AX)){AW=AX.next();if(AW){AP._showMenu(AW);AP._setActiveItem(C(AW));}}else{AP._setActiveItem(AX);w(AX);}}}else{if(!AP._isRoot(AU)){AP._hideMenu(AU,j);}}AT=j;break;case 39:if(t(AQ)){AW=AQ.next();if(AW){AP._showMenu(AW);AP._setActiveItem(C(AW));}}else{if(r(Aa)){AW=AP._getTopmostSubmenu(AU);AV=c(AW.get(Q));AX=B(AV);AP._hideAllSubmenus(Aa);if(AX){if(t(AX)){AW=AX.next();if(AW){AP._showMenu(AW);AP._setActiveItem(C(AW));}}else{AP._setActiveItem(AX);w(AX);}}}}AT=j;break;case 38:case 40:AP._hideAllSubmenus(AU);AZ=AY===38?AL(AS):V(AS);AP._setActiveItem(AZ);w(AZ);AT=j;break;}if(AT){Y.preventDefault();}},_onHorizontalMenuKeyDown:function(Y){var AP=this,AT=AP._activeMenu,AQ=Y.target,AR=B(AQ,j),AS=AI,AV=Y.keyCode,AW,AU;switch(AV){case 37:case 39:AP._hideAllSubmenus(AT);AW=AV===37?AL(AR):V(AR);AP._setActiveItem(AW);w(AW);AS=j;break;case 40:AP._hideAllSubmenus(AT);if(t(AR)){AU=AR.next();if(AU){AP._showMenu(AU);AP._setActiveItem(C(AU));}AS=j;}break;}if(AS){Y.preventDefault();}},_onMouseMove:function(AP){var Y=this;u(10,Y,function(){Y._currentMouseX=AP.pageX;});},_onMouseOver:function(AS){var AR=this,AP,Y,AU,AQ,AT;if(AR._blockMouseEvent){AR._blockMouseEvent=AI;}else{AP=AS.target;Y=X(AP,j);AU=p(AP,j);AT=AD(AP,j);if(e(Y,AP)){AR._onMenuMouseOver(Y,AS);Y[s]=j;Y[E]=AI;AQ=L(Y);if(AQ){AQ[E]=j;AQ[s]=AI;}}if(e(AU,AP)){AR._onMenuLabelMouseOver(AU,AS);AU[s]=j;AU[E]=AI;}if(e(AT,AP)){AR._onMenuItemMouseOver(AT,AS);AT[s]=j;AT[E]=AI;}}},_onMouseOut:function(AP){var AQ=this,AS=AQ._activeMenu,AX=AI,AR,AT,AV,Y,AU,AW;AQ._movingToSubmenu=(AS&&!r(AS)&&((AP.pageX-5)>AQ._currentMouseX));AR=AP.target;AT=AP.relatedTarget;AV=X(AR,j);Y=p(AR,j);AW=AD(AR,j);if(H(Y,AT)){AQ._onMenuLabelMouseOut(Y,AP);Y[E]=j;Y[s]=AI;}if(H(AW,AT)){AQ._onMenuItemMouseOut(AW,AP);AW[E]=j;AW[s]=AI;}if(Y){AU=Y.next();if(AU&&(AT===AU||AU.contains(AT))){AX=j;}}if(H(AV,AT)||AX){AQ._onMenuMouseOut(AV,AP);AV[E]=j;AV[s]=AI;}},_toggleSubmenuDisplay:function(AQ){var AR=this,AS=AQ.target,AP=p(AS,j),Y=AQ.type,AW,AV,AU,AX,AY,AT;if(AP){AW=F(AS)?AS:AS.ancestor(F);if(AW){AU=AW.getAttribute("href",2);AX=AU.indexOf("#");AY=AU.length;if(AX===0&&AY>1){AT=AU.substr(1,AY);AV=AP.next();if(AV&&(AV.get(g)===AT)){if(Y===v||(Y===AN&&AQ.keyCode===13)){if(n.webkit&&!AR._hasFocus){AR._hasFocus=j;}if(o(AP)){AR._hideMenu(AV);w(AP);}else{AR._hideAllSubmenus(AR._rootMenu);AR._showMenu(AV);}}if(Y===z){AQ.preventDefault();}}}}}},_onKeyPress:function(Y){switch(Y.keyCode){case 37:case 38:case 39:case 40:Y.preventDefault();break;}},_onKeyDown:function(AS){var AR=this,Y=AR._activeItem,AP=AS.target,AQ=L(AP);if(AQ){AR._activeMenu=AQ;if(r(AQ)){AR._onHorizontalMenuKeyDown(AS);}else{AR._onVerticalMenuKeyDown(AS);}if(AS.keyCode===27){if(!AR._isRoot(AQ)){AR._hideMenu(AQ,j);AS.stopPropagation();AR._blockMouseEvent=n.gecko?j:AI;}else{if(Y){k(AP);AR._clearActiveItem();}}}}},_onDocMouseDown:function(AR){var AQ=this,AP=AQ._rootMenu,Y=AR.target;if(!AP.compareTo(Y)&&!AP.contains(Y)){AQ._hideAllSubmenus(AP);if(n.webkit){AQ._hasFocus=AI;AQ._clearActiveItem();}}},_onDocFocus:function(AS){var AR=this,AP=AR._useARIA,AT=AR._firstItem,Y=AR._activeItem,AQ=AS.target;if(AR._rootMenu.contains(AQ)){if(!AR._hasFocus){AR._hasFocus=j;Y=B(AQ,j);if(Y){AR._setActiveItem(Y);}}}else{AR._clearActiveItem();AR._hasFocus=AI;if(AT&&AP){M(q(AT));}}}};D.namespace("Plugin");D.Plugin.NodeMenuNav=T;},"@VERSION@",{requires:["node","classnamemanager"]});