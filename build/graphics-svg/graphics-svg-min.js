YUI.add("graphics-svg",function(c,q){var j="svgShape",b=/[a-z][^a-z]*/ig,k=/[-]?[0-9]*[0-9|\.][0-9]*/g,d=c.Lang,h=c.AttributeLite,e,o,g,i,n,f,l,p=c.config.doc,m=c.ClassNameManager.getClassName;function a(){}a.prototype={_pathSymbolToMethod:{M:"moveTo",L:"lineTo",C:"curveTo",c:"relativeCurveTo",Q:"quadraticCurveTo",z:"closePath",Z:"closePath"},_currentX:0,_currentY:0,_type:"path",_coordSpaceMultiplier:100,_round:function(r){r=Math.round(r*100)/100;return r;},curveTo:function(){this._curveTo.apply(this,[c.Array(arguments),false]);},relativeCurveTo:function(){this._curveTo.apply(this,[c.Array(arguments),true]);},_curveTo:function(F,t){var H,A,J,I,u,r,G,z=0,C,s,E,v=t?"c":"C",D=t?parseFloat(this._currentX):0,B=t?parseFloat(this._currentY):0;this._pathArray=this._pathArray||[];if(this._pathType!==v){this._pathType=v;E=[v];this._pathArray.push(E);}else{E=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!E){E=[];this._pathArray.push(E);}}s=this._pathArray.length-1;this._pathArray[s]=this._pathArray[s].concat(F);C=F.length-5;for(;z<C;z=z+6){cp1x=F[z]+t;cp1y=F[z+1]+t;cp2x=F[z+2]+t;cp2y=F[z+3]+t;x=parseFloat(F[z+4])+D;y=parseFloat(F[z+5])+B;I=Math.max(x,Math.max(cp1x,cp2x));r=Math.max(y,Math.max(cp1y,cp2y));u=Math.min(x,Math.min(cp1x,cp2x));G=Math.min(y,Math.min(cp1y,cp2y));H=Math.abs(I-u);A=Math.abs(r-G);J=[[this._currentX,this._currentY],[cp1x,cp1y],[cp2x,cp2y],[x,y]];this._setCurveBoundingBox(J,H,A);this._currentX=x;this._currentY=y;}},quadraticCurveTo:function(v,u,D,C){var s,A,E,z,G,F,t,r,B;if(this._pathType!=="Q"){this._pathType="Q";A=["Q"];this._pathArray.push(A);}else{A=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!A){A=[];this._pathArray.push(A);}}s=this._pathArray.length-1;this._pathArray[s]=this._pathArray[s].concat([Math.round(v),Math.round(u),Math.round(D),Math.round(C)]);F=Math.max(D,v);r=Math.max(C,u);t=Math.min(D,v);B=Math.min(C,u);E=Math.abs(F-t);z=Math.abs(r-B);G=[[this._currentX,this._currentY],[v,u],[D,C]];this._setCurveBoundingBox(G,E,z);this._currentX=D;this._currentY=C;},drawRect:function(r,u,s,t){this.moveTo(r,u);this.lineTo(r+s,u);this.lineTo(r+s,u+t);this.lineTo(r,u+t);this.lineTo(r,u);},drawRoundRect:function(r,z,s,u,t,v){this.moveTo(r,z+v);this.lineTo(r,z+u-v);this.quadraticCurveTo(r,z+u,r+t,z+u);this.lineTo(r+s-t,z+u);this.quadraticCurveTo(r+s,z+u,r+s,z+u-v);this.lineTo(r+s,z+v);this.quadraticCurveTo(r+s,z,r+s-t,z);this.lineTo(r+t,z);this.quadraticCurveTo(r,z,r,z+v);},drawCircle:function(s,u,r){var t=r*2;this._drawingComplete=false;this._trackSize(s,u);this._trackSize(s+t,u+t);this._pathArray=this._pathArray||[];this._pathArray.push(["M",s+r,u]);this._pathArray.push(["A",r,r,0,1,0,s+r,u+t]);this._pathArray.push(["A",r,r,0,1,0,s+r,u]);this._currentX=s;this._currentY=u;return this;},drawEllipse:function(t,z,u,v){var s=u*0.5,r=v*0.5;this._drawingComplete=false;this._trackSize(t,z);this._trackSize(t+u,z+v);this._pathArray=this._pathArray||[];this._pathArray.push(["M",t+s,z]);this._pathArray.push(["A",s,r,0,1,0,t+s,z+v]);this._pathArray.push(["A",s,r,0,1,0,t+s,z]);this._currentX=t;this._currentY=z;return this;},drawDiamond:function(s,w,v,r){var u=v*0.5,t=r*0.5;this.moveTo(s+u,w);this.lineTo(s+v,w+t);this.lineTo(s+u,w+r);this.lineTo(s,w+t);this.lineTo(s+u,w);return this;},drawWedge:function(E,B,J,A,u,v){var I,H,z,N,w,F,D,M,L,t,s,K=0,C=u*2,r,G;v=v||u;if(this._pathType!="M"){this._pathType="M";r=["M"];this._pathArray.push(r);}else{r=this._getCurrentArray();}G=this._pathArray.length-1;this._pathArray[G].push(E);this._pathArray[G].push(E);if(Math.abs(A)>360){A=360;}I=Math.ceil(Math.abs(A)/45);H=A/I;z=-(H/180)*Math.PI;N=(J/180)*Math.PI;if(I>0){F=E+Math.cos(J/180*Math.PI)*u;D=B+Math.sin(J/180*Math.PI)*v;this._pathType="L";G++;this._pathArray[G]=["L"];this._pathArray[G].push(Math.round(F));this._pathArray[G].push(Math.round(D));G++;this._pathType="Q";this._pathArray[G]=["Q"];for(;K<I;++K){N+=z;w=N-(z/2);M=E+Math.cos(N)*u;L=B+Math.sin(N)*v;t=E+Math.cos(w)*(u/Math.cos(z/2));s=B+Math.sin(w)*(v/Math.cos(z/2));this._pathArray[G].push(Math.round(t));this._pathArray[G].push(Math.round(s));this._pathArray[G].push(Math.round(M));this._pathArray[G].push(Math.round(L));}}this._currentX=E;this._currentY=B;this._trackSize(C,C);return this;},lineTo:function(B,z,s){var w=arguments,t,u,r,v,C,A;this._pathArray=this._pathArray||[];this._shapeType="path";u=w.length;if(this._pathType!=="L"){this._pathType="L";v=["L"];this._pathArray.push(v);}else{v=this._getCurrentArray();}r=this._pathArray.length-1;if(typeof B==="string"||typeof B==="number"){for(t=0;t<u;t=t+2){C=w[t];A=w[t+1];this._pathArray[r].push(C);this._pathArray[r].push(A);this._currentX=C;this._currentY=A;this._trackSize.apply(this,[C,A]);}}else{for(t=0;t<u;++t){this._pathArray[r].push(w[t][0]);this._pathArray[r].push(w[t][1]);this._currentX=w[t][0];this._currentY=w[t][1];this._trackSize.apply(this,w[t]);}}},moveTo:function(r,u){var t,s;this._pathArray=this._pathArray||[];this._pathType="M";s=["M"];this._pathArray.push(s);t=this._pathArray.length-1;this._pathArray[t]=this._pathArray[t].concat([this._round(r),this._round(u)]);this._currentX=r;this._currentY=u;this._trackSize(r,u);},end:function(){this._closePath();this._graphic.addToRedrawQueue(this);},clear:function(){this._currentX=0;this._currentY=0;this._width=0;this._height=0;this._left=0;this._right=0;this._top=0;this._bottom=0;this._pathArray=[];this._path="";},_closePath:function(){var s,w,r,B,t,A,z,E="",v=this.node,u=this._round(this._left),C=this._round(this._top),D=this.get("fill");if(this._pathArray){s=this._pathArray.concat();while(s&&s.length>0){w=s.shift();B=w.length;r=w[0];if(r==="A"||r=="c"||r=="C"){E+=r+w[1]+","+w[2];}else{if(r!="z"){E+=" "+r+this._round(w[1]-u);}else{E+=" z ";}}switch(r){case"L":case"M":case"Q":case"l":for(z=2;z<B;++z){t=(z%2===0)?C:u;t=w[z]-t;E+=", "+this._round(t);}break;case"A":t=" "+this._round(w[3])+" "+this._round(w[4]);t+=","+this._round(w[5])+" "+this._round(w[6]-u);t+=","+this._round(w[7]-C);E+=" "+t;break;case"C":case"c":for(z=3;z<B-1;
z=z+2){t=this._round(w[z]-u);t=t+", ";t=t+this._round(w[z+1]-C);E+=" "+t;}break;}}if(D&&D.color){E+="z";}c.Lang.trim(E);if(E){v.setAttribute("d",E);}this._path=E;this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();}},closePath:function(){this._pathArray.push(["z"]);},_getCurrentArray:function(){var r=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!r){r=[];this._pathArray.push(r);}return r;},getBezierData:function(w,v){var z=w.length,u=[],s,r;for(s=0;s<z;++s){u[s]=[w[s][0],w[s][1]];}for(r=1;r<z;++r){for(s=0;s<z-r;++s){u[s][0]=(1-v)*u[s][0]+v*u[parseInt(s+1,10)][0];u[s][1]=(1-v)*u[s][1]+v*u[parseInt(s+1,10)][1];}}return[u[0][0],u[0][1]];},_setCurveBoundingBox:function(F,B,v){var u=0,s=this._currentX,C=s,A=this._currentY,r=A,z=Math.round(Math.sqrt((B*B)+(v*v))),D=1/z,E;for(;u<z;++u){E=this.getBezierData(F,D*u);s=isNaN(s)?E[0]:Math.min(E[0],s);C=isNaN(C)?E[0]:Math.max(E[0],C);A=isNaN(A)?E[1]:Math.min(E[1],A);r=isNaN(r)?E[1]:Math.max(E[1],r);}s=Math.round(s*10)/10;C=Math.round(C*10)/10;A=Math.round(A*10)/10;r=Math.round(r*10)/10;this._trackSize(C,r);this._trackSize(s,A);},_trackSize:function(r,s){if(r>this._right){this._right=r;}if(r<this._left){this._left=r;}if(s<this._top){this._top=s;}if(s>this._bottom){this._bottom=s;}this._width=this._right-this._left;this._height=this._bottom-this._top;}};c.SVGDrawing=a;o=function(r){this._transforms=[];this.matrix=new c.Matrix();this._normalizedMatrix=new c.Matrix();o.superclass.constructor.apply(this,arguments);};o.NAME="svgShape";c.extend(o,c.GraphicBase,c.mix({_x:0,_y:0,init:function(){this.initializer.apply(this,arguments);},initializer:function(r){var s=this,u=r.graphic,t=this.get("data");s.createNode();if(u){s._setGraphic(u);}if(t){s._parsePathData(t);}s._updateHandler();},_setGraphic:function(r){var s;if(r instanceof c.SVGGraphic){this._graphic=r;}else{r=c.one(r);s=new c.SVGGraphic({render:r});s._appendShape(this);this._graphic=s;}},addClass:function(r){var s=this.node;s.className.baseVal=d.trim([s.className.baseVal,r].join(" "));},removeClass:function(r){var s=this.node,t=s.className.baseVal;t=t.replace(new RegExp(r+" "),r).replace(new RegExp(r),"");s.className.baseVal=t;},getXY:function(){var u=this._graphic,s=u.getXY(),r=this._x,t=this._y;return[s[0]+r,s[1]+t];},setXY:function(s){var t=this._graphic,r=t.getXY();this._x=s[0]-r[0];this._y=s[1]-r[1];this.set("transform",this.get("transform"));},contains:function(r){return r===c.one(this.node);},compareTo:function(r){var s=this.node;return s===r;},test:function(r){return c.Selector.test(this.node,r);},_getDefaultFill:function(){return{type:"solid",opacity:1,cx:0.5,cy:0.5,fx:0.5,fy:0.5,r:0.5};},_getDefaultStroke:function(){return{weight:1,dashstyle:"none",color:"#000",opacity:1};},createNode:function(){var r=p.createElementNS("http://www.w3.org/2000/svg","svg:"+this._type),t=this.get("id"),s=this.get("pointerEvents");this.node=r;this.addClass(m(j)+" "+m(this.name));if(t){r.setAttribute("id",t);}if(s){r.setAttribute("pointer-events",s);}if(!this.get("visible")){c.one(r).setStyle("visibility","hidden");}},on:function(s,r){if(c.Node.DOM_EVENTS[s]){return c.one("#"+this.get("id")).on(s,r);}return c.on.apply(this,arguments);},_strokeChangeHandler:function(w){var u=this.node,v=this.get("stroke"),t,r,z,s;if(v&&v.weight&&v.weight>0){s=v.linejoin||"round";t=parseFloat(v.opacity);r=v.dashstyle||"none";z=d.isArray(r)?r.toString():r;v.color=v.color||"#000000";v.weight=v.weight||1;v.opacity=d.isNumber(t)?t:1;v.linecap=v.linecap||"butt";u.setAttribute("stroke-dasharray",z);u.setAttribute("stroke",v.color);u.setAttribute("stroke-linecap",v.linecap);u.setAttribute("stroke-width",v.weight);u.setAttribute("stroke-opacity",v.opacity);if(s=="round"||s=="bevel"){u.setAttribute("stroke-linejoin",s);}else{s=parseInt(s,10);if(d.isNumber(s)){u.setAttribute("stroke-miterlimit",Math.max(s,1));u.setAttribute("stroke-linejoin","miter");}}}else{u.setAttribute("stroke","none");}},_fillChangeHandler:function(v){var t=this.node,u=this.get("fill"),r,s;if(u){s=u.type;if(s=="linear"||s=="radial"){this._setGradientFill(u);t.setAttribute("fill","url(#grad"+this.get("id")+")");}else{if(!u.color){t.setAttribute("fill","none");}else{r=parseFloat(u.opacity);r=d.isNumber(r)?r:1;t.setAttribute("fill",u.color);t.setAttribute("fill-opacity",r);}}}else{t.setAttribute("fill","none");}},_setGradientFill:function(T){var F,C,R,N,u,K=d.isNumber,J=this._graphic,D=T.type,Q=J.getGradientNode("grad"+this.get("id"),D),G=T.stops,H=this.get("width"),X=this.get("height"),P=T.rotation||0,E=Math.PI/180,M=parseFloat(parseFloat(Math.tan(P*E)).toFixed(8)),U,W,I,O,Y="0%",V="100%",A="0%",t="0%",z=T.cx,s=T.cy,B=T.fx,v=T.fy,L=T.r,S=[];if(D=="linear"){z=H/2;s=X/2;if(Math.abs(M)*H/2>=X/2){if(P<180){A=0;t=X;}else{A=X;t=0;}Y=z-((s-A)/M);V=z-((s-t)/M);}else{if(P>90&&P<270){Y=H;V=0;}else{Y=0;V=H;}A=((M*(z-Y))-s)*-1;t=((M*(z-V))-s)*-1;}Y=Math.round(100*Y/H);V=Math.round(100*V/H);A=Math.round(100*A/X);t=Math.round(100*t/X);Y=K(Y)?Y:0;V=K(V)?V:100;A=K(A)?A:0;t=K(t)?t:0;Q.setAttribute("spreadMethod","pad");Q.setAttribute("width",H);Q.setAttribute("height",X);Q.setAttribute("x1",Y+"%");Q.setAttribute("x2",V+"%");Q.setAttribute("y1",A+"%");Q.setAttribute("y2",t+"%");}else{Q.setAttribute("cx",(z*100)+"%");Q.setAttribute("cy",(s*100)+"%");Q.setAttribute("fx",(B*100)+"%");Q.setAttribute("fy",(v*100)+"%");Q.setAttribute("r",(L*100)+"%");}W=G.length;I=0;for(U=0;U<W;++U){if(this._stops&&this._stops.length>0){N=this._stops.shift();u=false;}else{N=J._createGraphicNode("stop");u=true;}O=G[U];C=O.opacity;R=O.color;F=O.offset||U/(W-1);F=Math.round(F*100)+"%";C=K(C)?C:1;C=Math.max(0,Math.min(1,C));I=(U+1)/W;N.setAttribute("offset",F);N.setAttribute("stop-color",R);N.setAttribute("stop-opacity",C);if(u){Q.appendChild(N);}S.push(N);}while(this._stops&&this._stops.length>0){Q.removeChild(this._stops.shift());}this._stops=S;},_stops:null,set:function(){var r=this;h.prototype.set.apply(r,arguments);if(r.initialized){r._updateHandler();}},translate:function(r,s){this._addTransform("translate",arguments);
},translateX:function(r){this._addTransform("translateX",arguments);},translateY:function(r){this._addTransform("translateY",arguments);},skew:function(r,s){this._addTransform("skew",arguments);},skewX:function(r){this._addTransform("skewX",arguments);},skewY:function(r){this._addTransform("skewY",arguments);},rotate:function(r){this._addTransform("rotate",arguments);},scale:function(r,s){this._addTransform("scale",arguments);},_addTransform:function(s,r){r=c.Array(r);this._transform=d.trim(this._transform+" "+s+"("+r.join(", ")+")");r.unshift(s);this._transforms.push(r);if(this.initialized){this._updateTransform();}},_updateTransform:function(){var B=this._type=="path",t=this.node,F,s,v,E,C,z,u,D=this.matrix,r=this._normalizedMatrix,w=0,A=this._transforms.length;if(B||(this._transforms&&this._transforms.length>0)){E=this._x;C=this._y;v=this.get("transformOrigin");z=E+(v[0]*this.get("width"));u=C+(v[1]*this.get("height"));if(B){if(!(this instanceof c.SVGPath)){z=this._left+(v[0]*this.get("width"));u=this._top+(v[1]*this.get("height"));}r.init({dx:E+this._left,dy:C+this._top});}r.translate(z,u);for(;w<A;++w){F=this._transforms[w].shift();if(F){r[F].apply(r,this._transforms[w]);D[F].apply(D,this._transforms[w]);}if(B){this._transforms[w].unshift(F);}}r.translate(-z,-u);s="matrix("+r.a+","+r.b+","+r.c+","+r.d+","+r.dx+","+r.dy+")";}this._graphic.addToRedrawQueue(this);if(s){t.setAttribute("transform",s);}if(!B){this._transforms=[];}},_draw:function(){var r=this.node;r.setAttribute("width",this.get("width"));r.setAttribute("height",this.get("height"));r.setAttribute("x",this._x);r.setAttribute("y",this._y);r.style.left=this._x+"px";r.style.top=this._y+"px";this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();},_updateHandler:function(r){this._draw();},_transform:"",getBounds:function(){var v=this._type,z=this.get("stroke"),t=this.get("width"),u=this.get("height"),s=v=="path"?0:this._x,A=v=="path"?0:this._y,r=0;if(v!="path"){if(z&&z.weight){r=z.weight;}t=(s+t+r)-(s-r);u=(A+u+r)-(A-r);s-=r;A-=r;}return this._normalizedMatrix.getContentRect(t,u,s,A);},toFront:function(){var r=this.get("graphic");if(r){r._toFront(this);}},toBack:function(){var r=this.get("graphic");if(r){r._toBack(this);}},_parsePathData:function(t){var r,v,z,B=c.Lang.trim(t.match(b)),u=0,w,A,s=this._pathSymbolToMethod;if(B){this.clear();w=B.length||0;for(;u<w;u=u+1){A=B[u];v=A.substr(0,1),z=A.substr(1).match(k);r=s[v];if(r){this[r].apply(this,z);}}this.end();}},destroy:function(){var r=this.get("graphic");if(r){r.removeShape(this);}else{this._destroy();}},_destroy:function(){if(this.node){c.Event.purgeElement(this.node,true);if(this.node.parentNode){this.node.parentNode.removeChild(this.node);}this.node=null;}}},c.SVGDrawing.prototype));o.ATTRS={transformOrigin:{valueFn:function(){return[0.5,0.5];}},transform:{setter:function(r){this.matrix.init();this._normalizedMatrix.init();this._transforms=this.matrix.getTransformArray(r);this._transform=r;return r;},getter:function(){return this._transform;}},id:{valueFn:function(){return c.guid();},setter:function(s){var r=this.node;if(r){r.setAttribute("id",s);}return s;}},x:{getter:function(){return this._x;},setter:function(s){var r=this.get("transform");this._x=s;if(r){this.set("transform",r);}}},y:{getter:function(){return this._y;},setter:function(s){var r=this.get("transform");this._y=s;if(r){this.set("transform",r);}}},width:{value:0},height:{value:0},visible:{value:true,setter:function(s){var r=s?"visible":"hidden";if(this.node){this.node.style.visibility=r;}return s;}},fill:{valueFn:"_getDefaultFill",setter:function(t){var s,r=this.get("fill")||this._getDefaultFill();s=(t)?c.merge(r,t):null;if(s&&s.color){if(s.color===undefined||s.color=="none"){s.color=null;}}return s;}},stroke:{valueFn:"_getDefaultStroke",setter:function(t){var s=this.get("stroke")||this._getDefaultStroke(),r;if(t&&t.hasOwnProperty("weight")){r=parseInt(t.weight,10);if(!isNaN(r)){t.weight=r;}}return(t)?c.merge(s,t):null;}},pointerEvents:{valueFn:function(){var s="visiblePainted",r=this.node;if(r){r.setAttribute("pointer-events",s);}return s;},setter:function(s){var r=this.node;if(r){r.setAttribute("pointer-events",s);}return s;}},node:{readOnly:true,getter:function(){return this.node;}},data:{setter:function(r){if(this.get("node")){this._parsePathData(r);}return r;}},graphic:{readOnly:true,getter:function(){return this._graphic;}}};c.SVGShape=o;n=function(r){n.superclass.constructor.apply(this,arguments);};n.NAME="svgPath";c.extend(n,c.SVGShape,{_left:0,_right:0,_top:0,_bottom:0,_type:"path",_path:""});n.ATTRS=c.merge(c.SVGShape.ATTRS,{path:{readOnly:true,getter:function(){return this._path;}},width:{getter:function(){var r=Math.max(this._right-this._left,0);return r;}},height:{getter:function(){return Math.max(this._bottom-this._top,0);}}});c.SVGPath=n;i=function(){i.superclass.constructor.apply(this,arguments);};i.NAME="svgRect";c.extend(i,c.SVGShape,{_type:"rect"});i.ATTRS=c.SVGShape.ATTRS;c.SVGRect=i;f=function(r){f.superclass.constructor.apply(this,arguments);};f.NAME="svgEllipse";c.extend(f,o,{_type:"ellipse",_draw:function(){var r=this.node,C=this.get("width"),u=this.get("height"),B=this.get("x"),z=this.get("y"),A=C*0.5,v=u*0.5,t=B+A,s=z+v;r.setAttribute("rx",A);r.setAttribute("ry",v);r.setAttribute("cx",t);r.setAttribute("cy",s);this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();}});f.ATTRS=c.merge(o.ATTRS,{xRadius:{setter:function(r){this.set("width",r*2);},getter:function(){var r=this.get("width");if(r){r*=0.5;}return r;}},yRadius:{setter:function(r){this.set("height",r*2);},getter:function(){var r=this.get("height");if(r){r*=0.5;}return r;}}});c.SVGEllipse=f;g=function(r){g.superclass.constructor.apply(this,arguments);};g.NAME="svgCircle";c.extend(g,c.SVGShape,{_type:"circle",_draw:function(){var u=this.node,t=this.get("x"),w=this.get("y"),s=this.get("radius"),r=t+s,v=w+s;u.setAttribute("r",s);u.setAttribute("cx",r);u.setAttribute("cy",v);this._fillChangeHandler();
this._strokeChangeHandler();this._updateTransform();}});g.ATTRS=c.merge(c.SVGShape.ATTRS,{width:{setter:function(r){this.set("radius",r/2);return r;},getter:function(){return this.get("radius")*2;}},height:{setter:function(r){this.set("radius",r/2);return r;},getter:function(){return this.get("radius")*2;}},radius:{value:0}});c.SVGCircle=g;l=function(){l.superclass.constructor.apply(this,arguments);};l.NAME="svgPieSlice";c.extend(l,c.SVGShape,c.mix({_type:"path",_draw:function(v){var s=this.get("cx"),w=this.get("cy"),u=this.get("startAngle"),t=this.get("arc"),r=this.get("radius");this.clear();this.drawWedge(s,w,u,t,r);this.end();}},c.SVGDrawing.prototype));l.ATTRS=c.mix({cx:{value:0},cy:{value:0},startAngle:{value:0},arc:{value:0},radius:{value:0}},c.SVGShape.ATTRS);c.SVGPieSlice=l;e=function(r){e.superclass.constructor.apply(this,arguments);};e.NAME="svgGraphic";e.ATTRS={render:{},id:{valueFn:function(){return c.guid();},setter:function(s){var r=this._node;if(r){r.setAttribute("id",s);}return s;}},shapes:{readOnly:true,getter:function(){return this._shapes;}},contentBounds:{readOnly:true,getter:function(){return this._contentBounds;}},node:{readOnly:true,getter:function(){return this._node;}},width:{setter:function(r){if(this._node){this._node.style.width=r+"px";}return r;}},height:{setter:function(r){if(this._node){this._node.style.height=r+"px";}return r;}},autoSize:{value:false},preserveAspectRatio:{value:"xMidYMid"},resizeDown:{value:false},x:{getter:function(){return this._x;},setter:function(r){this._x=r;if(this._node){this._node.style.left=r+"px";}return r;}},y:{getter:function(){return this._y;},setter:function(r){this._y=r;if(this._node){this._node.style.top=r+"px";}return r;}},autoDraw:{value:true},visible:{value:true,setter:function(r){this._toggleVisible(r);return r;}},pointerEvents:{value:"none"}};c.extend(e,c.GraphicBase,{set:function(s,w){var v=this,r={autoDraw:true,autoSize:true,preserveAspectRatio:true,resizeDown:true},u,t=false;h.prototype.set.apply(v,arguments);if(v._state.autoDraw===true&&c.Object.size(this._shapes)>0){if(d.isString&&r[s]){t=true;}else{if(d.isObject(s)){for(u in r){if(r.hasOwnProperty(u)&&s[u]){t=true;break;}}}}}if(t){v._redraw();}},_x:0,_y:0,getXY:function(){var r=c.one(this._node),s;if(r){s=r.getXY();}return s;},initializer:function(){var s=this.get("render"),r=this.get("visible")?"visible":"hidden";this._shapes={};this._contentBounds={left:0,top:0,right:0,bottom:0};this._gradients={};this._node=p.createElement("div");this._node.style.position="absolute";this._node.style.left=this.get("x")+"px";this._node.style.top=this.get("y")+"px";this._node.style.visibility=r;this._contentNode=this._createGraphics();this._contentNode.style.visibility=r;this._contentNode.setAttribute("id",this.get("id"));this._node.appendChild(this._contentNode);if(s){this.render(s);}},render:function(u){var r=c.one(u),s=this.get("width")||parseInt(r.getComputedStyle("width"),10),t=this.get("height")||parseInt(r.getComputedStyle("height"),10);r=r||c.one(p.body);r.append(this._node);this.parentNode=r;this.set("width",s);this.set("height",t);return this;},destroy:function(){this.removeAllShapes();if(this._contentNode){this._removeChildren(this._contentNode);if(this._contentNode.parentNode){this._contentNode.parentNode.removeChild(this._contentNode);}this._contentNode=null;}if(this._node){this._removeChildren(this._node);c.one(this._node).remove(true);this._node=null;}},addShape:function(r){r.graphic=this;if(!this.get("visible")){r.visible=false;}var t=this._getShapeClass(r.type),s=new t(r);this._appendShape(s);return s;},_appendShape:function(s){var t=s.node,r=this._frag||this._contentNode;if(this.get("autoDraw")){r.appendChild(t);}else{this._getDocFrag().appendChild(t);}},removeShape:function(r){if(!(r instanceof o)){if(d.isString(r)){r=this._shapes[r];}}if(r&&r instanceof o){r._destroy();delete this._shapes[r.get("id")];}if(this.get("autoDraw")){this._redraw();}return r;},removeAllShapes:function(){var r=this._shapes,s;for(s in r){if(r.hasOwnProperty(s)){r[s]._destroy();}}this._shapes={};},_removeChildren:function(r){if(r.hasChildNodes()){var s;while(r.firstChild){s=r.firstChild;this._removeChildren(s);r.removeChild(s);}}},clear:function(){this.removeAllShapes();},_toggleVisible:function(u){var t,s=this._shapes,r=u?"visible":"hidden";if(s){for(t in s){if(s.hasOwnProperty(t)){s[t].set("visible",u);}}}if(this._contentNode){this._contentNode.style.visibility=r;}if(this._node){this._node.style.visibility=r;}},_getShapeClass:function(s){var r=this._shapeClass[s];if(r){return r;}return s;},_shapeClass:{circle:c.SVGCircle,rect:c.SVGRect,path:c.SVGPath,ellipse:c.SVGEllipse,pieslice:c.SVGPieSlice},getShapeById:function(s){var r=this._shapes[s];return r;},batch:function(s){var r=this.get("autoDraw");this.set("autoDraw",false);s();this._redraw();this.set("autoDraw",r);},_getDocFrag:function(){if(!this._frag){this._frag=p.createDocumentFragment();}return this._frag;},_redraw:function(){var z=this.get("autoSize"),u=this.get("preserveAspectRatio"),A=this.get("resizeDown")?this._getUpdatedContentBounds():this._contentBounds,w=A.left,F=A.right,D=A.top,r=A.bottom,s=F-w,G=r-D,C,t,B,E,v;if(z){if(z=="sizeContentToGraphic"){v=c.one(this._node);C=parseFloat(v.getComputedStyle("width"));t=parseFloat(v.getComputedStyle("height"));B=E=0;this._contentNode.setAttribute("preserveAspectRatio",u);}else{C=s;t=G;B=w;E=D;this._state.width=s;this._state.height=G;if(this._node){this._node.style.width=s+"px";this._node.style.height=G+"px";}}}else{C=s;t=G;B=w;E=D;}if(this._contentNode){this._contentNode.style.left=B+"px";this._contentNode.style.top=E+"px";this._contentNode.setAttribute("width",C);this._contentNode.setAttribute("height",t);this._contentNode.style.width=C+"px";this._contentNode.style.height=t+"px";this._contentNode.setAttribute("viewBox",""+w+" "+D+" "+s+" "+G+"");}if(this._frag){if(this._contentNode){this._contentNode.appendChild(this._frag);}this._frag=null;}},addToRedrawQueue:function(r){var t,s;this._shapes[r.get("id")]=r;
if(!this.get("resizeDown")){t=r.getBounds();s=this._contentBounds;s.left=s.left<t.left?s.left:t.left;s.top=s.top<t.top?s.top:t.top;s.right=s.right>t.right?s.right:t.right;s.bottom=s.bottom>t.bottom?s.bottom:t.bottom;s.width=s.right-s.left;s.height=s.bottom-s.top;this._contentBounds=s;}if(this.get("autoDraw")){this._redraw();}},_getUpdatedContentBounds:function(){var v,t,s,r=this._shapes,u={};for(t in r){if(r.hasOwnProperty(t)){s=r[t];v=s.getBounds();u.left=d.isNumber(u.left)?Math.min(u.left,v.left):v.left;u.top=d.isNumber(u.top)?Math.min(u.top,v.top):v.top;u.right=d.isNumber(u.right)?Math.max(u.right,v.right):v.right;u.bottom=d.isNumber(u.bottom)?Math.max(u.bottom,v.bottom):v.bottom;}}u.left=d.isNumber(u.left)?u.left:0;u.top=d.isNumber(u.top)?u.top:0;u.right=d.isNumber(u.right)?u.right:0;u.bottom=d.isNumber(u.bottom)?u.bottom:0;this._contentBounds=u;return u;},_createGraphics:function(){var r=this._createGraphicNode("svg"),s=this.get("pointerEvents");r.style.position="absolute";r.style.top="0px";r.style.left="0px";r.style.overflow="auto";r.setAttribute("overflow","auto");r.setAttribute("pointer-events",s);return r;},_createGraphicNode:function(t,r){var u=p.createElementNS("http://www.w3.org/2000/svg","svg:"+t),s=r||"none";if(t!=="defs"&&t!=="stop"&&t!=="linearGradient"&&t!="radialGradient"){u.setAttribute("pointer-events",s);}return u;},getGradientNode:function(t,u){var r=this._gradients,v,s=u+"Gradient";if(r.hasOwnProperty(t)&&r[t].tagName.indexOf(u)>-1){v=this._gradients[t];}else{v=this._createGraphicNode(s);if(!this._defs){this._defs=this._createGraphicNode("defs");this._contentNode.appendChild(this._defs);}this._defs.appendChild(v);t=t||"gradient"+Math.round(100000*Math.random());v.setAttribute("id",t);if(r.hasOwnProperty(t)){this._defs.removeChild(r[t]);}r[t]=v;}return v;},_toFront:function(s){var r=this._contentNode;if(s instanceof c.SVGShape){s=s.get("node");}if(r&&s){r.appendChild(s);}},_toBack:function(s){var r=this._contentNode,t;if(s instanceof c.SVGShape){s=s.get("node");}if(r&&s){t=r.firstChild;if(t){r.insertBefore(s,t);}else{r.appendChild(s);}}}});c.SVGGraphic=e;},"@VERSION@",{"requires":["graphics"]});