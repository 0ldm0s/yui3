YUI.add("graphics-svg",function(b,o){var i="svgShape",c=b.Lang,g=b.AttributeLite,d,m,f,h,l,e,j,n=b.config.doc,k=b.ClassNameManager.getClassName;function a(){}a.prototype={_currentX:0,_currentY:0,_type:"path",curveTo:function(t,r,F,E,B,A){var q,v,C,u,G,D,s,p,z;this._pathArray=this._pathArray||[];if(this._pathType!=="C"){this._pathType="C";v=["C"];this._pathArray.push(v);}else{v=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!v){v=[];this._pathArray.push(v);}}q=this._pathArray.length-1;this._pathArray[q]=this._pathArray[q].concat([Math.round(t),Math.round(r),Math.round(F),Math.round(E),B,A]);D=Math.max(B,Math.max(t,F));p=Math.max(A,Math.max(r,E));s=Math.min(B,Math.min(t,F));z=Math.min(A,Math.min(r,E));C=Math.abs(D-s);u=Math.abs(p-z);G=[[this._currentX,this._currentY],[t,r],[F,E],[B,A]];this._setCurveBoundingBox(G,C,u);this._currentX=B;this._currentY=A;},quadraticCurveTo:function(t,s,B,A){var q,v,C,u,E,D,r,p,z;if(this._pathType!=="Q"){this._pathType="Q";v=["Q"];this._pathArray.push(v);}else{v=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!v){v=[];this._pathArray.push(v);}}q=this._pathArray.length-1;this._pathArray[q]=this._pathArray[q].concat([Math.round(t),Math.round(s),Math.round(B),Math.round(A)]);D=Math.max(B,t);p=Math.max(A,s);r=Math.min(B,t);z=Math.min(A,s);C=Math.abs(D-r);u=Math.abs(p-z);E=[[this._currentX,this._currentY],[t,s],[B,A]];this._setCurveBoundingBox(E,C,u);this._currentX=B;this._currentY=A;},drawRect:function(p,s,q,r){this.moveTo(p,s);this.lineTo(p+q,s);this.lineTo(p+q,s+r);this.lineTo(p,s+r);this.lineTo(p,s);},drawRoundRect:function(p,u,q,s,r,t){this.moveTo(p,u+t);this.lineTo(p,u+s-t);this.quadraticCurveTo(p,u+s,p+r,u+s);this.lineTo(p+q-r,u+s);this.quadraticCurveTo(p+q,u+s,p+q,u+s-t);this.lineTo(p+q,u+t);this.quadraticCurveTo(p+q,u,p+q-r,u);this.lineTo(p+r,u);this.quadraticCurveTo(p,u,p,u+t);},drawCircle:function(q,s,p){var r=p*2;this._drawingComplete=false;this._trackSize(q,s);this._trackSize(q+r,s+r);this._pathArray=this._pathArray||[];this._pathArray.push(["M",q+p,s]);this._pathArray.push(["A",p,p,0,1,0,q+p,s+r]);this._pathArray.push(["A",p,p,0,1,0,q+p,s]);this._currentX=q;this._currentY=s;return this;},drawEllipse:function(r,u,s,t){var q=s*0.5,p=t*0.5;this._drawingComplete=false;this._trackSize(r,u);this._trackSize(r+s,u+t);this._pathArray=this._pathArray||[];this._pathArray.push(["M",r+q,u]);this._pathArray.push(["A",q,p,0,1,0,r+q,u+t]);this._pathArray.push(["A",q,p,0,1,0,r+q,u]);this._currentX=r;this._currentY=u;return this;},drawDiamond:function(q,u,t,p){var s=t*0.5,r=p*0.5;this.moveTo(q+s,u);this.lineTo(q+t,u+r);this.lineTo(q+s,u+p);this.lineTo(q,u+r);this.lineTo(q+s,u);return this;},drawWedge:function(C,z,H,w,s,t){var G,F,v,L,u,D,B,K,J,r,q,I=0,A=s*2,p,E;t=t||s;if(this._pathType!="M"){this._pathType="M";p=["M"];this._pathArray.push(p);}else{p=this._getCurrentArray();}E=this._pathArray.length-1;this._pathArray[E].push(C);this._pathArray[E].push(C);if(Math.abs(w)>360){w=360;}G=Math.ceil(Math.abs(w)/45);F=w/G;v=-(F/180)*Math.PI;L=(H/180)*Math.PI;if(G>0){D=C+Math.cos(H/180*Math.PI)*s;B=z+Math.sin(H/180*Math.PI)*t;this._pathType="L";E++;this._pathArray[E]=["L"];this._pathArray[E].push(Math.round(D));this._pathArray[E].push(Math.round(B));E++;this._pathType="Q";this._pathArray[E]=["Q"];for(;I<G;++I){L+=v;u=L-(v/2);K=C+Math.cos(L)*s;J=z+Math.sin(L)*t;r=C+Math.cos(u)*(s/Math.cos(v/2));q=z+Math.sin(u)*(t/Math.cos(v/2));this._pathArray[E].push(Math.round(r));this._pathArray[E].push(Math.round(q));this._pathArray[E].push(Math.round(K));this._pathArray[E].push(Math.round(J));}}this._currentX=C;this._currentY=z;this._trackSize(A,A);return this;},lineTo:function(u,t,r){var q=arguments,s,p,w,v;this._pathArray=this._pathArray||[];if(typeof u==="string"||typeof u==="number"){q=[[u,t]];}p=q.length;this._shapeType="path";if(this._pathType!=="L"){this._pathType="L";v=["L"];this._pathArray.push(v);}else{v=this._getCurrentArray();}w=this._pathArray.length-1;for(s=0;s<p;++s){this._pathArray[w].push(q[s][0]);this._pathArray[w].push(q[s][1]);this._currentX=q[s][0];this._currentY=q[s][1];this._trackSize.apply(this,q[s]);}},moveTo:function(p,s){var r,q;this._pathArray=this._pathArray||[];this._pathType="M";q=["M"];this._pathArray.push(q);r=this._pathArray.length-1;this._pathArray[r]=this._pathArray[r].concat([p,s]);this._currentX=p;this._currentY=s;this._trackSize(p,s);},end:function(){this._closePath();this._graphic.addToRedrawQueue(this);},clear:function(){this._currentX=0;this._currentY=0;this._width=0;this._height=0;this._left=0;this._right=0;this._top=0;this._bottom=0;this._pathArray=[];this._path="";},_closePath:function(){var q,u,p,x,r,w,v,A="",t=this.node,s=this._left,y=this._top,z=this.get("fill");if(this._pathArray){q=this._pathArray.concat();while(q&&q.length>0){u=q.shift();x=u.length;p=u[0];if(p==="A"){A+=p+u[1]+","+u[2];}else{if(p!="z"){A+=" "+p+(u[1]-s);}else{A+=" z ";}}switch(p){case"L":case"M":case"Q":for(v=2;v<x;++v){r=(v%2===0)?y:s;r=u[v]-r;A+=", "+r;}break;case"A":r=" "+u[3]+" "+u[4];r+=","+u[5]+" "+(u[6]-s);r+=","+(u[7]-y);A+=" "+r;break;case"C":for(v=2;v<x;++v){r=(v%2===0)?y:s;w=u[v];w-=r;A+=" "+w;}break;}}if(z&&z.color){A+="z";}if(A){t.setAttribute("d",A);}this._path=A;this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();}},closePath:function(){this._pathArray.push(["z"]);},_getCurrentArray:function(){var p=this._pathArray[Math.max(0,this._pathArray.length-1)];if(!p){p=[];this._pathArray.push(p);}return p;},getBezierData:function(u,s){var v=u.length,r=[],q,p;for(q=0;q<v;++q){r[q]=[u[q][0],u[q][1]];}for(p=1;p<v;++p){for(q=0;q<v-p;++q){r[q][0]=(1-s)*r[q][0]+s*r[parseInt(q+1,10)][0];r[q][1]=(1-s)*r[q][1]+s*r[parseInt(q+1,10)][1];}}return[r[0][0],r[0][1]];},_setCurveBoundingBox:function(B,x,s){var r=0,q=this._currentX,y=q,v=this._currentY,p=v,u=Math.round(Math.sqrt((x*x)+(s*s))),z=1/u,A;for(;r<u;++r){A=this.getBezierData(B,z*r);q=isNaN(q)?A[0]:Math.min(A[0],q);y=isNaN(y)?A[0]:Math.max(A[0],y);v=isNaN(v)?A[1]:Math.min(A[1],v);p=isNaN(p)?A[1]:Math.max(A[1],p);
}q=Math.round(q*10)/10;y=Math.round(y*10)/10;v=Math.round(v*10)/10;p=Math.round(p*10)/10;this._trackSize(y,p);this._trackSize(q,v);},_trackSize:function(p,q){if(p>this._right){this._right=p;}if(p<this._left){this._left=p;}if(q<this._top){this._top=q;}if(q>this._bottom){this._bottom=q;}this._width=this._right-this._left;this._height=this._bottom-this._top;}};b.SVGDrawing=a;m=function(p){this._transforms=[];this.matrix=new b.Matrix();this._normalizedMatrix=new b.Matrix();m.superclass.constructor.apply(this,arguments);};m.NAME="svgShape";b.extend(m,b.GraphicBase,b.mix({_x:0,_y:0,init:function(){this.initializer.apply(this,arguments);},initializer:function(p){var q=this,r=p.graphic;q.createNode();if(r){q._setGraphic(r);}q._updateHandler();},_setGraphic:function(p){var q;if(p instanceof b.SVGGraphic){this._graphic=p;}else{p=b.one(p);q=new b.SVGGraphic({render:p});q._appendShape(this);this._graphic=q;}},addClass:function(p){var q=this.node;q.className.baseVal=c.trim([q.className.baseVal,p].join(" "));},removeClass:function(p){var q=this.node,r=q.className.baseVal;r=r.replace(new RegExp(p+" "),p).replace(new RegExp(p),"");q.className.baseVal=r;},getXY:function(){var s=this._graphic,q=s.getXY(),p=this._x,r=this._y;return[q[0]+p,q[1]+r];},setXY:function(q){var r=this._graphic,p=r.getXY();this._x=q[0]-p[0];this._y=q[1]-p[1];this.set("transform",this.get("transform"));},contains:function(p){return p===b.one(this.node);},compareTo:function(p){var q=this.node;return q===p;},test:function(p){return b.Selector.test(this.node,p);},_getDefaultFill:function(){return{type:"solid",opacity:1,cx:0.5,cy:0.5,fx:0.5,fy:0.5,r:0.5};},_getDefaultStroke:function(){return{weight:1,dashstyle:"none",color:"#000",opacity:1};},createNode:function(){var p=n.createElementNS("http://www.w3.org/2000/svg","svg:"+this._type),r=this.get("id"),q=this.get("pointerEvents");this.node=p;this.addClass(k(i)+" "+k(this.name));if(r){p.setAttribute("id",r);}if(q){p.setAttribute("pointer-events",q);}if(!this.get("visible")){b.one(p).setStyle("visibility","hidden");}},on:function(q,p){if(b.Node.DOM_EVENTS[q]){return b.one("#"+this.get("id")).on(q,p);}return b.on.apply(this,arguments);},_strokeChangeHandler:function(u){var s=this.node,t=this.get("stroke"),r,p,v,q;if(t&&t.weight&&t.weight>0){q=t.linejoin||"round";r=parseFloat(t.opacity);p=t.dashstyle||"none";v=c.isArray(p)?p.toString():p;t.color=t.color||"#000000";t.weight=t.weight||1;t.opacity=c.isNumber(r)?r:1;t.linecap=t.linecap||"butt";s.setAttribute("stroke-dasharray",v);s.setAttribute("stroke",t.color);s.setAttribute("stroke-linecap",t.linecap);s.setAttribute("stroke-width",t.weight);s.setAttribute("stroke-opacity",t.opacity);if(q=="round"||q=="bevel"){s.setAttribute("stroke-linejoin",q);}else{q=parseInt(q,10);if(c.isNumber(q)){s.setAttribute("stroke-miterlimit",Math.max(q,1));s.setAttribute("stroke-linejoin","miter");}}}else{s.setAttribute("stroke","none");}},_fillChangeHandler:function(t){var r=this.node,s=this.get("fill"),p,q;if(s){q=s.type;if(q=="linear"||q=="radial"){this._setGradientFill(s);r.setAttribute("fill","url(#grad"+this.get("id")+")");}else{if(!s.color){r.setAttribute("fill","none");}else{p=parseFloat(s.opacity);p=c.isNumber(p)?p:1;r.setAttribute("fill",s.color);r.setAttribute("fill-opacity",p);}}}else{r.setAttribute("fill","none");}},_setGradientFill:function(P){var B,y,N,J,s,G=c.isNumber,F=this._graphic,z=P.type,M=F.getGradientNode("grad"+this.get("id"),z),C=P.stops,D=this.get("width"),T=this.get("height"),L=P.rotation||0,A=Math.PI/180,I=parseFloat(parseFloat(Math.tan(L*A)).toFixed(8)),Q,S,E,K,U="0%",R="100%",v="0%",q="0%",u=P.cx,p=P.cy,x=P.fx,t=P.fy,H=P.r,O=[];if(z=="linear"){u=D/2;p=T/2;if(Math.abs(I)*D/2>=T/2){if(L<180){v=0;q=T;}else{v=T;q=0;}U=u-((p-v)/I);R=u-((p-q)/I);}else{if(L>90&&L<270){U=D;R=0;}else{U=0;R=D;}v=((I*(u-U))-p)*-1;q=((I*(u-R))-p)*-1;}U=Math.round(100*U/D);R=Math.round(100*R/D);v=Math.round(100*v/T);q=Math.round(100*q/T);U=G(U)?U:0;R=G(R)?R:100;v=G(v)?v:0;q=G(q)?q:0;M.setAttribute("spreadMethod","pad");M.setAttribute("width",D);M.setAttribute("height",T);M.setAttribute("x1",U+"%");M.setAttribute("x2",R+"%");M.setAttribute("y1",v+"%");M.setAttribute("y2",q+"%");}else{M.setAttribute("cx",(u*100)+"%");M.setAttribute("cy",(p*100)+"%");M.setAttribute("fx",(x*100)+"%");M.setAttribute("fy",(t*100)+"%");M.setAttribute("r",(H*100)+"%");}S=C.length;E=0;for(Q=0;Q<S;++Q){if(this._stops&&this._stops.length>0){J=this._stops.shift();s=false;}else{J=F._createGraphicNode("stop");s=true;}K=C[Q];y=K.opacity;N=K.color;B=K.offset||Q/(S-1);B=Math.round(B*100)+"%";y=G(y)?y:1;y=Math.max(0,Math.min(1,y));E=(Q+1)/S;J.setAttribute("offset",B);J.setAttribute("stop-color",N);J.setAttribute("stop-opacity",y);if(s){M.appendChild(J);}O.push(J);}while(this._stops&&this._stops.length>0){M.removeChild(this._stops.shift());}this._stops=O;},_stops:null,set:function(){var p=this;g.prototype.set.apply(p,arguments);if(p.initialized){p._updateHandler();}},translate:function(p,q){this._addTransform("translate",arguments);},translateX:function(p){this._addTransform("translateX",arguments);},translateY:function(p){this._addTransform("translateY",arguments);},skew:function(p,q){this._addTransform("skew",arguments);},skewX:function(p){this._addTransform("skewX",arguments);},skewY:function(p){this._addTransform("skewY",arguments);},rotate:function(p){this._addTransform("rotate",arguments);},scale:function(p,q){this._addTransform("scale",arguments);},_addTransform:function(q,p){p=b.Array(p);this._transform=c.trim(this._transform+" "+q+"("+p.join(", ")+")");p.unshift(q);this._transforms.push(p);if(this.initialized){this._updateTransform();}},_updateTransform:function(){var z=this._type=="path",r=this.node,D,q,t,C,A,v,s,B=this.matrix,p=this._normalizedMatrix,u=0,w=this._transforms.length;if(z||(this._transforms&&this._transforms.length>0)){C=this._x;A=this._y;t=this.get("transformOrigin");v=C+(t[0]*this.get("width"));s=A+(t[1]*this.get("height"));if(z){if(!(this instanceof b.SVGPath)){v=this._left+(t[0]*this.get("width"));
s=this._top+(t[1]*this.get("height"));}p.init({dx:C+this._left,dy:A+this._top});}p.translate(v,s);for(;u<w;++u){D=this._transforms[u].shift();if(D){p[D].apply(p,this._transforms[u]);B[D].apply(B,this._transforms[u]);}if(z){this._transforms[u].unshift(D);}}p.translate(-v,-s);q="matrix("+p.a+","+p.b+","+p.c+","+p.d+","+p.dx+","+p.dy+")";}this._graphic.addToRedrawQueue(this);if(q){r.setAttribute("transform",q);}if(!z){this._transforms=[];}},_draw:function(){var p=this.node;p.setAttribute("width",this.get("width"));p.setAttribute("height",this.get("height"));p.setAttribute("x",this._x);p.setAttribute("y",this._y);p.style.left=this._x+"px";p.style.top=this._y+"px";this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();},_updateHandler:function(p){this._draw();},_transform:"",getBounds:function(){var t=this._type,u=this.get("stroke"),r=this.get("width"),s=this.get("height"),q=t=="path"?0:this._x,v=t=="path"?0:this._y,p=0;if(u&&u.weight){p=u.weight;}r=(q+r+p)-(q-p);s=(v+s+p)-(v-p);q-=p;v-=p;return this._normalizedMatrix.getContentRect(r,s,q,v);},destroy:function(){var p=this.get("graphic");if(p){p.removeShape(this);}else{this._destroy();}},_destroy:function(){if(this.node){b.Event.purgeElement(this.node,true);if(this.node.parentNode){this.node.parentNode.removeChild(this.node);}this.node=null;}}},b.SVGDrawing.prototype));m.ATTRS={transformOrigin:{valueFn:function(){return[0.5,0.5];}},transform:{setter:function(p){this.matrix.init();this._normalizedMatrix.init();this._transforms=this.matrix.getTransformArray(p);this._transform=p;return p;},getter:function(){return this._transform;}},id:{valueFn:function(){return b.guid();},setter:function(q){var p=this.node;if(p){p.setAttribute("id",q);}return q;}},x:{getter:function(){return this._x;},setter:function(q){var p=this.get("transform");this._x=q;if(p){this.set("transform",p);}}},y:{getter:function(){return this._y;},setter:function(q){var p=this.get("transform");this._y=q;if(p){this.set("transform",p);}}},width:{value:0},height:{value:0},visible:{value:true,setter:function(q){var p=q?"visible":"hidden";if(this.node){this.node.style.visibility=p;}return q;}},fill:{valueFn:"_getDefaultFill",setter:function(r){var q,p=this.get("fill")||this._getDefaultFill();q=(r)?b.merge(p,r):null;if(q&&q.color){if(q.color===undefined||q.color=="none"){q.color=null;}}return q;}},stroke:{valueFn:"_getDefaultStroke",setter:function(r){var q=this.get("stroke")||this._getDefaultStroke(),p;if(r&&r.hasOwnProperty("weight")){p=parseInt(r.weight,10);if(!isNaN(p)){r.weight=p;}}return(r)?b.merge(q,r):null;}},pointerEvents:{valueFn:function(){var q="visiblePainted",p=this.node;if(p){p.setAttribute("pointer-events",q);}return q;},setter:function(q){var p=this.node;if(p){p.setAttribute("pointer-events",q);}return q;}},node:{readOnly:true,getter:function(){return this.node;}},graphic:{readOnly:true,getter:function(){return this._graphic;}}};b.SVGShape=m;l=function(p){l.superclass.constructor.apply(this,arguments);};l.NAME="svgPath";b.extend(l,b.SVGShape,{_left:0,_right:0,_top:0,_bottom:0,_type:"path",_path:""});l.ATTRS=b.merge(b.SVGShape.ATTRS,{path:{readOnly:true,getter:function(){return this._path;}},width:{getter:function(){var p=Math.max(this._right-this._left,0);return p;}},height:{getter:function(){return Math.max(this._bottom-this._top,0);}}});b.SVGPath=l;h=function(){h.superclass.constructor.apply(this,arguments);};h.NAME="svgRect";b.extend(h,b.SVGShape,{_type:"rect"});h.ATTRS=b.SVGShape.ATTRS;b.SVGRect=h;e=function(p){e.superclass.constructor.apply(this,arguments);};e.NAME="svgEllipse";b.extend(e,m,{_type:"ellipse",_draw:function(){var p=this.node,A=this.get("width"),s=this.get("height"),z=this.get("x"),u=this.get("y"),v=A*0.5,t=s*0.5,r=z+v,q=u+t;p.setAttribute("rx",v);p.setAttribute("ry",t);p.setAttribute("cx",r);p.setAttribute("cy",q);this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();}});e.ATTRS=b.merge(m.ATTRS,{xRadius:{setter:function(p){this.set("width",p*2);},getter:function(){var p=this.get("width");if(p){p*=0.5;}return p;}},yRadius:{setter:function(p){this.set("height",p*2);},getter:function(){var p=this.get("height");if(p){p*=0.5;}return p;}}});b.SVGEllipse=e;f=function(p){f.superclass.constructor.apply(this,arguments);};f.NAME="svgCircle";b.extend(f,b.SVGShape,{_type:"circle",_draw:function(){var s=this.node,r=this.get("x"),u=this.get("y"),q=this.get("radius"),p=r+q,t=u+q;s.setAttribute("r",q);s.setAttribute("cx",p);s.setAttribute("cy",t);this._fillChangeHandler();this._strokeChangeHandler();this._updateTransform();}});f.ATTRS=b.merge(b.SVGShape.ATTRS,{width:{setter:function(p){this.set("radius",p/2);return p;},getter:function(){return this.get("radius")*2;}},height:{setter:function(p){this.set("radius",p/2);return p;},getter:function(){return this.get("radius")*2;}},radius:{value:0}});b.SVGCircle=f;j=function(){j.superclass.constructor.apply(this,arguments);};j.NAME="svgPieSlice";b.extend(j,b.SVGShape,b.mix({_type:"path",_draw:function(t){var q=this.get("cx"),u=this.get("cy"),s=this.get("startAngle"),r=this.get("arc"),p=this.get("radius");this.clear();this.drawWedge(q,u,s,r,p);this.end();}},b.SVGDrawing.prototype));j.ATTRS=b.mix({cx:{value:0},cy:{value:0},startAngle:{value:0},arc:{value:0},radius:{value:0}},b.SVGShape.ATTRS);b.SVGPieSlice=j;d=function(p){d.superclass.constructor.apply(this,arguments);};d.NAME="svgGraphic";d.ATTRS={render:{},id:{valueFn:function(){return b.guid();},setter:function(q){var p=this._node;if(p){p.setAttribute("id",q);}return q;}},shapes:{readOnly:true,getter:function(){return this._shapes;}},contentBounds:{readOnly:true,getter:function(){return this._contentBounds;}},node:{readOnly:true,getter:function(){return this._node;}},width:{setter:function(p){if(this._node){this._node.style.width=p+"px";}return p;}},height:{setter:function(p){if(this._node){this._node.style.height=p+"px";}return p;}},autoSize:{value:false},preserveAspectRatio:{value:"xMidYMid"},resizeDown:{getter:function(){return this._resizeDown;
},setter:function(p){this._resizeDown=p;if(this._contentNode){this._redraw();}return p;}},x:{getter:function(){return this._x;},setter:function(p){this._x=p;if(this._node){this._node.style.left=p+"px";}return p;}},y:{getter:function(){return this._y;},setter:function(p){this._y=p;if(this._node){this._node.style.top=p+"px";}return p;}},autoDraw:{value:true},visible:{value:true,setter:function(p){this._toggleVisible(p);return p;}},pointerEvents:{value:"none"}};b.extend(d,b.GraphicBase,{_x:0,_y:0,getXY:function(){var p=b.one(this._node),q;if(p){q=p.getXY();}return q;},_resizeDown:false,initializer:function(){var q=this.get("render"),p=this.get("visible")?"visible":"hidden";this._shapes={};this._contentBounds={left:0,top:0,right:0,bottom:0};this._gradients={};this._node=n.createElement("div");this._node.style.position="absolute";this._node.style.left=this.get("x")+"px";this._node.style.top=this.get("y")+"px";this._node.style.visibility=p;this._contentNode=this._createGraphics();this._contentNode.style.visibility=p;this._contentNode.setAttribute("id",this.get("id"));this._node.appendChild(this._contentNode);if(q){this.render(q);}},render:function(s){var p=b.one(s),q=this.get("width")||parseInt(p.getComputedStyle("width"),10),r=this.get("height")||parseInt(p.getComputedStyle("height"),10);p=p||b.one(n.body);p.append(this._node);this.parentNode=p;this.set("width",q);this.set("height",r);return this;},destroy:function(){this.removeAllShapes();if(this._contentNode){this._removeChildren(this._contentNode);if(this._contentNode.parentNode){this._contentNode.parentNode.removeChild(this._contentNode);}this._contentNode=null;}if(this._node){this._removeChildren(this._node);b.one(this._node).remove(true);this._node=null;}},addShape:function(p){p.graphic=this;if(!this.get("visible")){p.visible=false;}var r=this._getShapeClass(p.type),q=new r(p);this._appendShape(q);return q;},_appendShape:function(q){var r=q.node,p=this._frag||this._contentNode;if(this.get("autoDraw")){p.appendChild(r);}else{this._getDocFrag().appendChild(r);}},removeShape:function(p){if(!(p instanceof m)){if(c.isString(p)){p=this._shapes[p];}}if(p&&p instanceof m){p._destroy();delete this._shapes[p.get("id")];}if(this.get("autoDraw")){this._redraw();}return p;},removeAllShapes:function(){var p=this._shapes,q;for(q in p){if(p.hasOwnProperty(q)){p[q]._destroy();}}this._shapes={};},_removeChildren:function(p){if(p.hasChildNodes()){var q;while(p.firstChild){q=p.firstChild;this._removeChildren(q);p.removeChild(q);}}},clear:function(){this.removeAllShapes();},_toggleVisible:function(s){var r,q=this._shapes,p=s?"visible":"hidden";if(q){for(r in q){if(q.hasOwnProperty(r)){q[r].set("visible",s);}}}if(this._contentNode){this._contentNode.style.visibility=p;}if(this._node){this._node.style.visibility=p;}},_getShapeClass:function(q){var p=this._shapeClass[q];if(p){return p;}return q;},_shapeClass:{circle:b.SVGCircle,rect:b.SVGRect,path:b.SVGPath,ellipse:b.SVGEllipse,pieslice:b.SVGPieSlice},getShapeById:function(q){var p=this._shapes[q];return p;},batch:function(q){var p=this.get("autoDraw");this.set("autoDraw",false);q();this._redraw();this.set("autoDraw",p);},_getDocFrag:function(){if(!this._frag){this._frag=n.createDocumentFragment();}return this._frag;},_redraw:function(){var v=this.get("autoSize"),s=this.get("preserveAspectRatio"),w=this.get("resizeDown")?this._getUpdatedContentBounds():this._contentBounds,u=w.left,B=w.right,z=w.top,p=w.bottom,q=w.width,C=w.height,y,r,x,A,t;if(v){if(v=="sizeContentToGraphic"){t=b.one(this._node);y=parseFloat(t.getComputedStyle("width"));r=parseFloat(t.getComputedStyle("height"));x=A=0;this._contentNode.setAttribute("preserveAspectRatio",s);}else{y=q;r=C;x=u;A=z;this._state.width=q;this._state.height=C;if(this._node){this._node.style.width=q+"px";this._node.style.height=C+"px";}}}else{y=q;r=C;x=u;A=z;}if(this._contentNode){this._contentNode.style.left=x+"px";this._contentNode.style.top=A+"px";this._contentNode.setAttribute("width",y);this._contentNode.setAttribute("height",r);this._contentNode.style.width=y+"px";this._contentNode.style.height=r+"px";this._contentNode.setAttribute("viewBox",""+u+" "+z+" "+q+" "+C+"");}if(this._frag){if(this._contentNode){this._contentNode.appendChild(this._frag);}this._frag=null;}},addToRedrawQueue:function(p){var r,q;this._shapes[p.get("id")]=p;if(!this.get("resizeDown")){r=p.getBounds();q=this._contentBounds;q.left=q.left<r.left?q.left:r.left;q.top=q.top<r.top?q.top:r.top;q.right=q.right>r.right?q.right:r.right;q.bottom=q.bottom>r.bottom?q.bottom:r.bottom;q.width=q.right-q.left;q.height=q.bottom-q.top;this._contentBounds=q;}if(this.get("autoDraw")){this._redraw();}},_getUpdatedContentBounds:function(){var t,r,q,p=this._shapes,s={left:0,top:0,right:0,bottom:0};for(r in p){if(p.hasOwnProperty(r)){q=p[r];t=q.getBounds();s.left=Math.min(s.left,t.left);s.top=Math.min(s.top,t.top);s.right=Math.max(s.right,t.right);s.bottom=Math.max(s.bottom,t.bottom);}}s.width=s.right-s.left;s.height=s.bottom-s.top;this._contentBounds=s;return s;},_createGraphics:function(){var p=this._createGraphicNode("svg"),q=this.get("pointerEvents");p.style.position="absolute";p.style.top="0px";p.style.left="0px";p.style.overflow="auto";p.setAttribute("overflow","auto");p.setAttribute("pointer-events",q);return p;},_createGraphicNode:function(r,p){var s=n.createElementNS("http://www.w3.org/2000/svg","svg:"+r),q=p||"none";if(r!=="defs"&&r!=="stop"&&r!=="linearGradient"&&r!="radialGradient"){s.setAttribute("pointer-events",q);}return s;},getGradientNode:function(r,s){var p=this._gradients,t,q=s+"Gradient";if(p.hasOwnProperty(r)&&p[r].tagName.indexOf(s)>-1){t=this._gradients[r];}else{t=this._createGraphicNode(q);if(!this._defs){this._defs=this._createGraphicNode("defs");this._contentNode.appendChild(this._defs);}this._defs.appendChild(t);r=r||"gradient"+Math.round(100000*Math.random());t.setAttribute("id",r);if(p.hasOwnProperty(r)){this._defs.removeChild(p[r]);}p[r]=t;}return t;}});b.SVGGraphic=d;},"@VERSION@",{"requires":["graphics"]});
