YUI.add("dataschema-base",function(A){var B={toString:function(){return"DataSchema.Base";},apply:function(C,D){return D;}};A.namespace("DataSchema").Base=B;},"@VERSION@",{requires:["base"]});YUI.add("dataschema-json",function(C){var A=C.Lang,B={toString:function(){return"DataSchema.JSON";},buildPath:function(D){var G=null,F=[],E=0;if(D){D=D.replace(/\[(['"])(.*?)\1\]/g,function(I,H,J){F[E]=J;return".@"+(E++);}).replace(/\[(\d+)\]/g,function(I,H){F[E]=parseInt(H,10)|0;return".@"+(E++);}).replace(/^\./,"");if(!/[^\w\.\$@]/.test(D)){G=D.split(".");for(E=G.length-1;E>=0;--E){if(G[E].charAt(0)==="@"){G[E]=F[parseInt(G[E].substr(1),10)];}}}else{}}return G;},getLocationValue:function(G,F){var E=0,D=G.length;for(;E<D;E++){F=F[G[E]];}return F;},apply:function(F,G){var D=G,E={results:[],meta:{}};if(!A.isObject(G)){try{D=C.JSON.parse(G);}catch(H){E.error=H;return E;}}if(A.isObject(D)&&F){if(!A.isUndefined(F.resultsLocator)){E=B._parseResults(F,D,E);}if(!A.isUndefined(F.metaFields)){E=B._parseMeta(F.metaFields,D,E);}}else{E.error=true;}return E;},_parseResults:function(H,E,G){var F=[],I,D;if(H.resultsLocator){I=B.buildPath(H.resultsLocator);if(I){F=B.getLocationValue(I,E);if(F===undefined){G.results=[];D=new Error(this.toString()+" Results retrieval failure");}if(A.isArray(H.resultsFields)&&A.isArray(F)){G=B._getFieldValues(H.resultsFields,F,G);}else{G.results=[];D=new Error(this.toString()+" Fields retrieval failure");}}else{D=new Error(this.toString()+" Results locator failure");}if(D){G.error=D;}}return G;},_getFieldValues:function(K,Q,E){var G=[],M=K.length,H,F,O,P,S,D,J=[],N=[],L=[],R,I;for(H=0;H<M;H++){O=K[H];P=O.key||O;S=B.buildPath(P);if(S){if(S.length===1){J[J.length]={key:P,path:S[0]};}else{N[N.length]={key:P,path:S};}}else{}D=(A.isFunction(O.parser))?O.parser:C.DataSchema[O.parser+""];if(D){L[L.length]={key:P,parser:D};}}for(H=Q.length-1;H>=0;--H){I={};R=Q[H];if(R){for(F=J.length-1;F>=0;--F){I[J[F].key]=A.isUndefined(R[J[F].path])?R[F]:R[J[F].path];}for(F=N.length-1;F>=0;--F){I[N[F].key]=B.getLocationValue(N[F].path,R);}for(F=L.length-1;F>=0;--F){P=L[F].key;I[P]=L[F].parser(I[P]);if(A.isUndefined(I[P])){I[P]=null;}}}G[H]=I;}E.results=G;return E;},_parseMeta:function(G,D,F){if(A.isObject(G)){var E,H;for(E in G){if(G.hasOwnProperty(E)){H=B.buildPath(G[E]);if(H&&D){F.meta[E]=B.getLocationValue(H,D);}}}}else{F.error=new Error(this.toString()+" Meta retrieval failure");}return F;}};C.DataSchema.JSON=C.mix(B,C.DataSchema.Base);},"@VERSION@",{requires:["dataschema-base"]});YUI.add("dataschema-xml",function(C){var B=C.Lang,A={toString:function(){return"DataSchema.XML";},apply:function(F,G){var D=G,E={results:[],meta:{}};if(B.isObject(D)&&F){if(!B.isUndefined(F.resultsLocator)){E=A._parseResults(F,D,E);}if(!B.isUndefined(F.metaFields)){E=A._parseMeta(F.metaFields,D,E);}}else{E.error=true;}return E;},_parseResults:function(I,F,H){var G=[],E,D;if(I.resultsLocator){E=F.getElementsByTagName(I.resultsLocator);if(B.isArray(I.resultsFields)&&E.length){H=A._getFieldValues(I.resultsFields,E,H);}else{H.results=[];H.error=new Error(this.toString()+" Fields retrieval failure");}}return H;},_getFieldValues:function(J,S,G){var K=[],N=S.length-1,M,R,I,P,D,U,T,E,H;try{for(;N>=0;N--){P={};I=S[N];M=J.length-1;for(;M>=0;M--){D=J[M];U=(B.isValue(D.key))?D.key:D;if(I.attributes.getNamedItem(U)){T=I.attributes.getNamedItem(U).value;}else{E=I.getElementsByTagName(U);if(E&&E.item(0)){R=E.item(0);T=(R)?((R.text)?R.text:(R.textContent)?R.textContent:null):null;if(!T){H=[];for(var L=0,O=R.childNodes.length;L<O;L++){if(R.childNodes[L].nodeValue){H[H.length]=R.childNodes[L].nodeValue;}}if(H.length>0){T=H.join("");}}}}if(T===null){T="";}var F=(typeof D.parser==="function")?D.parser:null;if(F){T=F.call(this,T);}if(T===undefined){T=null;}P[U]=T;}K[N]=P;}}catch(Q){G.error=new Error(this.toString()+" Fields retrieval failure");}G.results=K;return G;},_parseMeta:function(H,D,F){if(B.isObject(H)){var E,I,G;for(E in H){if(H.hasOwnProperty(E)){I=H[E];G=D.getElementsByTagName(I)[0];if(G){G=G.firstChild.nodeValue;}else{G=D.attributes.getNamedItem(I);if(G){G=G.value;}}if(B.isValue(G)){F.meta[E]=G;}}}}else{F.error=new Error(this.toString()+" Meta retrieval failure");}return F;}};C.DataSchema.XML=C.mix(A,C.DataSchema.Base);},"@VERSION@",{requires:["dataschema-base"]});YUI.add("dataschema",function(A){},"@VERSION@",{use:["dataschema-base","dataschema-json","dataschema-xml"]});