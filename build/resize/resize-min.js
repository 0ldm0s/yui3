YUI.add("resize-base",function(N){var P=N.Lang,b=P.isArray,an=P.isBoolean,ar=P.isString,ak=P.trim,k=N.Array.indexOf,W=".",q=",",p=" ",F="{handle}",o="active",I="activeHandle",z="activeHandleNode",u="all",ad="autoHide",ai="bottom",ae="className",ah="cursor",Z="dragCursor",v="handle",H="handles",V="hidden",s="inner",a="left",G="margin",n="node",y="nodeName",O="none",C="offsetHeight",aq="offsetWidth",e="parentNode",l="position",aj="proxy",d="proxyNode",j="relative",ac="resize",m="resizing",g="right",aw="static",i="top",af="wrap",at="wrapper",aa="wrapTypes",D="resize:mouseUp",r="resize:resize",w="resize:align",E="resize:end",M="resize:start",Q="t",av="tr",S="r",am="br",ab="b",ao="bl",X="l",ax="tl",J=function(B){return(B instanceof N.Node);},ay=function(B){return v+B.toUpperCase();},au=function(){return Array.prototype.slice.call(arguments).join(p);},K=N.cached(function(B){return B.substring(0,1).toUpperCase()+B.substring(1);}),x=N.ClassNameManager.getClassName,al=x(ac),ag=x(ac,v),U=x(ac,v,o),f=x(ac,v,s),A=x(ac,v,s,F),az=x(ac,v,F),c=x(ac,V,H),t=x(ac,aj),ap=x(ac,at);function h(){h.superclass.constructor.apply(this,arguments);}N.mix(h,{NAME:ac,ATTRS:{activeHandle:{value:null,validator:ar},activeHandleNode:{value:null,validator:J},autoHide:{value:false,validator:an},handles:{setter:"_setHandles",value:u},node:{setter:N.one},proxy:{value:false,validator:an},proxyNode:{setter:N.one,valueFn:function(){return N.Node.create(this.PROXY_TEMPLATE);}},resizing:{value:false,validator:an},wrap:{setter:"_setWrap",value:false,validator:an},wrapTypes:{readOnly:true,value:/^canvas|textarea|input|select|button|img|iframe|table|embed$/i},wrapper:{setter:"_setWrapper",value:null,writeOnce:true}}});N.Resize=N.extend(h,N.Base,{ALL_HANDLES:[Q,av,S,am,ab,ao,X,ax],REGEX_CHANGE_HEIGHT:/^(t|tr|b|bl|br|tl)$/i,REGEX_CHANGE_LEFT:/^(tl|l|bl)$/i,REGEX_CHANGE_TOP:/^(tl|t|tr)$/i,REGEX_CHANGE_WIDTH:/^(bl|br|l|r|tl|tr)$/i,WRAP_TEMPLATE:'<div class="'+ap+'"></div>',PROXY_TEMPLATE:'<div class="'+t+'"></div>',HANDLE_TEMPLATE:'<div class="'+au(ag,az)+'">'+'<div class="'+au(f,A)+'">&nbsp;</div>'+"</div>",changeHeightHandles:false,changeLeftHandles:false,changeTopHandles:false,changeWidthHandles:false,delegate:null,info:null,lastInfo:null,originalInfo:null,initializer:function(){var B=this;B.info={};B.originalInfo={};B.get(n).addClass(al);B.renderer();},renderUI:function(){var B=this;B._renderHandles();},bindUI:function(){var B=this;B._createEvents();B._bindDD();B._bindHandle();},syncUI:function(){var B=this;B._setHideHandlesUI(B.get(ad));},destructor:function(){var B=this,R=B.get(n),T=B.get(at),L=T.get(e);N.Event.purgeElement(T,true);B.eachHandle(function(Y){B.delegate.dd.destroy();Y.remove(true);});if(B.get(af)){B._copyStyles(T,R);if(L){L.insertBefore(R,T);}T.remove(true);}R.removeClass(al);R.removeClass(c);},renderer:function(){this.renderUI();this.bindUI();this.syncUI();},eachHandle:function(L){var B=this;N.each(B.get(H),function(Y,R){var T=B.get(ay(Y));L.apply(B,[T,Y,R]);});},_bindDD:function(){var B=this;B.delegate=new N.DD.Delegate({bubbleTargets:B,container:B.get(at),dragConfig:{clickPixelThresh:0,clickTimeThresh:0,useShim:true,move:false},nodes:W+ag,target:false});B.on("drag:drag",B._handleResizeEvent);B.on("drag:dropmiss",B._handleMouseUpEvent);B.on("drag:end",B._handleResizeEndEvent);B.on("drag:start",B._handleResizeStartEvent);},_bindHandle:function(){var B=this,L=B.get(at);L.on("mouseenter",N.bind(B._onWrapperMouseEnter,B));L.on("mouseleave",N.bind(B._onWrapperMouseLeave,B));L.delegate("mouseenter",N.bind(B._onHandleMouseEnter,B),W+ag);L.delegate("mouseleave",N.bind(B._onHandleMouseLeave,B),W+ag);},_createEvents:function(){var B=this,L=function(R,T){B.publish(R,{defaultFn:T,queuable:false,emitFacade:true,bubbles:true,prefix:ac});};L(M,this._defResizeStartFn);L(r,this._defResizeFn);L(w,this._defResizeAlignFn);L(E,this._defResizeEndFn);L(D,this._defMouseUpFn);},_renderHandles:function(){var B=this,L=B.get(at);B.eachHandle(function(R){L.append(R);});},_renderProxy:function(){var B=this,L=B.get(d);if(!L.inDoc()){B.get(at).get(e).append(L.hide());}},_buildHandle:function(L){var B=this;return N.Node.create(N.substitute(B.HANDLE_TEMPLATE,{handle:L}));},_checkSize:function(aA,L){var B=this,Y=B.info,T=B.originalInfo,R=(aA==C)?i:a;Y[aA]=L;if(((R==a)&&B.changeLeftHandles)||((R==i)&&B.changeTopHandles)){Y[R]=T[R]+T[aA]-L;}},_copyStyles:function(T,Y){var B=T.getStyle(l).toLowerCase(),L={},R;if(B==aw){B=j;}R={position:B};N.each([i,a],function(aA){L[aA]=Y.getStyle(aA);R[aA]=T.getStyle(aA);});N.each([i,g,ai,a],function(aB){var aA=G+K(aB);L[aA]=Y.getStyle(aA);R[aA]=T.getStyle(aA);});Y.setStyles(R);T.setStyles(L);T.setStyles({margin:0});Y.set(C,T.get(C));Y.set(aq,T.get(aq));},_extractHandleName:N.cached(function(R){var L=R.get(ae),B=L.match(new RegExp(x(ac,v,"(\\w{1,2})\\b")));return B?B[1]:null;}),_getInfo:function(Y,B){var aA,aC=B.dragEvent.target,aB=Y.getXY(),T=aB[0],R=aB[1],L=Y.get(C),aD=Y.get(aq);if(B){aA=(aC.actXY.length?aC.actXY:aC.lastXY);}return{actXY:aA,bottom:(R+L),left:T,offsetHeight:L,offsetWidth:aD,right:(T+aD),top:R};},_resize:function(){var B=this,T=B.get(I),aA=B.info,Y=B.originalInfo,R=aA.actXY[0]-Y.actXY[0],L=aA.actXY[1]-Y.actXY[1],aB={t:function(){aA.top=Y.top+L;aA.offsetHeight=Y.offsetHeight-L;},r:function(){aA.offsetWidth=Y.offsetWidth+R;},l:function(){aA.left=Y.left+R;aA.offsetWidth=Y.offsetWidth-R;},b:function(){aA.offsetHeight=Y.offsetHeight+L;},tr:function(){this.t();this.r();},br:function(){this.b();this.r();},tl:function(){this.t();this.l();},bl:function(){this.b();this.l();}};aB[T](R,L);},_setOffset:function(R,L,B){R.set(aq,L);R.set(C,B);},_syncUI:function(){var B=this,R=B.info,T=B.get(at),L=B.get(n);B._setOffset(T,R.offsetWidth,R.offsetHeight);if(B.changeLeftHandles||B.changeTopHandles){T.setXY([R.left,R.top]);}if(!T.compareTo(L)){B._setOffset(L,R.offsetWidth,R.offsetHeight);}if(N.UA.webkit){L.setStyle(ac,O);}},_syncProxyUI:function(){var B=this,T=B.info,R=B.get(z),L=B.get(d),Y=R.getStyle(ah);L.show().setStyle(ah,Y);
B.delegate.dd.set(Z,Y);B._setOffset(L,T.offsetWidth,T.offsetHeight);L.setXY([T.left,T.top]);},_updateChangeHandleInfo:function(L){var B=this;B.changeHeightHandles=B.REGEX_CHANGE_HEIGHT.test(L);B.changeLeftHandles=B.REGEX_CHANGE_LEFT.test(L);B.changeTopHandles=B.REGEX_CHANGE_TOP.test(L);B.changeWidthHandles=B.REGEX_CHANGE_WIDTH.test(L);},_updateInfo:function(L){var B=this;B.info=B._getInfo(B.get(at),L);},_setActiveHandlesUI:function(R){var B=this,L=B.get(z);if(L){if(R){B.eachHandle(function(T){T.removeClass(U);});L.addClass(U);}else{L.removeClass(U);}}},_setHandles:function(R){var B=this,L=[];if(b(R)){L=R;}else{if(ar(R)){if(R.toLowerCase()==u){L=B.ALL_HANDLES;}else{N.each(R.split(q),function(Y,T){var aA=ak(Y);if(k(B.ALL_HANDLES,aA)>-1){L.push(aA);}});}}}return L;},_setHideHandlesUI:function(L){var B=this,R=B.get(at);if(!B.get(m)){if(L){R.addClass(c);}else{R.removeClass(c);}}},_setWrap:function(T){var B=this,R=B.get(n),Y=R.get(y),L=B.get(aa);if(L.test(Y)){T=true;}return T;},_setWrapper:function(){var B=this,R=B.get(n),L=R.get(e),T=R;if(B.get(af)){T=N.Node.create(B.WRAP_TEMPLATE);if(L){L.insertBefore(T,R);}T.append(R);B._copyStyles(R,T);R.setStyles({position:aw,left:0,top:0});}return T;},_defMouseUpFn:function(L){var B=this;B.set(m,false);},_defResizeFn:function(L){var B=this;B._handleResizeAlignEvent(L.dragEvent);if(B.get(aj)){B._syncProxyUI();}else{B._syncUI();}},_defResizeAlignFn:function(L){var B=this,R;B.lastInfo=B.info;B._updateInfo(L);R=B.info;B._resize();if(!B.con){if(R.offsetHeight<=15){B._checkSize(C,15);}if(R.offsetWidth<=15){B._checkSize(aq,15);}}},_defResizeEndFn:function(R){var B=this,L=R.dragEvent.target;L.actXY=[];if(B.get(aj)){B._syncProxyUI();B.get(d).hide();}B._syncUI();B.set(I,null);B.set(z,null);B._setActiveHandlesUI(false);},_defResizeStartFn:function(L){var B=this;B.set(m,true);B.originalInfo=B._getInfo(B.get(at),L);B._updateInfo(L);if(B.get(aj)){B._renderProxy();}},_handleMouseUpEvent:function(B){this.fire(D,{dragEvent:B,info:this.info});},_handleResizeEvent:function(B){this.fire(r,{dragEvent:B,info:this.info});},_handleResizeAlignEvent:function(B){this.fire(w,{dragEvent:B,info:this.info});},_handleResizeEndEvent:function(B){this.fire(E,{dragEvent:B,info:this.info});},_handleResizeStartEvent:function(B){this.fire(M,{dragEvent:B,info:this.info});},_onWrapperMouseEnter:function(L){var B=this;if(B.get(ad)){B._setHideHandlesUI(false);}},_onWrapperMouseLeave:function(L){var B=this;if(B.get(ad)){B._setHideHandlesUI(true);}},_onHandleMouseEnter:function(R){var B=this,L=R.currentTarget,T=B._extractHandleName(L);if(!B.get(m)){B.set(I,T);B.set(z,L);B._setActiveHandlesUI(true);B._updateChangeHandleInfo(T);}},_onHandleMouseLeave:function(L){var B=this;if(!B.get(m)){B._setActiveHandlesUI(false);}}});N.each(N.Resize.prototype.ALL_HANDLES,function(L,B){N.Resize.ATTRS[ay(L)]={setter:function(){return this._buildHandle(L);},value:null,writeOnce:true};});},"@VERSION@",{skinnable:true,requires:["base","widget","substitute","event","oop","dd-drag","dd-delegate","dd-drop"]});YUI.add("resize-constrain",function(c){var j=c.Lang,p=j.isBoolean,t=j.isNumber,r=j.isString,z=function(G){return(G instanceof c.Node);},C="borderBottomWidth",g="borderLeftWidth",y="borderRightWidth",k="borderTopWidth",n="bottom",m="con",D="constrain",E="host",s="left",i="maxHeight",v="maxWidth",a="minHeight",l="minWidth",F="node",b="offsetHeight",o="offsetWidth",e="preserveRatio",x="region",u="resizeConstrained",q="right",f="tickX",d="tickY",w="top",B="view",A="viewportRegion";function h(){h.superclass.constructor.apply(this,arguments);}c.mix(h,{NAME:u,NS:m,ATTRS:{constrain:{setter:function(G){if(G&&(z(G)||r(G)||G.nodeType)){G=c.one(G);}return G;}},minHeight:{value:15,validator:t},minWidth:{value:15,validator:t},maxHeight:{value:Infinity,validator:t},maxWidth:{value:Infinity,validator:t},preserveRatio:{value:false,validator:p},tickX:{value:false},tickY:{value:false}}});c.extend(h,c.Plugin.Base,{constrainBorderInfo:null,initializer:function(){var G=this,H=G.get(E);G.constrainBorderInfo={bottom:0,left:0,right:0,top:0};H.delegate.dd.plug(c.Plugin.DDConstrained,{tickX:G.get(f),tickY:G.get(d)});H.after("resize:align",c.bind(G._handleResizeAlignEvent,G));H.on("resize:start",c.bind(G._handleResizeStartEvent,G));},_checkConstrain:function(H,Q,I){var N=this,M,J,K,P,O=N.get(E),G=O.info,L=N._getConstrainRegion();if(L){M=G[H]+G[I];J=L[Q]-N.constrainBorderInfo[Q];if(M>=J){G[I]-=(M-J);}K=G[H];P=L[H]+N.constrainBorderInfo[H];if(K<=P){G[H]+=(P-K);G[I]-=(P-K);}}},_checkHeight:function(){var G=this,I=G.get(E),K=I.info,H=G.get(i),J=G.get(a);G._checkConstrain(w,n,b);if(K.offsetHeight>H){I._checkSize(b,H);}if(K.offsetHeight<J){I._checkSize(b,J);}},_checkRatio:function(){var U=this,N=U.get(E),T=N.info,J=N.originalInfo,M=J.offsetWidth,V=J.offsetHeight,L=J.top,W=J.left,P=J.bottom,S=J.right,I=function(){return(T.offsetWidth/M);},K=function(){return(T.offsetHeight/V);},O=N.changeHeightHandles,G,X,Q,R,H,Y;if(U.get(D)&&N.changeHeightHandles&&N.changeWidthHandles){Q=U._getConstrainRegion();X=U.constrainBorderInfo;G=(Q.bottom-X.bottom)-P;R=W-(Q.left+X.left);H=(Q.right-X.right)-S;Y=L-(Q.top+X.top);if(N.changeLeftHandles&&N.changeTopHandles){O=(Y<R);}else{if(N.changeLeftHandles){O=(G<R);}else{if(N.changeTopHandles){O=(Y<H);}else{O=(G<H);}}}}if(O){T.offsetWidth=M*K();U._checkWidth();T.offsetHeight=V*I();}else{T.offsetHeight=V*I();U._checkHeight();T.offsetWidth=M*K();}if(N.changeTopHandles){T.top=L+(V-T.offsetHeight);}if(N.changeLeftHandles){T.left=W+(M-T.offsetWidth);}c.each(T,function(aa,Z){if(t(aa)){T[Z]=Math.round(aa);}});},_checkRegion:function(){var G=this,H=G.get(E),I=G._getConstrainRegion();return c.DOM.inRegion(null,I,true,H.info);},_checkWidth:function(){var G=this,J=G.get(E),K=J.info,I=G.get(v),H=G.get(l);G._checkConstrain(s,q,o);if(K.offsetWidth<H){J._checkSize(o,H);}if(K.offsetWidth>I){J._checkSize(o,I);}},_getConstrainRegion:function(){var G=this,I=G.get(E),H=I.get(F),K=G.get(D),J=null;if(K){if(K==B){J=H.get(A);}else{if(z(K)){J=K.get(x);
}else{J=K;}}}return J;},_handleResizeAlignEvent:function(I){var G=this,H=G.get(E);G._checkHeight();G._checkWidth();if(G.get(e)){G._checkRatio();}if(G.get(D)&&!G._checkRegion()){H.info=H.lastInfo;}},_handleResizeStartEvent:function(H){var G=this;G._updateConstrainBorderInfo();},_updateConstrainBorderInfo:function(){var H=this,I=H.get(D),G;if(z(I)){G=function(J){return parseFloat(I.getStyle(J))||0;};H.constrainBorderInfo.bottom=G(C);H.constrainBorderInfo.left=G(g);H.constrainBorderInfo.right=G(y);H.constrainBorderInfo.top=G(k);}}});c.namespace("Plugin");c.Plugin.ResizeConstrained=h;},"@VERSION@",{requires:["resize-base","plugin"],skinnable:false});YUI.add("resize",function(a){},"@VERSION@",{use:["resize-base","resize-constrain"]});