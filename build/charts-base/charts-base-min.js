YUI.add("charts-base",function(b,i){var B=b.config,w=B.win,g=B.doc,r=b.Lang,n=r.isString,l,q,v,a,c=b.ClassNameManager.getClassName,o=c("seriesmarker"),s,D,x,A,u;s=function(E){s.superclass.constructor.apply(this,arguments);};s.NAME="shapeGroup";b.extend(s,b.Path,{_draw:function(){var L=this.get("xvalues"),I=this.get("yvalues"),P,O,F,H,W=0,X,T=[],J=this.get("dimensions"),U=J.width,Q=J.height,G=J.radius,K=J.yRadius,R=this.get("id"),E=this.node.className,V=r.isArray(U),S=r.isArray(Q),M=r.isArray(G),N=r.isArray(K);if(L&&I&&L.length>0){this.clear();X=L.length;for(;W<X;++W){P=L[W];O=I[W];F=M?G[W]:G;H=N?K[W]:K;if(!isNaN(P)&&!isNaN(O)&&!isNaN(F)){this.drawShape({x:P,y:O,width:V?U[W]:U,height:S?Q[W]:Q,radius:F,yRadius:H});this.closePath();T[W]={id:R+"_"+W,className:E,coords:(P-this._left)+", "+(O-this._top)+", "+G,shape:"circle"};}}this._closePath();}},_getRadiusCollection:function(H){var F=0,E=H.length,G=[];for(;F<E;++F){G[F]=H[F]*0.5;}return G;}});s.ATTRS=b.merge(b.Path.ATTRS,{dimensions:{getter:function(){var I=this._dimensions,G,F,H,E;if(I.hasOwnProperty("radius")){return I;}else{H=I.width;E=I.height;G=r.isArray(H)?this._getRadiusCollection(H):(H*0.5);F=r.isArray(E)?this._getRadiusCollection(E):(E*0.5);return{width:H,height:E,radius:G,yRadius:F};}},setter:function(E){this._dimensions=E;return E;}},xvalues:{getter:function(){return this._xvalues;},setter:function(E){this._xvalues=E;}},yvalues:{getter:function(){return this._yvalues;},setter:function(E){this._yvalues=E;}}});b.ShapeGroup=s;D=function(E){D.superclass.constructor.apply(this,arguments);};D.NAME="circleGroup";b.extend(D,b.ShapeGroup,{drawShape:function(E){this.drawCircle(E.x,E.y,E.radius);}});D.ATTRS=b.merge(b.ShapeGroup.ATTRS,{dimensions:{getter:function(){var I=this._dimensions,G,F,H,E;if(I.hasOwnProperty("radius")){return I;}else{H=I.width;E=I.height;G=r.isArray(H)?this._getRadiusCollection(H):(H*0.5);F=G;return{width:H,height:E,radius:G,yRadius:F};}}}});D.ATTRS=b.ShapeGroup.ATTRS;b.CircleGroup=D;x=function(E){x.superclass.constructor.apply(this,arguments);};x.NAME="rectGroup";b.extend(x,b.ShapeGroup,{drawShape:function(E){this.drawRect(E.x,E.y,E.width,E.height);}});x.ATTRS=b.ShapeGroup.ATTRS;b.RectGroup=x;u=function(E){u.superclass.constructor.apply(this,arguments);};u.NAME="diamondGroup";b.extend(u,b.ShapeGroup,{drawShape:function(E){this.drawDiamond(E.x,E.y,E.width,E.height);}});u.ATTRS=b.ShapeGroup.ATTRS;b.DiamondGroup=u;A=function(E){A.superclass.constructor.apply(this,arguments);};A.NAME="diamondGroup";b.extend(A,b.ShapeGroup,{drawShape:function(E){this.drawEllipse(E.x,E.y,E.width,E.height);}});A.ATTRS=b.ShapeGroup.ATTRS;b.EllipseGroup=A;function t(){}t.ATTRS={styles:{getter:function(){this._styles=this._styles||this._getDefaultStyles();return this._styles;},setter:function(E){this._styles=this._setStyles(E);}},graphic:{}};t.NAME="renderer";t.prototype={_styles:null,_setStyles:function(F){var E=this.get("styles");return this._mergeStyles(F,E);},_mergeStyles:function(F,E){if(!E){E={};}var G=b.merge(E,{});b.Object.each(F,function(J,I,H){if(E.hasOwnProperty(I)&&r.isObject(J)&&!r.isFunction(J)&&!r.isArray(J)){G[I]=this._mergeStyles(J,E[I]);}else{G[I]=J;}},this);return G;},_getDefaultStyles:function(){return{padding:{top:0,right:0,bottom:0,left:0}};}};b.augment(t,b.Attribute);b.Renderer=t;l=function(){};l.prototype={_getDefaultMargins:function(){return{top:0,left:0,right:4,bottom:0};},setTickOffsets:function(){var G=this,I=G.get("styles").majorTicks,F=I.length,E=F*0.5,H=I.display;G.set("topTickOffset",0);G.set("bottomTickOffset",0);switch(H){case"inside":G.set("rightTickOffset",F);G.set("leftTickOffset",0);break;case"outside":G.set("rightTickOffset",0);G.set("leftTickOffset",F);break;case"cross":G.set("rightTickOffset",E);G.set("leftTickOffset",E);break;default:G.set("rightTickOffset",0);G.set("leftTickOffset",0);break;}},drawTick:function(L,M,H){var K=this,E=K.get("styles"),J=E.padding,I=H.length,F={x:J.left,y:M.y},G={x:I+J.left,y:M.y};K.drawLine(L,F,G);},getLineStart:function(){var E=this.get("styles"),I=E.padding,J=E.majorTicks,F=J.length,H=J.display,G={x:I.left,y:0};if(H==="outside"){G.x+=F;}else{if(H==="cross"){G.x+=F/2;}}return G;},getLabelPoint:function(E){return{x:E.x-this.get("leftTickOffset"),y:E.y};},updateMaxLabelSize:function(I,G){var M=this,J=this._labelRotationProps,E=J.rot,H=J.absRot,L=J.sinRadians,F=J.cosRadians,K;if(E===0){K=I;}else{if(H===90){K=G;}else{K=(F*I)+(L*G);}}M._maxLabelSize=Math.max(M._maxLabelSize,K);},getExplicitlySized:function(H){if(this._explicitWidth){var G=this,E=G._explicitWidth,F=G._totalTitleSize,J=G.get("leftTickOffset"),I=H.label.margin.right;G._maxLabelSize=E-(J+I+F);return true;}return false;},positionTitle:function(L){var N=this,E=N._titleBounds,F=N.get("styles").title.margin,I=N._titleRotationProps,M=E.right-E.left,H=L.offsetWidth,G=L.offsetHeight,K=(H*-0.5)+(M*0.5),J=(N.get("height")*0.5)-(G*0.5);I.labelWidth=H;I.labelHeight=G;if(F&&F.left){K+=F.left;}I.x=K;I.y=J;I.transformOrigin=[0.5,0.5];N._rotate(L,I);},positionLabel:function(O,S,Q,J){var R=this,P=R.get("leftTickOffset"),L=this._totalTitleSize,G=S.x+L-P,K=S.y,N=this._labelRotationProps,F=N.rot,I=N.absRot,E=R._maxLabelSize,M=this._labelWidths[J],H=this._labelHeights[J];if(F===0){G-=M;K-=H*0.5;}else{if(F===90){G-=M*0.5;}else{if(F===-90){G-=M*0.5;K-=H;}else{G-=M+(H*I/360);K-=H*0.5;}}}N.labelWidth=M;N.labelHeight=H;N.x=Math.round(E+G);N.y=Math.round(K);this._rotate(O,N);},_setRotationCoords:function(I){var F=I.rot,G=I.absRot,J,H,E=I.labelWidth,K=I.labelHeight;if(F===0){J=E;H=K*0.5;}else{if(F===90){H=0;J=E*0.5;}else{if(F===-90){J=E*0.5;H=K;}else{J=E+(K*G/360);H=K*0.5;}}}I.x-=J;I.y-=H;},_getTransformOrigin:function(E){var F;if(E===0){F=[0,0];}else{if(E===90){F=[0.5,0];}else{if(E===-90){F=[0.5,1];}else{F=[1,0.5];}}}return F;},offsetNodeForTick:function(E){},setCalculatedSize:function(){var J=this,L=this.get("graphic"),I=J.get("styles"),H=I.label,K=J.get("leftTickOffset"),F=J._maxLabelSize,G=this._totalTitleSize,E=Math.round(G+K+F+H.margin.right);
if(this._explicitWidth){E=this._explicitWidth;}this.set("calculatedWidth",E);L.set("x",E-K);}};b.LeftAxisLayout=l;q=function(){};q.prototype={_getDefaultMargins:function(){return{top:0,left:4,right:0,bottom:0};},setTickOffsets:function(){var G=this,I=G.get("styles").majorTicks,F=I.length,E=F*0.5,H=I.display;G.set("topTickOffset",0);G.set("bottomTickOffset",0);switch(H){case"inside":G.set("leftTickOffset",F);G.set("rightTickOffset",0);break;case"outside":G.set("leftTickOffset",0);G.set("rightTickOffset",F);break;case"cross":G.set("rightTickOffset",E);G.set("leftTickOffset",E);break;default:G.set("leftTickOffset",0);G.set("rightTickOffset",0);break;}},drawTick:function(L,M,H){var K=this,E=K.get("styles"),J=E.padding,I=H.length,F={x:J.left,y:M.y},G={x:J.left+I,y:M.y};K.drawLine(L,F,G);},getLineStart:function(){var G=this,E=G.get("styles"),J=E.padding,K=E.majorTicks,F=K.length,I=K.display,H={x:J.left,y:J.top};if(I==="inside"){H.x+=F;}else{if(I==="cross"){H.x+=F/2;}}return H;},getLabelPoint:function(E){return{x:E.x+this.get("rightTickOffset"),y:E.y};},updateMaxLabelSize:function(I,G){var M=this,J=this._labelRotationProps,E=J.rot,H=J.absRot,L=J.sinRadians,F=J.cosRadians,K;if(E===0){K=I;}else{if(H===90){K=G;}else{K=(F*I)+(L*G);}}M._maxLabelSize=Math.max(M._maxLabelSize,K);},getExplicitlySized:function(H){if(this._explicitWidth){var G=this,E=G._explicitWidth,F=this._totalTitleSize,J=G.get("rightTickOffset"),I=H.label.margin.right;G._maxLabelSize=E-(J+I+F);return true;}return false;},positionTitle:function(L){var N=this,E=N._titleBounds,F=N.get("styles").title.margin,I=N._titleRotationProps,H=L.offsetWidth,G=L.offsetHeight,M=E.right-E.left,K=this.get("width")-(H*0.5)-(M*0.5),J=(N.get("height")*0.5)-(G*0.5);I.labelWidth=H;I.labelHeight=G;if(F&&F.right){K-=F.left;}I.x=K;I.y=J;I.transformOrigin=[0.5,0.5];N._rotate(L,I);},positionLabel:function(O,S,Q,J){var R=this,P=R.get("rightTickOffset"),N=Q.label,G=0,F=S.x,K=S.y,M=this._labelRotationProps,E=M.rot,I=M.absRot,L=this._labelWidths[J],H=this._labelHeights[J];if(N.margin&&N.margin.left){G=N.margin.left;}if(E===0){K-=H*0.5;}else{if(E===90){F-=L*0.5;K-=H;}else{if(E===-90){F-=L*0.5;}else{K-=H*0.5;F+=H/2*I/90;}}}F+=G;F+=P;M.labelWidth=L;M.labelHeight=H;M.x=Math.round(F);M.y=Math.round(K);this._rotate(O,M);},_setRotationCoords:function(I){var F=I.rot,G=I.absRot,J=0,H=0,E=I.labelWidth,K=I.labelHeight;if(F===0){H=K*0.5;}else{if(F===90){J=E*0.5;H=K;}else{if(F===-90){J=E*0.5;}else{H=K*0.5;J=K/2*G/90;}}}I.x-=J;I.y-=H;},_getTransformOrigin:function(E){var F;if(E===0){F=[0,0];}else{if(E===90){F=[0.5,1];}else{if(E===-90){F=[0.5,0];}else{F=[0,0.5];}}}return F;},offsetNodeForTick:function(E){var F=this,H=F.get("leftTickOffset"),G=0-H;E.setStyle("left",G);},setCalculatedSize:function(){var I=this,H=I.get("styles"),F=H.label,G=this._totalTitleSize,E=Math.round(I.get("rightTickOffset")+I._maxLabelSize+G+F.margin.left);if(this._explicitWidth){E=this._explicitWidth;}I.set("calculatedWidth",E);I.get("contentBox").setStyle("width",E);}};b.RightAxisLayout=q;v=function(){};v.prototype={_getDefaultMargins:function(){return{top:4,left:0,right:0,bottom:0};},setTickOffsets:function(){var G=this,I=G.get("styles").majorTicks,F=I.length,E=F*0.5,H=I.display;G.set("leftTickOffset",0);G.set("rightTickOffset",0);switch(H){case"inside":G.set("topTickOffset",F);G.set("bottomTickOffset",0);break;case"outside":G.set("topTickOffset",0);G.set("bottomTickOffset",F);break;case"cross":G.set("topTickOffset",E);G.set("bottomTickOffset",E);break;default:G.set("topTickOffset",0);G.set("bottomTickOffset",0);break;}},getLineStart:function(){var E=this.get("styles"),I=E.padding,J=E.majorTicks,F=J.length,H=J.display,G={x:0,y:I.top};if(H==="inside"){G.y+=F;}else{if(H==="cross"){G.y+=F/2;}}return G;},drawTick:function(L,M,H){var K=this,E=K.get("styles"),J=E.padding,I=H.length,F={x:M.x,y:J.top},G={x:M.x,y:I+J.top};K.drawLine(L,F,G);},getLabelPoint:function(E){return{x:E.x,y:E.y+this.get("bottomTickOffset")};},updateMaxLabelSize:function(I,G){var M=this,J=this._labelRotationProps,E=J.rot,H=J.absRot,L=J.sinRadians,F=J.cosRadians,K;if(E===0){K=G;}else{if(H===90){K=I;}else{K=(L*I)+(F*G);}}M._maxLabelSize=Math.max(M._maxLabelSize,K);},getExplicitlySized:function(I){if(this._explicitHeight){var H=this,F=H._explicitHeight,E=H._totalTitleSize,G=H.get("bottomTickOffset"),J=I.label.margin.right;H._maxLabelSize=F-(G+J+E);return true;}return false;},positionTitle:function(M){var N=this,E=N._titleBounds,F=N.get("styles").title.margin,J=N._titleRotationProps,H=E.bottom-E.top,I=M.offsetWidth,G=M.offsetHeight,L=(N.get("width")*0.5)-(I*0.5),K=N.get("height")-G/2-H/2;J.labelWidth=I;J.labelHeight=G;if(F&&F.bottom){K-=F.bottom;}J.x=L;J.y=K;J.transformOrigin=[0.5,0.5];N._rotate(M,J);},positionLabel:function(O,S,Q,J){var R=this,P=R.get("bottomTickOffset"),N=Q.label,G=0,M=R._labelRotationProps,F=M.rot,I=M.absRot,E=Math.round(S.x),K=Math.round(S.y),L=R._labelWidths[J],H=R._labelHeights[J];if(N.margin&&N.margin.top){G=N.margin.top;}if(F>0){K-=H/2*F/90;}else{if(F<0){E-=L;K-=H/2*I/90;}else{E-=L*0.5;}}K+=G;K+=P;M.labelWidth=L;M.labelHeight=H;M.x=E;M.y=K;R._rotate(O,M);},_setRotationCoords:function(I){var F=I.rot,G=I.absRot,E=I.labelWidth,K=I.labelHeight,J,H;if(F>0){J=0;H=K/2*F/90;}else{if(F<0){J=E;H=K/2*G/90;}else{J=E*0.5;H=0;}}I.x-=J;I.y-=H;},_getTransformOrigin:function(E){var F;if(E>0){F=[0,0.5];}else{if(E<0){F=[1,0.5];}else{F=[0,0];}}return F;},offsetNodeForTick:function(E){var F=this;F.get("contentBox").setStyle("top",0-F.get("topTickOffset"));},setCalculatedSize:function(){var I=this,H=I.get("styles"),F=H.label,G=I._totalTitleSize,E=Math.round(I.get("bottomTickOffset")+I._maxLabelSize+F.margin.top+G);if(I._explicitHeight){E=I._explicitHeight;}I.set("calculatedHeight",E);}};b.BottomAxisLayout=v;a=function(){};a.prototype={_getDefaultMargins:function(){return{top:0,left:0,right:0,bottom:4};},setTickOffsets:function(){var G=this,I=G.get("styles").majorTicks,F=I.length,E=F*0.5,H=I.display;G.set("leftTickOffset",0);G.set("rightTickOffset",0);
switch(H){case"inside":G.set("bottomTickOffset",F);G.set("topTickOffset",0);break;case"outside":G.set("bottomTickOffset",0);G.set("topTickOffset",F);break;case"cross":G.set("topTickOffset",E);G.set("bottomTickOffset",E);break;default:G.set("topTickOffset",0);G.set("bottomTickOffset",0);break;}},getLineStart:function(){var G=this,E=G.get("styles"),J=E.padding,K=E.majorTicks,F=K.length,I=K.display,H={x:0,y:J.top};if(I==="outside"){H.y+=F;}else{if(I==="cross"){H.y+=F/2;}}return H;},drawTick:function(L,M,H){var K=this,E=K.get("styles"),J=E.padding,I=H.length,F={x:M.x,y:J.top},G={x:M.x,y:I+J.top};K.drawLine(L,F,G);},getLabelPoint:function(E){return{x:E.x,y:E.y-this.get("topTickOffset")};},updateMaxLabelSize:function(I,G){var M=this,J=this._labelRotationProps,E=J.rot,H=J.absRot,L=J.sinRadians,F=J.cosRadians,K;if(E===0){K=G;}else{if(H===90){K=I;}else{K=(L*I)+(F*G);}}M._maxLabelSize=Math.max(M._maxLabelSize,K);},getExplicitlySized:function(H){if(this._explicitHeight){var G=this,F=G._explicitHeight,E=G._totalTitleSize,J=G.get("topTickOffset"),I=H.label.margin.right;G._maxLabelSize=F-(J+I+E);return true;}return false;},positionTitle:function(M){var N=this,E=N._titleBounds,F=N.get("styles").title.margin,J=N._titleRotationProps,I=M.offsetWidth,G=M.offsetHeight,H=E.bottom-E.top,L=(N.get("width")*0.5)-(I*0.5),K=H/2-G/2;J.labelWidth=I;J.labelHeight=G;if(F&&F.top){K+=F.top;}J.x=L;J.y=K;J.transformOrigin=[0.5,0.5];N._rotate(M,J);},positionLabel:function(O,R,P,J){var Q=this,L=this._totalTitleSize,E=Q._maxLabelSize,G=R.x,K=R.y+L+E,N=this._labelRotationProps,F=N.rot,I=N.absRot,M=this._labelWidths[J],H=this._labelHeights[J];if(F===0){G-=M*0.5;K-=H;}else{if(F===90){G-=M;K-=(H*0.5);}else{if(F===-90){K-=(H*0.5);}else{if(F>0){G-=M;K-=H-(H*F/180);}else{K-=H-(H*I/180);}}}}N.x=Math.round(G);N.y=Math.round(K);N.labelWidth=M;N.labelHeight=H;this._rotate(O,N);},_setRotationCoords:function(I){var F=I.rot,G=I.absRot,E=I.labelWidth,K=I.labelHeight,J,H;if(F===0){J=E*0.5;H=K;}else{if(F===90){J=E;H=(K*0.5);}else{if(F===-90){H=(K*0.5);}else{if(F>0){J=E;H=K-(K*F/180);}else{H=K-(K*G/180);}}}}I.x-=J;I.y-=H;},_getTransformOrigin:function(E){var F;if(E===0){F=[0,0];}else{if(E===90){F=[1,0.5];}else{if(E===-90){F=[0,0.5];}else{if(E>0){F=[1,0.5];}else{F=[0,0.5];}}}}return F;},offsetNodeForTick:function(E){},setCalculatedSize:function(){var I=this,L=I.get("graphic"),H=I.get("styles"),G=H.label.margin,K=G.bottom+I._maxLabelSize,F=I._totalTitleSize,J=this.get("topTickOffset"),E=Math.round(J+K+F);if(this._explicitHeight){E=this._explicitWidth;}I.set("calculatedHeight",E);L.set("y",E-J);}};b.TopAxisLayout=a;b.Axis=b.Base.create("axis",b.Widget,[b.Renderer],{_calculatedWidth:0,_calculatedHeight:0,_dataChangeHandler:function(E){if(this.get("rendered")){this._drawAxis();}},_positionChangeHandler:function(E){this._updateGraphic(E.newVal);this._updateHandler();},_updateGraphic:function(E){var F=this.get("graphic");if(E=="none"){if(F){F.destroy();}}else{if(!F){this._setCanvas();}}},_updateHandler:function(E){if(this.get("rendered")){this._drawAxis();}},renderUI:function(){this._updateGraphic(this.get("position"));},syncUI:function(){var I=this._layout,H,G,E,J,F;if(I){H=I._getDefaultMargins();G=this.get("styles");E=G.label.margin;J=G.title.margin;for(F in H){if(H.hasOwnProperty(F)){E[F]=E[F]===undefined?H[F]:E[F];J[F]=J[F]===undefined?H[F]:J[F];}}}this._drawAxis();},_setCanvas:function(){var E=this.get("contentBox"),J=this.get("boundingBox"),I=this.get("position"),G=this._parentNode,F=this.get("width"),H=this.get("height");J.setStyle("position","absolute");J.setStyle("zIndex",2);F=F?F+"px":G.getStyle("width");H=H?H+"px":G.getStyle("height");if(I==="top"||I==="bottom"){E.setStyle("width",F);}else{E.setStyle("height",H);}E.setStyle("position","relative");E.setStyle("left","0px");E.setStyle("top","0px");this.set("graphic",new b.Graphic());this.get("graphic").render(E);},_getDefaultStyles:function(){var E={majorTicks:{display:"inside",length:4,color:"#dad8c9",weight:1,alpha:1},minorTicks:{display:"none",length:2,color:"#dad8c9",weight:1},line:{weight:1,color:"#dad8c9",alpha:1},majorUnit:{determinant:"count",count:11,distance:75},top:"0px",left:"0px",width:"100px",height:"100px",label:{color:"#808080",alpha:1,fontSize:"85%",rotation:0,margin:{top:undefined,right:undefined,bottom:undefined,left:undefined}},title:{color:"#808080",alpha:1,fontSize:"85%",rotation:undefined,margin:{top:undefined,right:undefined,bottom:undefined,left:undefined}},hideOverlappingLabelTicks:false};return b.merge(b.Renderer.prototype._getDefaultStyles(),E);},_handleSizeChange:function(H){var G=H.attrName,J=this.get("position"),F=J=="left"||J=="right",E=this.get("contentBox"),I=J=="bottom"||J=="top";E.setStyle("width",this.get("width"));E.setStyle("height",this.get("height"));if((I&&G=="width")||(F&&G=="height")){this._drawAxis();}},_layoutClasses:{top:a,bottom:v,left:l,right:q},drawLine:function(G,F,E){G.moveTo(F.x,F.y);G.lineTo(E.x,E.y);},_getTextRotationProps:function(I){if(I.rotation===undefined){switch(this.get("position")){case"left":I.rotation=-90;break;case"right":I.rotation=90;break;default:I.rotation=0;break;}}var F=Math.min(90,Math.max(-90,I.rotation)),H=Math.abs(F),G=Math.PI/180,J=parseFloat(parseFloat(Math.sin(H*G)).toFixed(8)),E=parseFloat(parseFloat(Math.cos(H*G)).toFixed(8));return{rot:F,absRot:H,radCon:G,sinRadians:J,cosRadians:E,textAlpha:I.alpha};},_drawAxis:function(){if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;if(this._layout){var M=this.get("styles"),O=M.line,K=M.label,aa=M.majorTicks,E=aa.display!="none",N,H=M.majorUnit,X,V,W=0,Y=this._layout,U,ab,Q,L,Z,F,J=this.get("labelFunction"),G=this.get("labelFunctionScope"),I=this.get("labelFormat"),P=this.get("graphic"),R=this.get("path"),S,T;this._labelWidths=[];this._labelHeights=[];P.set("autoDraw",false);R.clear();R.set("stroke",{weight:O.weight,color:O.color,opacity:O.alpha});this._labelRotationProps=this._getTextRotationProps(K);this._labelRotationProps.transformOrigin=Y._getTransformOrigin(this._labelRotationProps.rot);
Y.setTickOffsets.apply(this);U=this.getLength();Q=Y.getLineStart.apply(this);X=this.getTotalMajorUnits(H);V=this.getMajorUnitDistance(X,U,H);this.set("edgeOffset",this.getEdgeOffset(X,U)*0.5);if(X<1){this._clearLabelCache();}else{N=this.getFirstPoint(Q);this.drawLine(R,Q,this.getLineEnd(N));if(E){S=this.get("tickPath");S.clear();S.set("stroke",{weight:aa.weight,color:aa.color,opacity:aa.alpha});Y.drawTick.apply(this,[S,N,aa]);}this._createLabelCache();this._tickPoints=[];this._maxLabelSize=0;this._totalTitleSize=0;this._titleSize=0;this._setTitle();T=Y.getExplicitlySized.apply(this,[M]);for(;W<X;++W){if(E){Y.drawTick.apply(this,[S,N,aa]);}ab=this.getPosition(N);L=this.getLabel(N,K);this._labels.push(L);this._tickPoints.push({x:N.x,y:N.y});this.get("appendLabelFunction")(L,J.apply(G,[this.getLabelByIndex(W,X),I]));Z=Math.round(L.offsetWidth);F=Math.round(L.offsetHeight);if(!T){this._layout.updateMaxLabelSize.apply(this,[Z,F]);}this._labelWidths.push(Z);this._labelHeights.push(F);N=this.getNextPoint(N,V);}this._clearLabelCache();if(this.get("overlapGraph")){Y.offsetNodeForTick.apply(this,[this.get("contentBox")]);}Y.setCalculatedSize.apply(this);if(this._titleTextField){this._layout.positionTitle.apply(this,[this._titleTextField]);}for(W=0;W<X;++W){Y.positionLabel.apply(this,[this.get("labels")[W],this._tickPoints[W],M,W]);}}}this._drawing=false;if(this._callLater){this._drawAxis();}else{this._updatePathElement();this.fire("axisRendered");}},_setTotalTitleSize:function(M){var K=this._titleTextField,L=K.offsetWidth,I=K.offsetHeight,F=this._titleRotationProps.rot,E,N,G=M.margin,H=this.get("position"),J=new b.Matrix();J.rotate(F);E=J.getContentRect(L,I);if(H=="left"||H=="right"){N=E.right-E.left;if(G){N+=G.left+G.right;}}else{N=E.bottom-E.top;if(G){N+=G.top+G.bottom;}}this._titleBounds=E;this._totalTitleSize=N;},_updatePathElement:function(){var E=this._path,H=this._tickPath,F=false,G=this.get("graphic");if(E){F=true;E.end();}if(H){F=true;H.end();}if(F){G._redraw();}},_setTitle:function(){var G,I,H,J=this.get("title"),F=this._titleTextField,E;if(J!==null&&J!==undefined){H={rotation:"rotation",margin:"margin",alpha:"alpha"};I=this.get("styles").title;if(!F){F=g.createElement("span");F.style.display="block";F.style.whiteSpace="nowrap";F.setAttribute("class","axisTitle");this.get("contentBox").append(F);}else{if(!g.createElementNS){if(F.style.filter){F.style.filter=null;}}}F.style.position="absolute";for(G in I){if(I.hasOwnProperty(G)&&!H.hasOwnProperty(G)){F.style[G]=I[G];}}this.get("appendTitleFunction")(F,J);this._titleTextField=F;this._titleRotationProps=this._getTextRotationProps(I);this._setTotalTitleSize(I);}else{if(F){E=F.parentNode;if(E){E.removeChild(F);}this._titleTextField=null;this._totalTitleSize=0;}}},getLabel:function(J,H){var F,E,I=this._labelCache,G={rotation:"rotation",margin:"margin",alpha:"alpha"};if(I&&I.length>0){E=I.shift();}else{E=g.createElement("span");E.className=b.Lang.trim([E.className,"axisLabel"].join(" "));this.get("contentBox").append(E);}if(!g.createElementNS){if(E.style.filter){E.style.filter=null;}}E.style.display="block";E.style.whiteSpace="nowrap";E.style.position="absolute";for(F in H){if(H.hasOwnProperty(F)&&!G.hasOwnProperty(F)){E.style[F]=H[F];}}return E;},_createLabelCache:function(){if(this._labels){while(this._labels.length>0){this._labelCache.push(this._labels.shift());}}else{this._clearLabelCache();}this._labels=[];},_clearLabelCache:function(){if(this._labelCache){var E=this._labelCache.length,G=0,F;for(;G<E;++G){F=this._labelCache[G];this._removeChildren(F);b.Event.purgeElement(F,true);F.parentNode.removeChild(F);}}this._labelCache=[];},getLineEnd:function(G){var E=this.get("width"),F=this.get("height"),H=this.get("position");if(H==="top"||H==="bottom"){return{x:E,y:G.y};}else{return{x:G.x,y:F};}},getLength:function(){var F,H=this.get("styles"),I=H.padding,E=this.get("width"),G=this.get("height"),J=this.get("position");if(J==="top"||J==="bottom"){F=E-(I.left+I.right);}else{F=G-(I.top+I.bottom);}return F;},getFirstPoint:function(H){var E=this.get("styles"),I=this.get("position"),G=E.padding,F={x:H.x,y:H.y};if(I==="top"||I==="bottom"){F.x+=G.left+this.get("edgeOffset");}else{F.y+=this.get("height")-(G.top+this.get("edgeOffset"));}return F;},getNextPoint:function(E,F){var G=this.get("position");if(G==="top"||G==="bottom"){E.x=E.x+F;}else{E.y=E.y-F;}return E;},getLastPoint:function(){var F=this.get("styles"),G=F.padding,E=this.get("width"),H=this.get("position");if(H==="top"||H==="bottom"){return{x:E-G.right,y:G.top};}else{return{x:G.left,y:G.top};}},getPosition:function(E){var J,H=this.get("height"),G=this.get("styles"),I=G.padding,K=this.get("position"),F=this.get("dataType");if(K==="left"||K==="right"){if(F==="numeric"){J=(H-(I.top+I.bottom))-(E.y-I.top);}else{J=E.y-I.top;}}else{J=E.x-I.left;}return J;},_rotate:function(K,H){var E=H.rot,M=H.x,J=H.y,G,N,L=new b.Matrix(),F=H.transformOrigin||[0,0],I;if(g.createElementNS){L.translate(M,J);L.rotate(E);K.style.MozTransformOrigin=(F[0]*100)+"% "+(F[1]*100)+"%";K.style.MozTransform=L.toCSSText();K.style.webkitTransformOrigin=(F[0]*100)+"% "+(F[1]*100)+"%";K.style.webkitTransform=L.toCSSText();K.style.msTransformOrigin=(F[0]*100)+"% "+(F[1]*100)+"%";K.style.msTransform=L.toCSSText();K.style.OTransformOrigin=(F[0]*100)+"% "+(F[1]*100)+"%";K.style.OTransform=L.toCSSText();}else{N=H.textAlpha;if(r.isNumber(N)&&N<1&&N>-1&&!isNaN(N)){G="progid:DXImageTransform.Microsoft.Alpha(Opacity="+Math.round(N*100)+")";}if(E!==0){L.rotate(E);I=L.getContentRect(H.labelWidth,H.labelHeight);L.init();L.translate(I.left,I.top);L.translate(M,J);this._simulateRotateWithTransformOrigin(L,E,F,H.labelWidth,H.labelHeight);if(G){G+=" ";}else{G="";}G+=L.toFilterText();K.style.left=L.dx+"px";K.style.top=L.dy+"px";}else{K.style.left=M+"px";K.style.top=J+"px";}if(G){K.style.filter=G;}}},_simulateRotateWithTransformOrigin:function(G,F,H,E,I){var K=H[0]*E,J=H[1]*I;K=!isNaN(K)?K:0;J=!isNaN(J)?J:0;G.translate(K,J);G.rotate(F);G.translate(-K,-J);
},getMaxLabelBounds:function(){return this._getLabelBounds(this.getMaximumValue());},getMinLabelBounds:function(){return this._getLabelBounds(this.getMinimumValue());},_getLabelBounds:function(J){var I=this._layout,H=this.get("styles").label,E=new b.Matrix(),F,G=this._getTextRotationProps(H);G.transformOrigin=I._getTransformOrigin(G.rot);F=this.getLabel({x:0,y:0},H);this.get("appendLabelFunction")(F,this.get("labelFunction").apply(this,[J,this.get("labelFormat")]));G.labelWidth=F.offsetWidth;G.labelHeight=F.offsetHeight;this._removeChildren(F);b.Event.purgeElement(F,true);F.parentNode.removeChild(F);G.x=0;G.y=0;I._setRotationCoords(G);E.translate(G.x,G.y);this._simulateRotateWithTransformOrigin(E,G.rot,G.transformOrigin,G.labelWidth,G.labelHeight);return E.getContentRect(G.labelWidth,G.labelHeight);},_removeChildren:function(E){if(E.hasChildNodes()){var F;while(E.firstChild){F=E.firstChild;this._removeChildren(F);E.removeChild(F);}}},destructor:function(){var F=this.get("contentBox").getDOMNode(),I=this.get("labels"),H=this.get("graphic"),G,E=I?I.length:0;if(E>0){while(I.length>0){G=I.shift();this._removeChildren(G);F.removeChild(G);G=null;}}if(H){H.destroy();}},_maxLabelSize:0,_setText:function(E,F){E.innerHTML="";if(r.isNumber(F)){F=F+"";}else{if(!F){F="";}}if(n(F)){F=g.createTextNode(F);}E.appendChild(F);}},{ATTRS:{width:{lazyAdd:false,getter:function(){if(this._explicitWidth){return this._explicitWidth;}return this._calculatedWidth;},setter:function(E){this._explicitWidth=E;return E;}},height:{lazyAdd:false,getter:function(){if(this._explicitHeight){return this._explicitHeight;}return this._calculatedHeight;},setter:function(E){this._explicitHeight=E;return E;}},calculatedWidth:{getter:function(){return this._calculatedWidth;},setter:function(E){this._calculatedWidth=E;return E;}},calculatedHeight:{getter:function(){return this._calculatedHeight;},setter:function(E){this._calculatedHeight=E;return E;}},edgeOffset:{value:0},graphic:{},path:{readOnly:true,getter:function(){if(!this._path){var E=this.get("graphic");if(E){this._path=E.addShape({type:"path"});}}return this._path;}},tickPath:{readOnly:true,getter:function(){if(!this._tickPath){var E=this.get("graphic");if(E){this._tickPath=E.addShape({type:"path"});}}return this._tickPath;}},node:{},position:{setter:function(F){var E=this._layoutClasses[F];if(F&&F!="none"){this._layout=new E();}return F;}},topTickOffset:{value:0},bottomTickOffset:{value:0},leftTickOffset:{value:0},rightTickOffset:{value:0},labels:{readOnly:true,getter:function(){return this._labels;}},tickPoints:{readOnly:true,getter:function(){if(this.get("position")=="none"){return this.get("styles").majorUnit.count;}return this._tickPoints;}},overlapGraph:{value:true,validator:function(E){return r.isBoolean(E);}},labelFunctionScope:{},maxLabelSize:{getter:function(){return this._maxLabelSize;},setter:function(E){this._maxLabelSize=E;return E;}},title:{value:null},labelFunction:{value:function(F,E){return F;}},appendLabelFunction:{valueFn:function(){return this._setText;}},appendTitleFunction:{valueFn:function(){return this._setText;}}}});b.AxisType=b.Base.create("baseAxis",b.Axis,[],{initializer:function(){this.after("dataReady",b.bind(this._dataChangeHandler,this));this.after("dataUpdate",b.bind(this._dataChangeHandler,this));this.after("minimumChange",b.bind(this._keyChangeHandler,this));this.after("maximumChange",b.bind(this._keyChangeHandler,this));this.after("keysChange",this._keyChangeHandler);this.after("dataProviderChange",this._dataProviderChangeHandler);this.after("alwaysShowZeroChange",this._keyChangeHandler);this.after("roundingMethodChange",this._keyChangeHandler);},bindUI:function(){this.after("stylesChange",this._updateHandler);this.after("overlapGraphChange",this._updateHandler);this.after("positionChange",this._positionChangeHandler);this.after("widthChange",this._handleSizeChange);this.after("heightChange",this._handleSizeChange);this.after("calculatedWidthChange",this._handleSizeChange);this.after("calculatedHeightChange",this._handleSizeChange);},_dataProviderChangeHandler:function(H){var E=this.get("keyCollection").concat(),G=this.get("keys"),F;if(G){for(F in G){if(G.hasOwnProperty(F)){delete G[F];}}}if(E&&E.length){this.set("keys",E);}},GUID:"yuibaseaxis",_type:null,_setMaximum:null,_dataMaximum:null,_setMinimum:null,_data:null,_updateTotalDataFlag:true,_dataReady:false,addKey:function(E){this.set("keys",E);},_getKeyArray:function(H,I){var G=0,J,F=[],E=I.length;for(;G<E;++G){J=I[G];F[G]=J[H];}return F;},_setDataByKey:function(I,J){var H,K,F=[],G=this._dataClone.concat(),E=G.length;for(H=0;H<E;++H){K=G[H];F[H]=K[I];}this.get("keys")[I]=F;this._updateTotalDataFlag=true;},_updateTotalData:function(){var F=this.get("keys"),E;this._data=[];for(E in F){if(F.hasOwnProperty(E)){this._data=this._data.concat(F[E]);}}this._updateTotalDataFlag=false;},removeKey:function(F){var E=this.get("keys");if(E.hasOwnProperty(F)){delete E[F];this._keyChangeHandler();}},getKeyValueAt:function(F,E){var H=NaN,G=this.get("keys");if(G[F]&&r.isNumber(parseFloat(G[F][E]))){H=G[F][E];}return parseFloat(H);},getDataByKey:function(F){var E=this.get("keys");if(E[F]){return E[F];}return null;},_updateMinAndMax:function(){var J=this.get("data"),F=0,I=0,E,G,H;if(J&&J.length&&J.length>0){E=J.length;F=I=J[0];if(E>1){for(H=1;H<E;H++){G=J[H];if(isNaN(G)){continue;}F=Math.max(G,F);I=Math.min(G,I);}}}this._dataMaximum=F;this._dataMinimum=I;},getTotalMajorUnits:function(){var F,G=this.get("styles").majorUnit,E=this.get("length");if(G.determinant==="count"){F=G.count;}else{if(G.determinant==="distance"){F=(E/G.distance)+1;}}return F;},getMajorUnitDistance:function(E,H,F){var G;if(F.determinant==="count"){G=H/(E-1);}else{if(F.determinant==="distance"){G=F.distance;}}return G;},getEdgeOffset:function(F,E){return 0;},getLabelByIndex:function(I,F){var H=this.get("minimum"),E=this.get("maximum"),J=(E-H)/(F-1),G;F-=1;G=H+(I*J);return G;},_keyChangeHandler:function(E){this._updateMinAndMax();this.fire("dataUpdate");
},_hasDataOverflow:function(){if(this.get("setMin")||this.get("setMax")){return true;}return false;},getMinimumValue:function(){return this.get("minimum");},getMaximumValue:function(){return this.get("maximum");}},{ATTRS:{keys:{value:{},setter:function(I){var G={},F,E,H=this.get("dataProvider");if(r.isArray(I)){E=I.length;for(F=0;F<E;++F){G[I[F]]=this._getKeyArray(I[F],H);}}else{if(r.isString(I)){G=this.get("keys");G[I]=this._getKeyArray(I,H);}else{for(F in I){if(I.hasOwnProperty(F)){G[F]=this._getKeyArray(F,H);}}}}this._updateTotalDataFlag=true;return G;}},roundingMethod:{value:"niceNumber"},type:{readOnly:true,getter:function(){return this._type;}},dataProvider:{setter:function(E){return E;}},dataMaximum:{getter:function(){if(!this._dataMaximum){this._updateMinAndMax();}return this._dataMaximum;}},maximum:{lazyAdd:false,getter:function(){var E=this.get("dataMaximum"),F=this.get("minimum");if(F===0&&E===0){E=10;}if(r.isNumber(this._setMaximum)){E=this._setMaximum;}return parseFloat(E);},setter:function(E){this._setMaximum=parseFloat(E);return E;}},dataMinimum:{getter:function(){if(!this._dataMinimum){this._updateMinAndMax();}return this._dataMinimum;}},minimum:{lazyAdd:false,getter:function(){var E=this.get("dataMinimum");if(r.isNumber(this._setMinimum)){E=this._setMinimum;}return parseFloat(E);},setter:function(E){this._setMinimum=parseFloat(E);return E;}},setMax:{readOnly:true,getter:function(){return r.isNumber(this._setMaximum);}},setMin:{readOnly:true,getter:function(){return r.isNumber(this._setMinimum);}},data:{getter:function(){if(!this._data||this._updateTotalDataFlag){this._updateTotalData();}return this._data;}},keyCollection:{getter:function(){var G=this.get("keys"),F,E=[];for(F in G){if(G.hasOwnProperty(F)){E.push(F);}}return E;},readOnly:true}}});function m(E){m.superclass.constructor.apply(this,arguments);}m.NAME="numericAxis";m.ATTRS={alwaysShowZero:{value:true},labelFunction:{value:function(F,E){if(E){return b.DataType.Number.format(F,E);}return F;}},labelFormat:{value:{prefix:"",thousandsSeparator:"",decimalSeparator:"",decimalPlaces:"0",suffix:""}}};b.extend(m,b.AxisType,{formatLabel:function(F,E){if(E){return b.DataType.Number.format(F,E);}return F;},getTotalByKey:function(H){var I=0,F=this.getDataByKey(H),G=0,J,E=F?F.length:0;for(;G<E;++G){J=parseFloat(F[G]);if(!isNaN(J)){I+=J;}}return I;},_type:"numeric",_getMinimumUnit:function(E,G,F){return this._getNiceNumber(Math.ceil((E-G)/F));},_getNiceNumber:function(G){var I=G,E=Math.ceil(Math.log(I)*0.4342944819032518),H=Math.pow(10,E),F;if(H/2>=I){F=Math.floor((H/2-I)/(Math.pow(10,E-1)/2));I=H/2-F*Math.pow(10,E-1)/2;}else{I=H;}if(!isNaN(I)){return I;}return G;},_updateMinAndMax:function(){var F=this.get("data"),K,E,I,H,G=0,L,M=this.get("setMax"),J=this.get("setMin");if(!M||!J){if(F&&F.length&&F.length>0){I=F.length;for(;G<I;G++){H=F[G];if(isNaN(H)){if(r.isObject(H)){E=K=0;for(L in H){if(H.hasOwnProperty(L)){K=Math.max(H[L],K);E=Math.min(H[L],E);}}}K=M?this._setMaximum:K;E=J?this._setMinimum:E;continue;}if(J){E=this._setMinimum;}else{if(E===undefined){E=H;}else{E=Math.min(H,E);}}if(M){K=this._setMaximum;}else{if(K===undefined){K=H;}else{K=Math.max(H,K);}}this._actualMaximum=K;this._actualMinimum=E;}}this._roundMinAndMax(E,K,J,M);}},_roundMinAndMax:function(K,N,L,Q){var F,W,T=K>=0,H=N>0,V,E,S,M,O,U,R,J=this.getTotalMajorUnits()-1,P=this.get("alwaysShowZero"),G=this.get("roundingMethod"),I=(N-K)/J>=1;if(G){if(G=="niceNumber"){F=this._getMinimumUnit(N,K,J);if(T&&H){if((P||K<F)&&!L){K=0;F=this._getMinimumUnit(N,K,J);}else{K=this._roundDownToNearest(K,F);}if(Q){if(!P){K=N-(F*J);}}else{if(L){N=K+(F*J);}else{N=this._roundUpToNearest(N,F);}}}else{if(H&&!T){if(P){M=Math.round(J/((-1*K)/N+1));M=Math.max(Math.min(M,J-1),1);O=J-M;U=Math.ceil(N/M);R=Math.floor(K/O)*-1;if(L){while(R<U&&O>=0){O--;M++;U=Math.ceil(N/M);R=Math.floor(K/O)*-1;}if(O>0){N=R*M;}else{N=K+(F*J);}}else{if(Q){while(U<R&&M>=0){O++;M--;R=Math.floor(K/O)*-1;U=Math.ceil(N/M);}if(M>0){K=U*O*-1;}else{K=N-(F*J);}}else{F=Math.max(U,R);F=this._getNiceNumber(F);N=F*M;K=F*O*-1;}}}else{if(Q){K=N-(F*J);}else{if(L){N=K+(F*J);}else{K=this._roundDownToNearest(K,F);N=this._roundUpToNearest(N,F);}}}}else{if(L){if(P){N=0;}else{N=K+(F*J);}}else{if(!Q){if(P||N===0||N+F>0){N=0;F=this._getMinimumUnit(N,K,J);K=N-(F*J);}else{K=this._roundDownToNearest(K,F);N=this._roundUpToNearest(N,F);}}else{K=N-(F*J);}}}}}else{if(G=="auto"){if(T&&H){if((P||K<(N-K)/J)&&!L){K=0;}F=(N-K)/J;if(I){F=Math.ceil(F);}N=K+(F*J);}else{if(H&&!T){if(P){M=Math.round(J/((-1*K)/N+1));M=Math.max(Math.min(M,J-1),1);O=J-M;if(I){U=Math.ceil(N/M);R=Math.floor(K/O)*-1;}else{U=N/M;R=K/O*-1;}F=Math.max(U,R);N=F*M;K=F*O*-1;}else{F=(N-K)/J;if(I){F=Math.ceil(F);}K=this._roundDownToNearest(K,F);N=this._roundUpToNearest(N,F);}}else{F=(N-K)/J;if(I){F=Math.ceil(F);}if(P||N===0||N+F>0){N=0;F=(N-K)/J;if(I){Math.ceil(F);}K=N-(F*J);}else{K=this._roundDownToNearest(K,F);N=this._roundUpToNearest(N,F);}}}}else{if(!isNaN(G)&&isFinite(G)){F=G;W=F*J;V=(N-K)>W;S=this._roundDownToNearest(K,F);E=this._roundUpToNearest(N,F);if(Q){K=N-W;}else{if(L){N=K+W;}else{if(T&&H){if(P||S<=0){K=0;}else{K=S;}N=K+W;}else{if(H&&!T){K=S;N=E;}else{if(P||E>=0){N=0;}else{N=E;}K=N-W;}}}}}}}}this._dataMaximum=N;this._dataMinimum=K;},getLabelByIndex:function(I,F){var H=this.get("minimum"),E=this.get("maximum"),K=(E-H)/(F-1),G,J=this.get("roundingMethod");F-=1;if(I===0){G=H;}else{if(I===F){G=E;}else{G=(I*K);if(J=="niceNumber"){G=this._roundToNearest(G,K);}G+=H;}}return parseFloat(G);},_roundToNearest:function(G,F){F=F||1;if(F===0){return G;}var E=Math.round(this._roundToPrecision(G/F,10))*F;return this._roundToPrecision(E,10);},_roundUpToNearest:function(F,E){E=E||1;if(E===0){return F;}return Math.ceil(this._roundToPrecision(F/E,10))*E;},_roundDownToNearest:function(F,E){E=E||1;if(E===0){return F;}return Math.floor(this._roundToPrecision(F/E,10))*E;},_roundToPrecision:function(G,E){E=E||0;var F=Math.pow(10,E);return Math.round(F*G)/F;},_hasDataOverflow:function(){var G,F,E;
if(this.get("setMin")||this.get("setMax")){return true;}G=this.get("roundingMethod");F=this._actualMinimum;E=this._actualMaximum;if(r.isNumber(G)&&((r.isNumber(E)&&E>this._dataMaximum)||(r.isNumber(F)&&F<this._dataMinimum))){return true;}return false;}});b.NumericAxis=m;function e(E){e.superclass.constructor.apply(this,arguments);}e.NAME="stackedAxis";b.extend(e,b.NumericAxis,{_updateMinAndMax:function(){var L=0,F=0,K=0,E=0,I=0,G=0,M,H,N=this.get("keys"),J=this.get("setMin"),O=this.get("setMax");for(M in N){if(N.hasOwnProperty(M)){I=Math.max(I,N[M].length);}}for(;G<I;++G){K=0;E=0;for(M in N){if(N.hasOwnProperty(M)){H=N[M][G];if(isNaN(H)){continue;}if(H>=0){K+=H;}else{E+=H;}}}if(K>0){L=Math.max(L,K);}else{L=Math.max(L,E);}if(E<0){F=Math.min(F,E);}else{F=Math.min(F,K);}}this._actualMaximum=L;this._actualMinimum=F;if(O){L=this._setMaximum;}if(J){F=this._setMinimum;}this._roundMinAndMax(F,L,J,O);}});b.StackedAxis=e;function d(E){d.superclass.constructor.apply(this,arguments);}d.NAME="timeAxis";d.ATTRS={setMax:{readOnly:true,getter:function(){var E=this._getNumber(this._setMaximum);return(r.isNumber(E));}},setMin:{readOnly:true,getter:function(){var E=this._getNumber(this._setMinimum);return(r.isNumber(E));}},maximum:{getter:function(){var E=this._getNumber(this._setMaximum);if(!r.isNumber(E)){E=this._getNumber(this.get("dataMaximum"));}return parseFloat(E);},setter:function(E){this._setMaximum=this._getNumber(E);return E;}},minimum:{getter:function(){var E=this._getNumber(this._setMinimum);if(!r.isNumber(E)){E=this._getNumber(this.get("dataMinimum"));}return parseFloat(E);},setter:function(E){this._setMinimum=this._getNumber(E);return E;}},labelFunction:{value:function(F,E){F=b.DataType.Date.parse(F);if(E){return b.DataType.Date.format(F,{format:E});}return F;}},labelFormat:{value:"%b %d, %y"}};b.extend(d,b.AxisType,{formatLabel:function(F,E){F=b.DataType.Date.parse(F);if(E){return b.DataType.Date.format(F,{format:E});}return F;},GUID:"yuitimeaxis",_dataType:"time",getLabelByIndex:function(J,G){var I=this.get("minimum"),F=this.get("maximum"),E=this.get("position"),K,H;G-=1;K=((F-I)/G)*J;if(E=="bottom"||E=="top"){H=I+K;}else{H=F-K;}return H;},_getKeyArray:function(H,I){var J,F=[],G=0,K,E=I.length;for(;G<E;++G){J=I[G][H];if(r.isDate(J)){K=J.valueOf();}else{K=new Date(J);if(r.isDate(K)){K=K.valueOf();}else{if(!r.isNumber(J)){if(r.isNumber(parseFloat(J))){K=parseFloat(J);}else{if(typeof J!="string"){J=J;}K=new Date(J).valueOf();}}else{K=J;}}}F[G]=K;}return F;},_setDataByKey:function(I,J){var K,F=[],H=this._dataClone.concat(),G,L,E=H.length;for(G=0;G<E;++G){K=H[G][I];if(r.isDate(K)){L=K.valueOf();}else{L=new Date(K);if(r.isDate(L)){L=L.valueOf();}else{if(!r.isNumber(K)){if(r.isNumber(parseFloat(K))){L=parseFloat(K);}else{if(typeof K!="string"){K=K.toString();}L=new Date(K).valueOf();}}else{L=K;}}}F[G]=L;}this.get("keys")[I]=F;this._updateTotalDataFlag=true;},_getNumber:function(E){if(r.isDate(E)){E=E.valueOf();}else{if(!r.isNumber(E)&&E){E=new Date(E).valueOf();}}return E;}});b.TimeAxis=d;function f(E){f.superclass.constructor.apply(this,arguments);}f.NAME="categoryAxis";b.extend(f,b.AxisType,{formatLabel:function(F,E){return F;},_indices:null,GUID:"yuicategoryaxis",_type:"category",_updateMinAndMax:function(){this._dataMaximum=Math.max(this.get("data").length-1,0);this._dataMinimum=0;},_getKeyArray:function(H,I){var G=0,J,F=[],K=[],E=I.length;if(!this._indices){this._indices={};}for(;G<E;++G){J=I[G];F[G]=G;K[G]=J[H];}this._indices[H]=F;return K;},_setDataByKey:function(I){var H,J,F=[],K=[],G=this._dataClone.concat(),E=G.length;if(!this._indices){this._indices={};}for(H=0;H<E;++H){J=G[H];F[H]=H;K[H]=J[I];}this._indices[I]=F;this.get("keys")[I]=K.concat();this._updateTotalDataFlag=true;},getDataByKey:function(F){if(!this._indices){this.get("keys");}var E=this._indices;if(E[F]){return E[F];}return null;},getTotalMajorUnits:function(F,E){return this.get("data").length;},getMajorUnitDistance:function(E,H,F){var G;if(F.determinant==="count"){G=H/E;}else{if(F.determinant==="distance"){G=F.distance;}}return G;},getEdgeOffset:function(F,E){return E/F;},getKeyValueAt:function(F,E){var H=NaN,G=this.get("keys");if(G[F]&&G[F][E]){H=G[F][E];}return H;},getLabelByIndex:function(H,F){var G,I=this.get("data"),E=this.get("position");if(E=="bottom"||E=="top"){G=I[H];}else{G=I[F-(H+1)];}return G;},getMinimumValue:function(){var F=this.get("data"),E=F[0];return E;},getMaximumValue:function(){var G=this.get("data"),E=G.length-1,F=G[E];return F;}});b.CategoryAxis=f;function k(){}k.prototype={getCurveControlPoints:function(H,K){var I=[],G=1,F=H.length-1,E=[],J=[];if(F<1){return null;}I[0]={startx:H[0],starty:K[0],endx:H[1],endy:K[1]};if(F===1){I[0].ctrlx1=(2*H[0]+H[1])/3;I[0].ctrly2=(2*K[0]+K[1])/3;I[0].ctrlx2=2*I[0].ctrlx1-H[0];I[0].ctrly2=2*I[0].ctrly1-K[0];return I;}for(;G<F;++G){I.push({startx:Math.round(H[G]),starty:Math.round(K[G]),endx:Math.round(H[G+1]),endy:Math.round(K[G+1])});E[G]=4*H[G]+2*H[G+1];J[G]=4*K[G]+2*K[G+1];}E[0]=H[0]+(2*H[1]);E[F-1]=(8*H[F-1]+H[F])/2;E=this.getControlPoints(E.concat());J[0]=K[0]+(2*K[1]);J[F-1]=(8*K[F-1]+K[F])/2;J=this.getControlPoints(J.concat());for(G=0;G<F;++G){I[G].ctrlx1=Math.round(E[G]);I[G].ctrly1=Math.round(J[G]);if(G<F-1){I[G].ctrlx2=Math.round(2*H[G+1]-E[G+1]);I[G].ctrly2=Math.round(2*K[G+1]-J[G+1]);}else{I[G].ctrlx2=Math.round((H[F]+E[F-1])/2);I[G].ctrly2=Math.round((K[F]+J[F-1])/2);}}return I;},getControlPoints:function(J){var G=J.length,F=[],I=[],E=2,H=1;F[0]=J[0]/E;for(;H<G;++H){I[H]=1/E;E=(H<G-1?4:3.5)-I[H];F[H]=(J[H]-F[H-1])/E;}for(H=1;H<G;++H){F[G-H-1]-=I[G-H]*F[G-H];}return F;}};b.CurveUtil=k;function j(){}j.prototype={_stacked:true,_stackCoordinates:function(){if(this.get("direction")=="vertical"){this._stackXCoords();}else{this._stackYCoords();}},_stackXCoords:function(){var H=this.get("order"),Q=this.get("type"),S=this.get("graph"),G=S.seriesTypes[Q],K=0,R=this.get("xcoords"),J=this.get("ycoords"),O,N,I,T,L=R.concat(),M,F,E=[],P;if(H>0){M=G[H-1].get("stackedXCoords");
F=G[H-1].get("stackedYCoords");O=M.length;}else{O=R.length;}for(;K<O;K=K+1){if(r.isNumber(R[K])){if(H>0){I=M[K];if(!r.isNumber(I)){T=H;while(T>-1&&!r.isNumber(I)){T=T-1;if(T>-1){I=G[T].get("stackedXCoords")[K];}else{I=this._leftOrigin;}}}R[K]=R[K]+I;}L[K]=R[K];}else{E.push(K);}}this._cleanXNaN(L,J);O=E.length;if(O>0){for(K=0;K<O;K=K+1){P=E[K];N=H>0?M[P]:this._leftOrigin;L[P]=Math.max(L[P],N);}}this.set("stackedXCoords",L);this.set("stackedYCoords",J);},_stackYCoords:function(){var I=this.get("order"),R=this.get("type"),T=this.get("graph"),M=T.get("height"),H=T.seriesTypes[R],L=0,S=this.get("xcoords"),K=this.get("ycoords"),P,O,J,U,F=K.concat(),N,G,E=[],Q;if(I>0){N=H[I-1].get("stackedXCoords");G=H[I-1].get("stackedYCoords");P=G.length;}else{P=K.length;}for(;L<P;L=L+1){if(r.isNumber(K[L])){if(I>0){J=G[L];if(!r.isNumber(J)){U=I;while(U>-1&&!r.isNumber(J)){U=U-1;if(U>-1){J=H[U].get("stackedYCoords")[L];}else{J=this._bottomOrigin;}}}K[L]=J-(M-K[L]);}F[L]=K[L];}else{E.push(L);}}this._cleanYNaN(S,F);P=E.length;if(P>0){for(L=0;L<P;L=L+1){Q=E[L];O=I>0?G[Q]:M;F[Q]=Math.min(F[Q],O);}}this.set("stackedXCoords",S);this.set("stackedYCoords",F);},_cleanXNaN:function(N,K){var Q,P,I,H,O,M,G,E,R=r.isNumber,F,J=0,L=K.length;for(;J<L;++J){O=N[J];M=K[J];if(!R(O)&&J>0&&J<L-1){H=K[J-1];I=this._getPreviousValidCoordValue(N,J);E=K[J+1];G=this._getNextValidCoordValue(N,J);if(R(I)&&R(G)){F=(E-H)/(G-I);N[J]=(M+(F*I)-H)/F;}Q=NaN;P=NaN;}}},_getPreviousValidCoordValue:function(H,G){var I,F=r.isNumber,E=-1;while(!F(I)&&G>E){G=G-1;I=H[G];}return I;},_getNextValidCoordValue:function(H,G){var I,F=r.isNumber,E=H.length;while(!F(I)&&G<E){G=G+1;I=H[G];}return I;},_cleanYNaN:function(N,K){var Q,P,I,H,O,M,G,E,R=r.isNumber,F,J=0,L=N.length;for(;J<L;++J){O=N[J];M=K[J];if(!R(M)&&J>0&&J<L-1){I=N[J-1];H=this._getPreviousValidCoordValue(K,J);G=N[J+1];E=this._getNextValidCoordValue(K,J);if(R(H)&&R(E)){F=(E-H)/(G-I);K[J]=H+((F*O)-(F*I));}Q=NaN;P=NaN;}}}};b.StackingUtil=j;function h(){}h.prototype={_lineDefaults:null,_getGraphic:function(){var E=this.get("graphic")||this.get("graph").get("graphic");if(!this._lineGraphic){this._lineGraphic=E.addShape({type:"path"});}this._lineGraphic.clear();return this._lineGraphic;},_toggleVisible:function(E){if(this._lineGraphic){this._lineGraphic.set("visible",E);}},drawLines:function(){if(this.get("xcoords").length<1){return;}var L=r.isNumber,M,ab,X=this.get("direction"),S,Z,E,H=true,aa,Y,W,T,R,I=this.get("styles").line,U=I.lineType,P=I.color||this._getDefaultColor(this.get("graphOrder"),"line"),N=I.alpha,V=I.dashLength,K=I.gapSpace,J=I.connectDiscontinuousPoints,F=I.discontinuousType,G=I.discontinuousDashLength,Q=I.discontinuousGapSpace,O=this._getGraphic();if(this._stacked){M=this.get("stackedXCoords");ab=this.get("stackedYCoords");}else{M=this.get("xcoords");ab=this.get("ycoords");}S=X==="vertical"?ab.length:M.length;O.set("stroke",{weight:I.weight,color:P,opacity:N});for(R=0;R<S;R=++R){W=M[R];T=ab[R];E=L(W)&&L(T);if(!E){Z=E;continue;}if(H){H=false;O.moveTo(W,T);}else{if(Z){if(U!="dashed"){O.lineTo(W,T);}else{this.drawDashedLine(O,aa,Y,W,T,V,K);}}else{if(!J){O.moveTo(W,T);}else{if(F!="solid"){this.drawDashedLine(O,aa,Y,W,T,G,Q);}else{O.lineTo(W,T);}}}}aa=W;Y=T;Z=true;}O.end();},drawSpline:function(){if(this.get("xcoords").length<1){return;}var O=this.get("xcoords"),I=this.get("ycoords"),Q=this.getCurveControlPoints(O,I),J=Q.length,L,K,F,E,P,N,H=0,R=this.get("styles").line,S=this._getGraphic(),M=R.alpha,G=R.color||this._getDefaultColor(this.get("graphOrder"),"line");S.set("stroke",{weight:R.weight,color:G,opacity:M});S.moveTo(O[0],I[0]);for(;H<J;H=++H){P=Q[H].endx;N=Q[H].endy;L=Q[H].ctrlx1;K=Q[H].ctrlx2;F=Q[H].ctrly1;E=Q[H].ctrly2;S.curveTo(L,F,K,E,P,N);}S.end();},drawDashedLine:function(S,O,T,E,Q,G,F){G=G||10;F=F||10;var I=G+F,L=E-O,P=Q-T,R=Math.sqrt(Math.pow(L,2)+Math.pow(P,2)),J=Math.floor(Math.abs(R/I)),H=Math.atan2(P,L),N=O,M=T,K;L=Math.cos(H)*I;P=Math.sin(H)*I;for(K=0;K<J;++K){S.moveTo(N,M);S.lineTo(N+Math.cos(H)*G,M+Math.sin(H)*G);N+=L;M+=P;}S.moveTo(N,M);R=Math.sqrt((E-N)*(E-N)+(Q-M)*(Q-M));if(R>G){S.lineTo(N+Math.cos(H)*G,M+Math.sin(H)*G);}else{if(R>0){S.lineTo(N+Math.cos(H)*R,M+Math.sin(H)*R);}}S.moveTo(E,Q);},_getLineDefaults:function(){return{alpha:1,weight:6,lineType:"solid",dashLength:10,gapSpace:10,connectDiscontinuousPoints:true,discontinuousType:"solid",discontinuousDashLength:10,discontinuousGapSpace:10};}};b.augment(h,b.Attribute);b.Lines=h;function z(E){var F={area:{getter:function(){return this._defaults||this._getAreaDefaults();},setter:function(H){var G=this._defaults||this._getAreaDefaults();this._defaults=b.merge(G,H);}}};this.addAttrs(F,E);this.get("styles");}z.prototype={_getPath:function(){var E=this._path;if(!E){E=this.get("graph").get("graphic").addShape({type:"path"});this._path=E;}return E;},_toggleVisible:function(E){if(this._path){this._path.set("visible",E);}},drawFill:function(O,J){if(O.length<1){return;}var R=r.isNumber,M=O.length,G=O[0],E=J[0],L=G,K=E,T,Q,F,N=true,I=0,P=this.get("styles").area,S=this._getPath(),H=P.color||this._getDefaultColor(this.get("graphOrder"),"slice");S.clear();S.set("fill",{color:H,opacity:P.alpha});S.set("stroke",{weight:0});for(;I<M;I=++I){T=O[I];Q=J[I];F=R(T)&&R(Q);if(!F){continue;}if(N){this._firstValidX=T;this._firstValidY=Q;N=false;S.moveTo(T,Q);}else{S.lineTo(T,Q);}L=T;K=Q;}this._lastValidX=L;this._lastValidY=K;S.end();},drawAreaSpline:function(){if(this.get("xcoords").length<1){return;}var P=this.get("xcoords"),K=this.get("ycoords"),R=this.getCurveControlPoints(P,K),L=R.length,N,M,H,G,Q,O,J=0,F=P[0],E=K[0],S=this.get("styles").area,T=this._getPath(),I=S.color||this._getDefaultColor(this.get("graphOrder"),"slice");T.set("fill",{color:I,opacity:S.alpha});T.set("stroke",{weight:0});T.moveTo(F,E);for(;J<L;J=++J){Q=R[J].endx;O=R[J].endy;N=R[J].ctrlx1;M=R[J].ctrlx2;H=R[J].ctrly1;G=R[J].ctrly2;T.curveTo(N,H,M,G,Q,O);}if(this.get("direction")==="vertical"){T.lineTo(this._leftOrigin,O);T.lineTo(this._leftOrigin,E);}else{T.lineTo(Q,this._bottomOrigin);
T.lineTo(F,this._bottomOrigin);}T.lineTo(F,E);T.end();},drawStackedAreaSpline:function(){if(this.get("xcoords").length<1){return;}var O=this.get("xcoords"),Z=this.get("ycoords"),N,U=this.get("order"),G=this.get("type"),E=this.get("graph"),H=E.seriesTypes[G],F,R,W,Q,P,Y,X,L,J,V=0,M,K,I=this.get("styles").area,S=this._getPath(),T=I.color||this._getDefaultColor(this.get("graphOrder"),"slice");M=O[0];K=Z[0];N=this.getCurveControlPoints(O,Z);W=N.length;S.set("fill",{color:T,opacity:I.alpha});S.set("stroke",{weight:0});S.moveTo(M,K);for(;V<W;V=++V){L=N[V].endx;J=N[V].endy;Q=N[V].ctrlx1;P=N[V].ctrlx2;Y=N[V].ctrly1;X=N[V].ctrly2;S.curveTo(Q,Y,P,X,L,J);}if(U>0){F=H[U-1].get("xcoords").concat().reverse();R=H[U-1].get("ycoords").concat().reverse();N=this.getCurveControlPoints(F,R);V=0;W=N.length;S.lineTo(F[0],R[0]);for(;V<W;V=++V){L=N[V].endx;J=N[V].endy;Q=N[V].ctrlx1;P=N[V].ctrlx2;Y=N[V].ctrly1;X=N[V].ctrly2;S.curveTo(Q,Y,P,X,L,J);}}else{if(this.get("direction")==="vertical"){S.lineTo(this._leftOrigin,Z[Z.length-1]);S.lineTo(this._leftOrigin,K);}else{S.lineTo(O[O.length-1],this._bottomOrigin);S.lineTo(M,this._bottomOrigin);}}S.lineTo(M,K);S.end();},_defaults:null,_getClosingPoints:function(){var E=this.get("xcoords").concat(),H=this.get("ycoords").concat(),G,F;if(this.get("direction")==="vertical"){F=this._getLastValidIndex(E);G=this._getFirstValidIndex(E);H.push(H[F]);H.push(H[G]);E.push(this._leftOrigin);E.push(this._leftOrigin);}else{F=this._getLastValidIndex(H);G=this._getFirstValidIndex(H);E.push(E[F]);E.push(E[G]);H.push(this._bottomOrigin);H.push(this._bottomOrigin);}E.push(E[0]);H.push(H[0]);return[E,H];},_getHighestValidOrder:function(J,F,E,H){var G=H=="vertical"?"stackedXCoords":"stackedYCoords",I;while(isNaN(I)&&E>-1){E=E-1;if(E>-1){I=J[E].get(G)[F];}}return E;},_getCoordsByOrderAndIndex:function(J,H,E,I){var G,F;if(I=="vertical"){G=E<0?this._leftOrigin:J[E].get("stackedXCoords")[H];F=this.get("stackedYCoords")[H];}else{G=this.get("stackedXCoords")[H];F=E<0?this._bottomOrigin:J[E].get("stackedYCoords")[H];}return[G,F];},_getStackedClosingPoints:function(){var U=this.get("order"),I=this.get("type"),G=this.get("graph"),X=this.get("direction"),L=G.seriesTypes[I],F,P,O=this.get("stackedXCoords"),Y=this.get("stackedYCoords"),W,Q,N,K,J,H,V,T,S,E,M,R;if(U<1){return this._getClosingPoints();}Q=L[U-1];J=Q.get("stackedXCoords").concat();H=Q.get("stackedYCoords").concat();if(X=="vertical"){F=this._getFirstValidIndex(O);P=this._getLastValidIndex(O);N=Q._getFirstValidIndex(J);K=Q._getLastValidIndex(J);}else{F=this._getFirstValidIndex(Y);P=this._getLastValidIndex(Y);N=Q._getFirstValidIndex(H);K=Q._getLastValidIndex(H);}if(K>=F&&N<=P){N=Math.max(F,N);K=Math.min(P,K);J=J.slice(N,K+1);H=H.slice(N,K+1);W=N;}else{W=P;}T=[O[F]];S=[Y[F]];E=F;while((isNaN(M)||M<U-1)&&E<=W){R=M;M=this._getHighestValidOrder(L,E,U,X);if(!isNaN(R)&&M>R){V=this._getCoordsByOrderAndIndex(L,E,R,X);T.push(V[0]);S.push(V[1]);}V=this._getCoordsByOrderAndIndex(L,E,M,X);T.push(V[0]);S.push(V[1]);E=E+1;}if(J&&J.length>0&&K>F&&N<P){T=T.concat(J);S=S.concat(H);M=U-1;}E=Math.max(F,K);U=U-1;M=NaN;while(E<=P){R=M;M=this._getHighestValidOrder(L,E,U,X);if(!isNaN(R)){if(M>R){V=this._getCoordsByOrderAndIndex(L,E,R,X);T.push(V[0]);S.push(V[1]);}else{if(M<R){V=this._getCoordsByOrderAndIndex(L,E-1,M,X);T.push(V[0]);S.push(V[1]);}}}V=this._getCoordsByOrderAndIndex(L,E,M,X);T.push(V[0]);S.push(V[1]);E=E+1;}T.reverse();S.reverse();return[O.concat(T),Y.concat(S)];},_getAreaDefaults:function(){return{};}};b.augment(z,b.Attribute);b.Fills=z;function y(E){var F={markers:{getter:function(){return this._markers;}}};this.addAttrs(F,E);}y.prototype={_plotDefaults:null,drawPlots:function(){if(!this.get("xcoords")||this.get("xcoords").length<1){return;}var O=r.isNumber,V=b.clone(this.get("styles").marker),N=V.width,U=V.height,P=this.get("xcoords"),W=this.get("ycoords"),S=0,T=P.length,Q=W[0],H,K,R=N/2,G=U/2,L,I,F=null,J=null,M=this.get("graphOrder"),E=this.get("groupMarkers");if(E){L=[];I=[];for(;S<T;++S){L.push(parseFloat(P[S]-R));I.push(parseFloat(W[S]-G));}this._createGroupMarker({xvalues:L,yvalues:I,fill:V.fill,border:V.border,dimensions:{width:N,height:U},graphOrder:M,shape:V.shape});return;}if(r.isArray(V.fill.color)){F=V.fill.color.concat();}if(r.isArray(V.border.color)){J=V.border.color.concat();}this._createMarkerCache();for(;S<T;++S){Q=parseFloat(W[S]-G);H=parseFloat(P[S]-R);if(!O(H)||!O(Q)){this._markers.push(null);continue;}if(F){V.fill.color=F[S%F.length];}if(J){V.border.color=J[S%J.length];}V.x=H;V.y=Q;K=this.getMarker(V,M,S);}this._clearMarkerCache();},_groupShapes:{circle:b.CircleGroup,rect:b.RectGroup,ellipse:b.EllipseGroup,diamond:b.DiamondGroup},_getGroupShape:function(E){if(r.isString(E)){E=this._groupShapes[E];}return E;},_getPlotDefaults:function(){var E={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:1,alpha:1},width:10,height:10,shape:"circle"};E.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");E.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return E;},_markers:null,_markerCache:null,getMarker:function(I,E,H){var F,G=I.border;I.id=this.get("chart").get("id")+"_"+E+"_"+H;G.opacity=G.alpha;I.stroke=G;I.fill.opacity=I.fill.alpha;if(this._markerCache.length>0){while(!F){if(this._markerCache.length<1){F=this._createMarker(I,E,H);break;}F=this._markerCache.shift();}F.set(I);}else{F=this._createMarker(I,E,H);}this._markers.push(F);return F;},_createMarker:function(I,E,H){var J=this.get("graphic"),G,F=b.clone(I);J.set("autoDraw",false);F.type=F.shape;G=J.addShape(F);G.addClass(o);return G;},_createMarkerCache:function(){if(this._groupMarker){this._groupMarker.destroy();this._groupMarker=null;}if(this._markers&&this._markers.length>0){this._markerCache=this._markers.concat();}else{this._markerCache=[];}this._markers=[];},_createGroupMarker:function(I){var F,J=this.get("markers"),H=I.border,K,E,G;if(J&&J.length>0){while(J.length>0){F=J.shift();F.destroy();}this.set("markers",[]);}H.opacity=H.alpha;
E={id:this.get("chart").get("id")+"_"+I.graphOrder,stroke:H,fill:I.fill,dimensions:I.dimensions,xvalues:I.xvalues,yvalues:I.yvalues};E.fill.opacity=I.fill.alpha;G=this._getGroupShape(I.shape);if(G){E.type=G;}if(I.hasOwnProperty("radius")&&!isNaN(I.radius)){E.dimensions.radius=I.radius;}if(this._groupMarker){this._groupMarker.destroy();}K=this.get("graphic");K.set("autoDraw",true);this._groupMarker=K.addShape(E);},_toggleVisible:function(I){var F,H=this.get("markers"),G=0,E;if(H){E=H.length;for(;G<E;++G){F=H[G];if(F){F.set("visible",I);}}}},_clearMarkerCache:function(){var E;while(this._markerCache.length>0){E=this._markerCache.shift();if(E){E.destroy();}}},updateMarkerState:function(K,I){if(this._markers&&this._markers[I]){var M,J,N=b.clone(this.get("styles").marker),E=this._getState(K),L=this.get("xcoords"),H=this.get("ycoords"),G=this._markers[I],F=E=="off"||!N[E]?N:N[E];F.fill.color=this._getItemColor(F.fill.color,I);F.border.color=this._getItemColor(F.border.color,I);F.stroke=F.border;G.set(F);M=F.width;J=F.height;G.set("x",(L[I]-M/2));G.set("y",(H[I]-J/2));G.set("visible",this.get("visible"));}},_getItemColor:function(F,E){if(r.isArray(F)){return F[E%F.length];}return F;},_setStyles:function(E){E=this._parseMarkerStyles(E);return b.Renderer.prototype._setStyles.apply(this,[E]);},_parseMarkerStyles:function(F){if(F.marker){var E=this._getPlotDefaults();F.marker=this._mergeStyles(F.marker,E);if(F.marker.over){F.marker.over=this._mergeStyles(F.marker.over,F.marker);}if(F.marker.down){F.marker.down=this._mergeStyles(F.marker.down,F.marker);}}return F;},_getState:function(E){var F;switch(E){case"mouseout":F="off";break;case"mouseover":F="over";break;case"mouseup":F="over";break;case"mousedown":F="down";break;}return F;},_stateSyles:null};b.augment(y,b.Attribute);b.Plots=y;function C(){}C.prototype={drawSeries:function(){if(this.get("xcoords").length<1){return;}var ag=b.clone(this.get("styles").marker),W,S,O=this.get("xcoords"),P=this.get("ycoords"),ah=0,L=O.length,H=P[0],an=this.get("type"),ab=this.get("graph"),Z=ab.seriesTypes[an],F=Z.length,ae=0,aj=0,ac=0,ad,U,V=this.get("order"),al=this.get("graphOrder"),G,am,Q,R,X,ai=null,E=null,Y=[],I=[],M,N,T,ak,aa={width:[],height:[]},K=[],J=[],af=this.get("groupMarkers");if(r.isArray(ag.fill.color)){ai=ag.fill.color.concat();}if(r.isArray(ag.border.color)){E=ag.border.color.concat();}if(this.get("direction")=="vertical"){Q="height";R="width";}else{Q="width";R="height";}W=ag[Q];S=ag[R];this._createMarkerCache();for(;ah<F;++ah){U=Z[ah];ae+=U.get("styles").marker[Q];if(V>ah){ac=ae;}}aj=L*ae;this._maxSize=ab.get(Q);if(aj>this._maxSize){ad=ab.get(Q)/aj;ae*=ad;ac*=ad;W*=ad;W=Math.max(W,1);this._maxSize=W;}ac-=ae/2;for(ah=0;ah<L;++ah){M=O[ah]-ae/2;N=M+ae;T=P[ah]-ae/2;ak=T+ae;Y.push({start:M,end:N});I.push({start:T,end:ak});if(isNaN(O[ah])||isNaN(P[ah])){this._markers.push(null);continue;}X=this._getMarkerDimensions(O[ah],P[ah],S,ac);if(!isNaN(X.calculatedSize)&&X.calculatedSize>0){H=X.top;G=X.left;if(af){aa[Q][ah]=W;aa[R][ah]=X.calculatedSize;K.push(G);J.push(H);}else{ag[Q]=W;ag[R]=X.calculatedSize;ag.x=G;ag.y=H;if(ai){ag.fill.color=ai[ah%ai.length];}if(E){ag.border.color=E[ah%E.length];}am=this.getMarker(ag,al,ah);}}else{if(!af){this._markers.push(null);}}}this.set("xMarkerPlane",Y);this.set("yMarkerPlane",I);if(af){this._createGroupMarker({fill:ag.fill,border:ag.border,dimensions:aa,xvalues:K,yvalues:J,shape:ag.shape});}else{this._clearMarkerCache();}},_defaultFillColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getPlotDefaults:function(){var E={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:12,height:12,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};E.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");E.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return E;}};b.Histogram=C;b.CartesianSeries=b.Base.create("cartesianSeries",b.Base,[b.Renderer],{_xDisplayName:null,_yDisplayName:null,_leftOrigin:null,_bottomOrigin:null,render:function(){this._setCanvas();this.addListeners();this.set("rendered",true);this.validate();},addListeners:function(){var F=this.get("xAxis"),E=this.get("yAxis");if(F){this._xDataReadyHandle=F.after("dataReady",b.bind(this._xDataChangeHandler,this));this._xDataUpdateHandle=F.after("dataUpdate",b.bind(this._xDataChangeHandler,this));}if(E){this._yDataReadyHandle=E.after("dataReady",b.bind(this._yDataChangeHandler,this));this._yDataUpdateHandle=E.after("dataUpdate",b.bind(this._yDataChangeHandler,this));}this._xAxisChangeHandle=this.after("xAxisChange",this._xAxisChangeHandler);this._yAxisChangeHandle=this.after("yAxisChange",this._yAxisChangeHandler);this._stylesChangeHandle=this.after("stylesChange",function(H){var G=this._updateAxisData();if(G){this.draw();}});this._widthChangeHandle=this.after("widthChange",function(H){var G=this._updateAxisData();if(G){this.draw();}});this._heightChangeHandle=this.after("heightChange",function(H){var G=this._updateAxisData();if(G){this.draw();}});this._visibleChangeHandle=this.after("visibleChange",this._handleVisibleChange);},_xAxisChangeHandler:function(F){var E=this.get("xAxis");E.after("dataReady",b.bind(this._xDataChangeHandler,this));E.after("dataUpdate",b.bind(this._xDataChangeHandler,this));},_yAxisChangeHandler:function(F){var E=this.get("yAxis");E.after("dataReady",b.bind(this._yDataChangeHandler,this));E.after("dataUpdate",b.bind(this._yDataChangeHandler,this));},GUID:"yuicartesianseries",_xDataChangeHandler:function(E){var F=this._updateAxisData();if(F){this.draw();}},_yDataChangeHandler:function(E){var F=this._updateAxisData();if(F){this.draw();}},_updateAxisData:function(){var I=this.get("xAxis"),F=this.get("yAxis"),G=this.get("xKey"),E=this.get("yKey"),H,J;if(!I||!F||!G||!E){return false;}J=I.getDataByKey(G);H=F.getDataByKey(E);if(!J||!H){return false;}this.set("xData",J.concat());this.set("yData",H.concat());return true;},validate:function(){if((this.get("xData")&&this.get("yData"))||this._updateAxisData()){this.draw();
}else{this.fire("drawingComplete");}},_setCanvas:function(){var E=this.get("graph"),F=E.get("graphic");this.set("graphic",F);},setAreaData:function(){var V=r.isNumber,aj,ah,I=this.get("graph"),R=I.get("width"),ac=I.get("height"),P=this.get("xAxis"),F=this.get("yAxis"),K=this.get("xData").concat(),af=this.get("yData").concat(),Z,ad,am=P.getEdgeOffset(K.length,R),O=F.getEdgeOffset(af.length,ac),W=this.get("styles").padding,Y=W.left,ag=W.top,M=R-(Y+W.right+am),ab=ac-(ag+W.bottom+O),U=[],al=[],ak=P.get("maximum"),ae=P.get("minimum"),H=F.get("maximum"),E=F.get("minimum"),L=M/(ak-ae),S=ab/(H-E),N,ai=this.get("direction"),aa=0,Q=[],X=[],J=this.get("xMarkerPlaneOffset"),G=this.get("yMarkerPlaneOffset"),T=this.get("graphic");T.set("width",R);T.set("height",ac);N=K.length;am*=0.5;O*=0.5;if(ai==="vertical"){af=af.reverse();}this._leftOrigin=Math.round(((0-ae)*L)+Y+am);this._bottomOrigin=Math.round((ab+ag+O));if(E<0){this._bottomOrigin=this._bottomOrigin-((0-E)*S);}for(;aa<N;++aa){Z=parseFloat(K[aa]);ad=parseFloat(af[aa]);if(V(Z)){aj=(((Z-ae)*L)+Y+am);}else{aj=NaN;}if(V(ad)){ah=((ab+ag+O)-(ad-E)*S);}else{ah=NaN;}U.push(aj);al.push(ah);Q.push({start:aj-J,end:aj+J});X.push({start:ah-G,end:ah+G});}this.set("xcoords",U);this.set("ycoords",al);this.set("xMarkerPlane",Q);this.set("yMarkerPlane",X);this._dataLength=N;},_getFirstValidIndex:function(G){var H,F=-1,E=G.length;while(!r.isNumber(H)&&F<E){F+=1;H=G[F];}return F;},_getLastValidIndex:function(G){var H,F=G.length,E=-1;while(!r.isNumber(H)&&F>E){F-=1;H=G[F];}return F;},draw:function(){var G=this.get("graph"),E=G.get("width"),F=G.get("height");if(this.get("rendered")){if((isFinite(E)&&isFinite(F)&&E>0&&F>0)&&((this.get("xData")&&this.get("yData"))||this._updateAxisData())){if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;this.setAreaData();if(this.get("xcoords")&&this.get("ycoords")){this.drawSeries();}this._drawing=false;if(this._callLater){this.draw();}else{this._toggleVisible(this.get("visible"));this.fire("drawingComplete");}}}},_defaultPlaneOffset:4,_getDefaultStyles:function(){return{padding:{top:0,left:0,right:0,bottom:0}};},_defaultLineColors:["#426ab3","#d09b2c","#000000","#b82837","#b384b5","#ff7200","#779de3","#cbc8ba","#7ed7a6","#007a6c"],_defaultFillColors:["#6084d0","#eeb647","#6c6b5f","#d6484f","#ce9ed1","#ff9f3b","#93b7ff","#e0ddd0","#94ecba","#309687"],_defaultBorderColors:["#205096","#b38206","#000000","#94001e","#9d6fa0","#e55b00","#5e85c9","#adab9e","#6ac291","#006457"],_defaultSliceColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getDefaultColor:function(H,I){var F={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},G=F[I],E=G.length;H=H||0;if(H>=E){H=H%E;}I=I||"fill";return F[I][H];},_handleVisibleChange:function(E){this._toggleVisible(this.get("visible"));},getTotalValues:function(){var E=this.get("valueAxis").getTotalByKey(this.get("valueKey"));return E;},destructor:function(){var E,F=this.get("markers");if(this.get("rendered")){if(this._xDataReadyHandle){this._xDataReadyHandle.detach();}if(this._xDataUpdateHandle){this._xDataUpdateHandle.detach();}if(this._yDataReadyHandle){this._yDataReadyHandle.detach();}if(this._yDataUpdateHandle){this._yDataUpdateHandle.detach();}this._xAxisChangeHandle.detach();this._yAxisChangeHandle.detach();this._stylesChangeHandle.detach();this._widthChangeHandle.detach();this._heightChangeHandle.detach();this._visibleChangeHandle.detach();}while(F&&F.length>0){E=F.shift();if(E&&E instanceof b.Shape){E.destroy();}}if(this._path){this._path.destroy();this._path=null;}if(this._lineGraphic){this._lineGraphic.destroy();this._lineGraphic=null;}if(this._groupMarker){this._groupMarker.destroy();this._groupMarker=null;}}},{ATTRS:{xDisplayName:{getter:function(){return this._xDisplayName||this.get("xKey");},setter:function(E){this._xDisplayName=E.toString();return E;}},yDisplayName:{getter:function(){return this._yDisplayName||this.get("yKey");},setter:function(E){this._yDisplayName=E.toString();return E;}},categoryDisplayName:{lazyAdd:false,getter:function(){return this.get("direction")=="vertical"?this.get("yDisplayName"):this.get("xDisplayName");},setter:function(E){if(this.get("direction")=="vertical"){this._yDisplayName=E;}else{this._xDisplayName=E;}return E;}},valueDisplayName:{lazyAdd:false,getter:function(){return this.get("direction")=="vertical"?this.get("xDisplayName"):this.get("yDisplayName");},setter:function(E){if(this.get("direction")=="vertical"){this._xDisplayName=E;}else{this._yDisplayName=E;}return E;}},type:{value:"cartesian"},order:{},graphOrder:{},xcoords:{},ycoords:{},chart:{readOnly:true,getter:function(){return this.get("graph").get("chart");}},graph:{},xAxis:{},yAxis:{},xKey:{setter:function(E){return E.toString();}},yKey:{setter:function(E){return E.toString();}},xData:{},yData:{},rendered:{value:false},width:{readOnly:true,getter:function(){this.get("graph").get("width");}},height:{readOnly:true,getter:function(){this.get("graph").get("height");}},visible:{value:true},xMarkerPlane:{},yMarkerPlane:{},xMarkerPlaneOffset:{getter:function(){var E=this.get("styles").marker;if(E&&E.width&&isFinite(E.width)){return E.width*0.5;}return this._defaultPlaneOffset;}},yMarkerPlaneOffset:{getter:function(){var E=this.get("styles").marker;if(E&&E.height&&isFinite(E.height)){return E.height*0.5;}return this._defaultPlaneOffset;}},direction:{value:"horizontal"},groupMarkers:{getter:function(){if(this._groupMarkers===undefined){return this.get("graph").get("groupMarkers");}else{return this._groupMarkers;}},setter:function(E){this._groupMarkers=E;return E;}}}});b.MarkerSeries=b.Base.create("markerSeries",b.CartesianSeries,[b.Plots],{drawSeries:function(){this.drawPlots();},_setStyles:function(E){if(!E.marker){E={marker:E};}E=this._parseMarkerStyles(E);return b.MarkerSeries.superclass._mergeStyles.apply(this,[E,this._getDefaultStyles()]);
},_getDefaultStyles:function(){var E=this._mergeStyles({marker:this._getPlotDefaults()},b.MarkerSeries.superclass._getDefaultStyles());return E;}},{ATTRS:{type:{value:"marker"}}});b.LineSeries=b.Base.create("lineSeries",b.CartesianSeries,[b.Lines],{drawSeries:function(){this.drawLines();},_setStyles:function(E){if(!E.line){E={line:E};}return b.LineSeries.superclass._setStyles.apply(this,[E]);},_getDefaultStyles:function(){var E=this._mergeStyles({line:this._getLineDefaults()},b.LineSeries.superclass._getDefaultStyles());return E;}},{ATTRS:{type:{value:"line"}}});b.SplineSeries=b.Base.create("splineSeries",b.LineSeries,[b.CurveUtil,b.Lines],{drawSeries:function(){this.drawSpline();}},{ATTRS:{type:{value:"spline"}}});b.StackedSplineSeries=b.Base.create("stackedSplineSeries",b.SplineSeries,[b.StackingUtil],{setAreaData:function(){b.StackedSplineSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedSpline"}}});b.StackedMarkerSeries=b.Base.create("stackedMarkerSeries",b.MarkerSeries,[b.StackingUtil],{setAreaData:function(){b.StackedMarkerSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedMarker"}}});b.ColumnSeries=b.Base.create("columnSeries",b.MarkerSeries,[b.Histogram],{_getMarkerDimensions:function(F,E,H,I){var G={left:F+I};if(this._bottomOrigin>=E){G.top=E;G.calculatedSize=this._bottomOrigin-G.top;}else{G.top=this._bottomOrigin;G.calculatedSize=E-this._bottomOrigin;}return G;},updateMarkerState:function(G,S){if(this._markers&&this._markers[S]){var M=b.clone(this.get("styles").marker),W,H=this._getState(G),O=this.get("xcoords"),X=this.get("ycoords"),J=this._markers[S],U,E=this.get("graph"),F,K=E.seriesTypes[this.get("type")],T=K.length,N=0,I=0,Q,P=0,L=[],R=this.get("order"),V;W=H=="off"||!M[H]?b.clone(M):b.clone(M[H]);W.fill.color=this._getItemColor(W.fill.color,S);W.border.color=this._getItemColor(W.border.color,S);V=this._getMarkerDimensions(O[S],X[S],M.width,I);W.height=V.calculatedSize;W.width=Math.min(this._maxSize,W.width);J.set(W);for(;P<T;++P){L[P]=O[S]+N;F=K[P].get("styles").marker;N+=Math.min(this._maxSize,F.width);if(R>P){I=N;}I-=N/2;}for(P=0;P<T;++P){U=K[P].get("markers");if(U){Q=U[S];if(Q&&Q!==undefined){Q.set("x",(L[P]-N/2));}}}}}},{ATTRS:{type:{value:"column"}}});b.BarSeries=b.Base.create("barSeries",b.MarkerSeries,[b.Histogram],{_getMarkerDimensions:function(F,E,H,I){var G={top:E+I};if(F>=this._leftOrigin){G.left=this._leftOrigin;G.calculatedSize=F-G.left;}else{G.left=F;G.calculatedSize=this._leftOrigin-F;}return G;},updateMarkerState:function(G,S){if(this._markers&&this._markers[S]){var L=b.clone(this.get("styles").marker),W,H=this._getState(G),N=this.get("xcoords"),X=this.get("ycoords"),J=this._markers[S],U,E=this.get("graph"),K=E.seriesTypes[this.get("type")],T=K.length,F,M=0,I=0,P,O=0,R=[],Q=this.get("order"),V;W=H=="off"||!L[H]?L:L[H];W.fill.color=this._getItemColor(W.fill.color,S);W.border.color=this._getItemColor(W.border.color,S);V=this._getMarkerDimensions(N[S],X[S],L.height,I);W.width=V.calculatedSize;W.height=Math.min(this._maxSize,W.height);J.set(W);for(;O<T;++O){R[O]=X[S]+M;F=K[O].get("styles").marker;M+=Math.min(this._maxSize,F.height);if(Q>O){I=M;}I-=M/2;}for(O=0;O<T;++O){U=K[O].get("markers");if(U){P=U[S];if(P&&P!==undefined){P.set("y",(R[O]-M/2));}}}}}},{ATTRS:{type:{value:"bar"},direction:{value:"vertical"}}});b.AreaSeries=b.Base.create("areaSeries",b.CartesianSeries,[b.Fills],{drawSeries:function(){this.drawFill.apply(this,this._getClosingPoints());},_setStyles:function(E){if(!E.area){E={area:E};}return b.AreaSeries.superclass._setStyles.apply(this,[E]);},_getDefaultStyles:function(){var E=this._mergeStyles({area:this._getAreaDefaults()},b.AreaSeries.superclass._getDefaultStyles());return E;}},{ATTRS:{type:{value:"area"}}});b.AreaSplineSeries=b.Base.create("areaSplineSeries",b.AreaSeries,[b.CurveUtil],{drawSeries:function(){this.drawAreaSpline();}},{ATTRS:{type:{value:"areaSpline"}}});b.StackedAreaSplineSeries=b.Base.create("stackedAreaSplineSeries",b.AreaSeries,[b.CurveUtil,b.StackingUtil],{drawSeries:function(){this._stackCoordinates();this.drawStackedAreaSpline();}},{ATTRS:{type:{value:"stackedAreaSpline"}}});b.ComboSeries=b.Base.create("comboSeries",b.CartesianSeries,[b.Fills,b.Lines,b.Plots],{drawSeries:function(){if(this.get("showAreaFill")){this.drawFill.apply(this,this._getClosingPoints());}if(this.get("showLines")){this.drawLines();}if(this.get("showMarkers")){this.drawPlots();}},_toggleVisible:function(I){var H,F,E,G;if(this.get("showAreaFill")&&this._path){this._path.set("visible",I);}if(this.get("showLines")&&this._lineGraphic){this._lineGraphic.set("visible",I);}if(this.get("showMarkers")){H=this.get("markers");if(H){G=0;E=H.length;for(;G<E;++G){F=H[G];if(F){F.set("visible",I);}}}}},_getDefaultStyles:function(){var E=b.ComboSeries.superclass._getDefaultStyles();E.line=this._getLineDefaults();E.marker=this._getPlotDefaults();E.area=this._getAreaDefaults();return E;}},{ATTRS:{type:{value:"combo"},showAreaFill:{value:false},showLines:{value:true},showMarkers:{value:true},marker:{lazyAdd:false,getter:function(){return this.get("styles").marker;},setter:function(E){this.set("styles",{marker:E});}},line:{lazyAdd:false,getter:function(){return this.get("styles").line;},setter:function(E){this.set("styles",{line:E});}},area:{lazyAdd:false,getter:function(){return this.get("styles").area;},setter:function(E){this.set("styles",{area:E});}}}});b.StackedComboSeries=b.Base.create("stackedComboSeries",b.ComboSeries,[b.StackingUtil],{setAreaData:function(){b.StackedComboSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);},drawSeries:function(){if(this.get("showAreaFill")){this.drawFill.apply(this,this._getStackedClosingPoints());}if(this.get("showLines")){this.drawLines();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"stackedCombo"},showAreaFill:{value:true}}});b.ComboSplineSeries=b.Base.create("comboSplineSeries",b.ComboSeries,[b.CurveUtil],{drawSeries:function(){if(this.get("showAreaFill")){this.drawAreaSpline();
}if(this.get("showLines")){this.drawSpline();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"comboSpline"}}});b.StackedComboSplineSeries=b.Base.create("stackedComboSplineSeries",b.StackedComboSeries,[b.CurveUtil],{drawSeries:function(){if(this.get("showAreaFill")){this.drawStackedAreaSpline();}if(this.get("showLines")){this.drawSpline();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"stackedComboSpline"},showAreaFill:{value:true}}});b.StackedLineSeries=b.Base.create("stackedLineSeries",b.LineSeries,[b.StackingUtil],{setAreaData:function(){b.StackedLineSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedLine"}}});b.StackedAreaSeries=b.Base.create("stackedAreaSeries",b.AreaSeries,[b.StackingUtil],{setAreaData:function(){b.StackedAreaSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);},drawSeries:function(){this.drawFill.apply(this,this._getStackedClosingPoints());}},{ATTRS:{type:{value:"stackedArea"}}});b.StackedColumnSeries=b.Base.create("stackedColumnSeries",b.ColumnSeries,[b.StackingUtil],{drawSeries:function(){if(this.get("xcoords").length<1){return;}var W=r.isNumber,ae=b.clone(this.get("styles").marker),V=ae.width,ad=ae.height,X=this.get("xcoords"),af=this.get("ycoords"),ab=0,ac=X.length,Y=af[0],J=this.get("type"),H=this.get("graph"),S=H.seriesTypes[J],Q,aa=this.get("order"),U=this.get("graphOrder"),K,R,F,P,N,T,Z,G=aa===0,I=ac*V,M={width:[],height:[]},O=[],L=[],E=this.get("groupMarkers");if(r.isArray(ae.fill.color)){F=ae.fill.color.concat();}if(r.isArray(ae.border.color)){P=ae.border.color.concat();}this._createMarkerCache();if(I>this.get("width")){Q=this.width/I;V*=Q;V=Math.max(V,1);}if(!G){N=S[aa-1];T=N.get("negativeBaseValues");Z=N.get("positiveBaseValues");if(!T||!Z){G=true;Z=[];T=[];}}else{T=[];Z=[];}this.set("negativeBaseValues",T);this.set("positiveBaseValues",Z);for(ab=0;ab<ac;++ab){K=X[ab];Y=af[ab];if(!W(Y)||!W(K)){if(G){T[ab]=this._bottomOrigin;Z[ab]=this._bottomOrigin;}this._markers.push(null);continue;}if(G){ad=Math.abs(this._bottomOrigin-Y);if(Y<this._bottomOrigin){Z[ab]=Y;T[ab]=this._bottomOrigin;}else{if(Y>this._bottomOrigin){Z[ab]=this._bottomOrigin;T[ab]=Y;Y-=ad;}else{Z[ab]=Y;T[ab]=Y;}}}else{if(Y>this._bottomOrigin){Y+=(T[ab]-this._bottomOrigin);ad=Y-T[ab];T[ab]=Y;Y-=ad;}else{if(Y<=this._bottomOrigin){Y=Z[ab]-(this._bottomOrigin-Y);ad=Z[ab]-Y;Z[ab]=Y;}}}if(!isNaN(ad)&&ad>0){K-=V/2;if(E){M.width[ab]=V;M.height[ab]=ad;O.push(K);L.push(Y);}else{ae.width=V;ae.height=ad;ae.x=K;ae.y=Y;if(F){ae.fill.color=F[ab%F.length];}if(P){ae.border.color=P[ab%P.length];}R=this.getMarker(ae,U,ab);}}else{if(!E){this._markers.push(null);}}}if(E){this._createGroupMarker({fill:ae.fill,border:ae.border,dimensions:M,xvalues:O,yvalues:L,shape:ae.shape});}else{this._clearMarkerCache();}},updateMarkerState:function(L,J){if(this._markers&&this._markers[J]){var N,G,E=this._getState(L),M=this.get("xcoords"),K=this._markers[J],I=0,F,H;N=this.get("styles").marker;I=N.width*0.5;G=E=="off"||!N[E]?b.clone(N):b.clone(N[E]);G.height=K.get("height");G.x=(M[J]-I);G.y=K.get("y");G.id=K.get("id");F=G.fill.color;H=G.border.color;if(r.isArray(F)){G.fill.color=F[J%F.length];}else{G.fill.color=this._getItemColor(G.fill.color,J);}if(r.isArray(H)){G.border.color=H[J%H.length];}else{G.border.color=this._getItemColor(G.border.color,J);}K.set(G);}},_getPlotDefaults:function(){var E={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};E.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");E.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return E;}},{ATTRS:{type:{value:"stackedColumn"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});b.StackedBarSeries=b.Base.create("stackedBarSeries",b.BarSeries,[b.StackingUtil],{drawSeries:function(){if(this.get("xcoords").length<1){return;}var V=r.isNumber,ad=b.clone(this.get("styles").marker),U=ad.width,ac=ad.height,W=this.get("xcoords"),af=this.get("ycoords"),aa=0,ab=W.length,X=af[0],I=this.get("type"),H=this.get("graph"),R=H.seriesTypes[I],P,Z=this.get("order"),T=this.get("graphOrder"),J,Q,M,S,Y,F,O,G=Z===0,ae=ab*ac,L={width:[],height:[]},N=[],K=[],E=this.get("groupMarkers");if(r.isArray(ad.fill.color)){F=ad.fill.color.concat();}if(r.isArray(ad.border.color)){O=ad.border.color.concat();}this._createMarkerCache();if(ae>this.get("height")){P=this.height/ae;ac*=P;ac=Math.max(ac,1);}if(!G){M=R[Z-1];S=M.get("negativeBaseValues");Y=M.get("positiveBaseValues");if(!S||!Y){G=true;Y=[];S=[];}}else{S=[];Y=[];}this.set("negativeBaseValues",S);this.set("positiveBaseValues",Y);for(aa=0;aa<ab;++aa){X=af[aa];J=W[aa];if(!V(X)||!V(J)){if(G){Y[aa]=this._leftOrigin;S[aa]=this._leftOrigin;}this._markers.push(null);continue;}if(G){U=Math.abs(J-this._leftOrigin);if(J>this._leftOrigin){Y[aa]=J;S[aa]=this._leftOrigin;J-=U;}else{if(J<this._leftOrigin){Y[aa]=this._leftOrigin;S[aa]=J;}else{Y[aa]=J;S[aa]=this._leftOrigin;}}}else{if(J<this._leftOrigin){J=S[aa]-(this._leftOrigin-W[aa]);U=S[aa]-J;S[aa]=J;}else{if(J>=this._leftOrigin){J+=(Y[aa]-this._leftOrigin);U=J-Y[aa];Y[aa]=J;J-=U;}}}if(!isNaN(U)&&U>0){X-=ac/2;if(E){L.width[aa]=U;L.height[aa]=ac;N.push(J);K.push(X);}else{ad.width=U;ad.height=ac;ad.x=J;ad.y=X;if(F){ad.fill.color=F[aa%F.length];}if(O){ad.border.color=O[aa%O.length];}Q=this.getMarker(ad,T,aa);}}else{if(!E){this._markers.push(null);}}}if(E){this._createGroupMarker({fill:ad.fill,border:ad.border,dimensions:L,xvalues:N,yvalues:K,shape:ad.shape});}else{this._clearMarkerCache();}},updateMarkerState:function(M,J){if(this._markers[J]){var E=this._getState(M),I=this.get("ycoords"),K=this._markers[J],N=this.get("styles").marker,L=N.height,G=E=="off"||!N[E]?b.clone(N):b.clone(N[E]),F,H;G.y=(I[J]-L/2);G.x=K.get("x");G.width=K.get("width");G.id=K.get("id");F=G.fill.color;H=G.border.color;if(r.isArray(F)){G.fill.color=F[J%F.length];
}else{G.fill.color=this._getItemColor(G.fill.color,J);}if(r.isArray(H)){G.border.color=H[J%H.length];}else{G.border.color=this._getItemColor(G.border.color,J);}K.set(G);}},_getPlotDefaults:function(){var E={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};E.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");E.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return E;}},{ATTRS:{type:{value:"stackedBar"},direction:{value:"vertical"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});b.PieSeries=b.Base.create("pieSeries",b.MarkerSeries,[],{_map:null,_image:null,_setMap:function(){var G="pieHotSpotMapi_"+Math.round(100000*Math.random()),E=this.get("graph").get("contentBox"),F;if(this._image){E.removeChild(this._image);while(this._areaNodes&&this._areaNodes.length>0){F=this._areaNodes.shift();this._map.removeChild(F);}E.removeChild(this._map);}this._image=g.createElement("img");this._image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAABCAYAAAD9yd/wAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABJJREFUeNpiZGBgSGPAAgACDAAIkABoFyloZQAAAABJRU5ErkJggg==";E.appendChild(this._image);this._image.setAttribute("usemap","#"+G);this._image.style.zIndex=3;this._image.style.opacity=0;this._image.setAttribute("alt","imagemap");this._map=g.createElement("map");this._map.style.zIndex=5;E.appendChild(this._map);this._map.setAttribute("name",G);this._map.setAttribute("id",G);this._areaNodes=[];},_categoryDisplayName:null,_valueDisplayName:null,addListeners:function(){var E=this.get("categoryAxis"),F=this.get("valueAxis");if(E){E.after("dataReady",b.bind(this._categoryDataChangeHandler,this));E.after("dataUpdate",b.bind(this._categoryDataChangeHandler,this));}if(F){F.after("dataReady",b.bind(this._valueDataChangeHandler,this));F.after("dataUpdate",b.bind(this._valueDataChangeHandler,this));}this.after("categoryAxisChange",this.categoryAxisChangeHandler);this.after("valueAxisChange",this.valueAxisChangeHandler);this.after("stylesChange",this._updateHandler);},validate:function(){this.draw();this._renderered=true;},_categoryAxisChangeHandler:function(E){var F=this.get("categoryAxis");F.after("dataReady",b.bind(this._categoryDataChangeHandler,this));F.after("dataUpdate",b.bind(this._categoryDataChangeHandler,this));},_valueAxisChangeHandler:function(E){var F=this.get("valueAxis");F.after("dataReady",b.bind(this._valueDataChangeHandler,this));F.after("dataUpdate",b.bind(this._valueDataChangeHandler,this));},GUID:"pieseries",_categoryDataChangeHandler:function(E){if(this._rendered&&this.get("categoryKey")&&this.get("valueKey")){this.draw();}},_valueDataChangeHandler:function(E){if(this._rendered&&this.get("categoryKey")&&this.get("valueKey")){this.draw();}},draw:function(){var G=this.get("graph"),E=G.get("width"),F=G.get("height");if(isFinite(E)&&isFinite(F)&&E>0&&F>0){this._rendered=true;if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;this.drawSeries();this._drawing=false;if(this._callLater){this.draw();}else{this.fire("drawingComplete");}}},drawPlots:function(){var G=this.get("valueAxis").getDataByKey(this.get("valueKey")).concat(),H=this.get("categoryAxis").getDataByKey(this.get("categoryKey")).concat(),K=0,aj=G.length,S=this.get("styles").marker,E=S.fill.colors,ak=S.fill.alphas||["1"],O=S.border.colors,I=[S.border.weight],J=[S.border.alpha],al=I.concat(),U=O.concat(),W=J.concat(),ag,ai,X=S.padding,F=this.get("graph"),Q=Math.min(F.get("width"),F.get("height")),V=Q-(X.left+X.right),af=Q-(X.top+X.bottom),ad=-90,P=V/2,Y=af/2,L=Math.min(P,Y),ae=0,ab,ah=0,aa,ac,M,T,N,R=this.get("graphOrder"),Z=b.Graphic.NAME=="canvasGraphic";for(;ae<aj;++ae){ab=parseFloat(G[ae]);G.push(ab);if(!isNaN(ab)){K+=ab;}}ag=E?E.concat():null;ai=ak?ak.concat():null;this._createMarkerCache();if(Z){this._setMap();this._image.width=V;this._image.height=af;}for(ae=0;ae<aj;ae++){ab=G[ae];if(K===0){ah=360/G.length;}else{ah=360*(ab/K);}if(ag&&ag.length<1){ag=E.concat();}if(ai&&ai.length<1){ai=ak.concat();}if(al&&al.length<1){al=I.concat();}if(al&&U.length<1){U=O.concat();}if(W&&W.length<1){W=J.concat();}M=al?al.shift():null;aa=U?U.shift():null;ac=W?W.shift():null;ad+=ah;T={border:{color:aa,weight:M,alpha:ac},fill:{color:ag?ag.shift():this._getDefaultColor(ae,"slice"),alpha:ai?ai.shift():null},type:"pieslice",arc:ah,radius:L,startAngle:ad,cx:P,cy:Y,width:V,height:af};N=this.getMarker(T,R,ae);if(Z){this._addHotspot(T,R,ae);}}this._clearMarkerCache();},_addHotspot:function(H,U,I){var R=g.createElement("area"),T=1,N=H.cx,L=H.cy,K=H.arc,S=H.startAngle-K,Q=H.startAngle,F=H.radius,O=N+Math.cos(S/180*Math.PI)*F,M=L+Math.sin(S/180*Math.PI)*F,W=N+Math.cos(Q/180*Math.PI)*F,V=L+Math.sin(Q/180*Math.PI)*F,Z=Math.floor(K/10)-1,G=(K/(Math.floor(K/10))/180)*Math.PI,J=Math.atan((M-L)/(O-N)),Y=N+", "+L+", "+O+", "+M,X,P,E;for(T=1;T<=Z;++T){E=G*T;X=Math.cos(J+E);P=Math.sin(J+E);if(S<=90){Y+=", "+(N+(F*Math.cos(J+(G*T))));Y+=", "+(L+(F*Math.sin(J+(G*T))));}else{Y+=", "+(N-(F*Math.cos(J+(G*T))));Y+=", "+(L-(F*Math.sin(J+(G*T))));}}Y+=", "+W+", "+V;Y+=", "+N+", "+L;this._map.appendChild(R);R.setAttribute("class",o);R.setAttribute("id","hotSpot_"+U+"_"+I);R.setAttribute("shape","polygon");R.setAttribute("coords",Y);this._areaNodes.push(R);},updateMarkerState:function(I,G){if(this._markers[G]){var K=this._getState(I),F,H,E=this._markers[G],J=this.get("styles").marker;F=K=="off"||!J[K]?J:J[K];H=this._mergeStyles(F,{});H.fill.color=H.fill.colors[G%H.fill.colors.length];H.fill.alpha=H.fill.alphas[G%H.fill.alphas.length];E.set(H);}},_createMarker:function(I,E,H){var J=this.get("graphic"),G,F=b.clone(I);J.set("autoDraw",false);G=J.addShape(F);G.addClass(o);return G;},_clearMarkerCache:function(){var E=this._markerCache.length,G=0,F;for(;G<E;++G){F=this._markerCache[G];if(F){F.destroy();}}this._markerCache=[];},_getPlotDefaults:function(){var E={padding:{top:0,left:0,right:0,bottom:0},fill:{alphas:["1"]},border:{weight:0,alpha:1}};
E.fill.colors=this._defaultSliceColors;E.border.colors=this._defaultBorderColors;return E;},_defaultLineColors:["#426ab3","#d09b2c","#000000","#b82837","#b384b5","#ff7200","#779de3","#cbc8ba","#7ed7a6","#007a6c"],_defaultFillColors:["#6084d0","#eeb647","#6c6b5f","#d6484f","#ce9ed1","#ff9f3b","#93b7ff","#e0ddd0","#94ecba","#309687"],_defaultBorderColors:["#205096","#b38206","#000000","#94001e","#9d6fa0","#e55b00","#5e85c9","#adab9e","#6ac291","#006457"],_defaultSliceColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getDefaultColor:function(H,I){var F={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},G=F[I],E=G.length;H=H||0;if(H>=E){H=H%E;}I=I||"fill";return F[I][H];}},{ATTRS:{type:{value:"pie"},order:{},graph:{},categoryAxis:{value:null,validator:function(E){return E!==this.get("categoryAxis");}},valueAxis:{value:null,validator:function(E){return E!==this.get("valueAxis");}},categoryKey:{value:null,validator:function(E){return E!==this.get("categoryKey");}},valueKey:{value:null,validator:function(E){return E!==this.get("valueKey");}},categoryDisplayName:{setter:function(E){this._categoryDisplayName=E;return E;},getter:function(){return this._categoryDisplayName||this.get("categoryKey");}},valueDisplayName:{setter:function(E){this._valueDisplayName=E;return E;},getter:function(){return this._valueDisplayName||this.get("valueKey");}},slices:null}});b.Gridlines=b.Base.create("gridlines",b.Base,[b.Renderer],{_path:null,remove:function(){var E=this._path;if(E){E.destroy();}},draw:function(){if(this.get("axis")&&this.get("graph")){this._drawGridlines();}},_drawGridlines:function(){var S,E=this.get("axis"),M=E.get("position"),P,J=0,G,N=this.get("direction"),Q=this.get("graph"),O=Q.get("width"),L=Q.get("height"),R=this.get("styles").line,I=R.color,K=R.weight,H=R.alpha,F=N=="vertical"?this._verticalLine:this._horizontalLine;if(isFinite(O)&&isFinite(L)&&O>0&&L>0){if(M!="none"&&E&&E.get("tickPoints")){P=E.get("tickPoints");G=P.length;}else{P=[];G=E.get("styles").majorUnit.count;for(;J<G;++J){P[J]={x:O*(J/(G-1)),y:L*(J/(G-1))};}J=0;}S=Q.get("gridlines");S.set("width",O);S.set("height",L);S.set("stroke",{weight:K,color:I,opacity:H});for(;J<G;++J){F(S,P[J],O,L);}S.end();}},_horizontalLine:function(H,G,E,F){H.moveTo(0,G.y);H.lineTo(E,G.y);},_verticalLine:function(H,G,E,F){H.moveTo(G.x,0);H.lineTo(G.x,F);},_getDefaultStyles:function(){var E={line:{color:"#f0efe9",weight:1,alpha:1}};return E;}},{ATTRS:{direction:{},axis:{},graph:{}}});b.Graph=b.Base.create("graph",b.Widget,[b.Renderer],{bindUI:function(){var E=this.get("boundingBox");E.setStyle("position","absolute");this.after("widthChange",this._sizeChangeHandler);this.after("heightChange",this._sizeChangeHandler);this.after("stylesChange",this._updateStyles);this.after("groupMarkersChange",this._drawSeries);},syncUI:function(){var E,H,I,M=this.get("seriesCollection"),J,K=0,L=M?M.length:0,F=this.get("horizontalGridlines"),G=this.get("verticalGridlines");if(this.get("showBackground")){E=this.get("background");H=this.get("contentBox");I=this.get("styles").background;I.stroke=I.border;I.stroke.opacity=I.stroke.alpha;I.fill.opacity=I.fill.alpha;I.width=this.get("width");I.height=this.get("height");I.type=I.shape;E.set(I);}for(;K<L;++K){J=M[K];if(J instanceof b.CartesianSeries){J.render();}}if(F&&F instanceof b.Gridlines){F.draw();}if(G&&G instanceof b.Gridlines){G.draw();}},seriesTypes:null,getSeriesByIndex:function(G){var E=this.get("seriesCollection"),F;if(E&&E.length>G){F=E[G];}return F;},getSeriesByKey:function(G){var F=this._seriesDictionary,E;if(F&&F.hasOwnProperty(G)){E=F[G];}return E;},addDispatcher:function(E){if(!this._dispatchers){this._dispatchers=[];}this._dispatchers.push(E);},_seriesCollection:null,_seriesDictionary:null,_parseSeriesCollection:function(I){if(!I){return;}var F=I.length,H=0,G,E;this._seriesCollection=[];this._seriesDictionary={};this.seriesTypes=[];for(;H<F;++H){G=I[H];if(!(G instanceof b.CartesianSeries)&&!(G instanceof b.PieSeries)){this._createSeries(G);continue;}this._addSeries(G);}F=this._seriesCollection.length;for(H=0;H<F;++H){G=this.get("seriesCollection")[H];E=G.get("direction")=="horizontal"?"yKey":"xKey";this._seriesDictionary[G.get(E)]=G;}},_addSeries:function(G){var H=G.get("type"),J=this.get("seriesCollection"),I=J.length,F=this.seriesTypes,E;if(!G.get("graph")){G.set("graph",this);}J.push(G);if(!F.hasOwnProperty(H)){this.seriesTypes[H]=[];}E=this.seriesTypes[H];G.set("graphOrder",I);G.set("order",E.length);E.push(G);this.addDispatcher(G);G.after("drawingComplete",b.bind(this._drawingCompleteHandler,this));this.fire("seriesAdded",G);},_createSeries:function(I){var J=I.type,K=this.get("seriesCollection"),G=this.seriesTypes,F,E,H;I.graph=this;if(!G.hasOwnProperty(J)){G[J]=[];}F=G[J];I.graph=this;I.order=F.length;I.graphOrder=K.length;E=this._getSeries(I.type);H=new E(I);this.addDispatcher(H);H.after("drawingComplete",b.bind(this._drawingCompleteHandler,this));F.push(H);K.push(H);if(this.get("rendered")){H.render();}},_seriesMap:{line:b.LineSeries,column:b.ColumnSeries,bar:b.BarSeries,area:b.AreaSeries,candlestick:b.CandlestickSeries,ohlc:b.OHLCSeries,stackedarea:b.StackedAreaSeries,stackedline:b.StackedLineSeries,stackedcolumn:b.StackedColumnSeries,stackedbar:b.StackedBarSeries,markerseries:b.MarkerSeries,spline:b.SplineSeries,areaspline:b.AreaSplineSeries,stackedspline:b.StackedSplineSeries,stackedareaspline:b.StackedAreaSplineSeries,stackedmarkerseries:b.StackedMarkerSeries,pie:b.PieSeries,combo:b.ComboSeries,stackedcombo:b.StackedComboSeries,combospline:b.ComboSplineSeries,stackedcombospline:b.StackedComboSplineSeries},_getSeries:function(E){var F;if(r.isString(E)){F=this._seriesMap[E];}else{F=E;}return F;},_markerEventHandler:function(J){var H=J.type,E=J.currentTarget,I=E.getAttribute("id").split("_"),G=this.getSeriesByIndex(I[1]),F=I[2];G.updateMarkerState(H,F);},_dispatchers:null,_updateStyles:function(){var F=this.get("styles").background,E=F.border;
E.opacity=E.alpha;F.stroke=E;F.fill.opacity=F.fill.alpha;this.get("background").set(F);this._sizeChangeHandler();},_sizeChangeHandler:function(K){var E=this.get("horizontalGridlines"),L=this.get("verticalGridlines"),F=this.get("width"),I=this.get("height"),H=this.get("styles").background,J,G;if(H&&H.border){J=H.border.weight||0;}if(this.get("showBackground")){G=this.get("background");if(F&&I){G.set("width",F);G.set("height",I);}}if(this._gridlines){this._gridlines.clear();}if(E&&E instanceof b.Gridlines){E.draw();}if(L&&L instanceof b.Gridlines){L.draw();}this._drawSeries();},_drawSeries:function(){if(this._drawing){this._callLater=true;return;}var G,F,E,H=this.get("graphic");H.set("autoDraw",false);this._callLater=false;this._drawing=true;G=this.get("seriesCollection");F=0;E=G?G.length:0;for(;F<E;++F){G[F].draw();if((!G[F].get("xcoords")||!G[F].get("ycoords"))&&!G[F] instanceof b.PieSeries){this._callLater=true;break;}}this._drawing=false;if(this._callLater){this._drawSeries();}},_drawingCompleteHandler:function(G){var F=G.currentTarget,H,E=b.Array.indexOf(this._dispatchers,F);if(E>-1){this._dispatchers.splice(E,1);}if(this._dispatchers.length<1){H=this.get("graphic");if(!H.get("autoDraw")){H._redraw();}this.fire("chartRendered");}},_getDefaultStyles:function(){var E={background:{shape:"rect",fill:{color:"#faf9f2"},border:{color:"#dad8c9",weight:1}}};return E;},destructor:function(){if(this._graphic){this._graphic.destroy();this._graphic=null;}if(this._background){this._background.get("graphic").destroy();this._background=null;}if(this._gridlines){this._gridlines.get("graphic").destroy();this._gridlines=null;}}},{ATTRS:{x:{setter:function(E){this.get("boundingBox").setStyle("left",E+"px");return E;}},y:{setter:function(E){this.get("boundingBox").setStyle("top",E+"px");return E;}},chart:{},seriesCollection:{getter:function(){return this._seriesCollection;},setter:function(E){this._parseSeriesCollection(E);return this._seriesCollection;}},showBackground:{value:true},seriesDictionary:{readOnly:true,getter:function(){return this._seriesDictionary;}},horizontalGridlines:{value:null,setter:function(F){var E=this.get("horizontalGridlines");if(E&&E instanceof b.Gridlines){E.remove();}if(F instanceof b.Gridlines){E=F;F.set("graph",this);return F;}else{if(F&&F.axis){E=new b.Gridlines({direction:"horizontal",axis:F.axis,graph:this,styles:F.styles});return E;}}}},verticalGridlines:{value:null,setter:function(F){var E=this.get("verticalGridlines");if(E&&E instanceof b.Gridlines){E.remove();}if(F instanceof b.Gridlines){E=F;F.set("graph",this);return F;}else{if(F&&F.axis){E=new b.Gridlines({direction:"vertical",axis:F.axis,graph:this,styles:F.styles});return E;}}}},background:{getter:function(){if(!this._background){this._backgroundGraphic=new b.Graphic({render:this.get("contentBox")});this._backgroundGraphic.get("node").style.zIndex=0;this._background=this._backgroundGraphic.addShape({type:"rect"});}return this._background;}},gridlines:{readOnly:true,getter:function(){if(!this._gridlines){this._gridlinesGraphic=new b.Graphic({render:this.get("contentBox")});this._gridlinesGraphic.get("node").style.zIndex=1;this._gridlines=this._gridlinesGraphic.addShape({type:"path"});}return this._gridlines;}},graphic:{readOnly:true,getter:function(){if(!this._graphic){this._graphic=new b.Graphic({render:this.get("contentBox")});this._graphic.get("node").style.zIndex=2;this._graphic.set("autoDraw",false);}return this._graphic;}},groupMarkers:{value:false}}});function p(){}p.ATTRS={dataProvider:{lazyAdd:false,valueFn:function(){var E=[];if(!this._seriesKeysExplicitlySet){this._seriesKeys=this._buildSeriesKeys(E);}return E;},setter:function(F){var E=this._setDataValues(F);if(!this._seriesKeysExplicitlySet){this._seriesKeys=this._buildSeriesKeys(E);}return E;}},seriesKeys:{getter:function(){return this._seriesKeys;},setter:function(E){this._seriesKeysExplicitlySet=true;this._seriesKeys=E;return E;}},ariaLabel:{value:"Chart Application",setter:function(F){var E=this.get("contentBox");if(E){E.setAttribute("aria-label",F);}return F;}},ariaDescription:{value:"Use the up and down keys to navigate between series. Use the left and right keys to navigate through items in a series.",setter:function(E){if(this._description){this._description.setContent("");this._description.appendChild(g.createTextNode(E));}return E;}},tooltip:{valueFn:"_getTooltip",setter:function(E){return this._updateTooltip(E);}},categoryKey:{value:"category"},categoryType:{value:"category"},interactionType:{value:"marker"},axesCollection:{},graph:{valueFn:"_getGraph"},groupMarkers:{value:false}};p.prototype={_groupMarkersChangeHandler:function(G){var F=this.get("graph"),E=G.newVal;if(F){F.set("groupMarkers",E);}},_itemRendered:function(E){this._itemRenderQueue=this._itemRenderQueue.splice(1+b.Array.indexOf(this._itemRenderQueue,E.currentTarget),1);if(this._itemRenderQueue.length<1){this._redraw();}},_getGraph:function(){var E=new b.Graph({chart:this,groupMarkers:this.get("groupMarkers")});E.after("chartRendered",b.bind(function(F){this.fire("chartRendered");},this));return E;},getSeries:function(G){var E=null,F=this.get("graph");if(F){if(r.isNumber(G)){E=F.getSeriesByIndex(G);}else{E=F.getSeriesByKey(G);}}return E;},getAxisByKey:function(G){var E,F=this.get("axes");if(F&&F.hasOwnProperty(G)){E=F[G];}return E;},getCategoryAxis:function(){var F,E=this.get("categoryKey"),G=this.get("axes");if(G.hasOwnProperty(E)){F=G[E];}return F;},_direction:"horizontal",_dataProvider:null,_setDataValues:function(J){if(r.isArray(J[0])){var I,L=[],G=J[0],H=0,F=G.length,K,E=J.length;for(;H<F;++H){I={category:G[H]};for(K=1;K<E;++K){I["series"+K]=J[K][H];}L[H]=I;}return L;}return J;},_seriesCollection:null,_setSeriesCollection:function(E){this._seriesCollection=E;},_getAxisClass:function(E){return this._axisClass[E];},_axisClass:{stacked:b.StackedAxis,numeric:b.NumericAxis,category:b.CategoryAxis,time:b.TimeAxis},_axes:null,initializer:function(){this._itemRenderQueue=[];this._seriesIndex=-1;
this._itemIndex=-1;this.after("dataProviderChange",this._dataProviderChangeHandler);},renderUI:function(){var F=this.get("tooltip"),G=this.get("boundingBox"),E=this.get("contentBox");G.setStyle("position","absolute");E.setStyle("position","absolute");this._addAxes();this._addSeries();if(F&&F.show){this._addTooltip();}this._setAriaElements(G,E);},_setAriaElements:function(H,F){var G=this._getAriaOffscreenNode(),I=this.get("id")+"_description",E=this._getAriaOffscreenNode();F.set("tabIndex",0);F.set("role","img");F.setAttribute("aria-label",this.get("ariaLabel"));F.setAttribute("aria-describedby",I);G.set("id",I);G.set("tabIndex",-1);G.appendChild(g.createTextNode(this.get("ariaDescription")));E.set("id","live-region");E.set("aria-live","polite");E.set("aria-atomic","true");E.set("role","status");H.setAttribute("role","application");H.appendChild(G);H.appendChild(E);this._description=G;this._liveRegion=E;},_getAriaOffscreenNode:function(){var F=b.Node.create("<div></div>"),G=b.UA.ie,E=(G&&G<8)?"rect(1px 1px 1px 1px)":"rect(1px, 1px, 1px, 1px)";F.setStyle("position","absolute");F.setStyle("height","1px");F.setStyle("width","1px");F.setStyle("overflow","hidden");F.setStyle("clip",E);return F;},syncUI:function(){this._redraw();},bindUI:function(){this.after("tooltipChange",b.bind(this._tooltipChangeHandler,this));this.after("widthChange",this._sizeChanged);this.after("heightChange",this._sizeChanged);this.after("groupMarkersChange",this._groupMarkersChangeHandler);var L=this.get("tooltip"),F="mouseout",M="mouseover",G=this.get("contentBox"),E=this.get("interactionType"),J=0,K,I="."+o,H=((w&&("ontouchstart" in w))&&!(b.UA.chrome&&b.UA.chrome<6));b.on("keydown",b.bind(function(P){var O=P.keyCode,N=parseFloat(O),Q;if(N>36&&N<41){P.halt();Q=this._getAriaMessage(N);this._liveRegion.setContent("");this._liveRegion.appendChild(g.createTextNode(Q));}},this),this.get("contentBox"));if(E=="marker"){F=L.hideEvent;M=L.showEvent;if(H){b.delegate("touchend",b.bind(this._markerEventDispatcher,this),G,I);b.on("touchend",b.bind(function(N){N.halt(true);if(this._activeMarker){this._activeMarker=null;this.hideTooltip(N);}},this));}else{b.delegate("mouseenter",b.bind(this._markerEventDispatcher,this),G,I);b.delegate("mousedown",b.bind(this._markerEventDispatcher,this),G,I);b.delegate("mouseup",b.bind(this._markerEventDispatcher,this),G,I);b.delegate("mouseleave",b.bind(this._markerEventDispatcher,this),G,I);b.delegate("click",b.bind(this._markerEventDispatcher,this),G,I);b.delegate("mousemove",b.bind(this._positionTooltip,this),G,I);}}else{if(E=="planar"){if(H){this._overlay.on("touchend",b.bind(this._planarEventDispatcher,this));}else{this._overlay.on("mousemove",b.bind(this._planarEventDispatcher,this));this.on("mouseout",this.hideTooltip);}}}if(L){this.on("markerEvent:touchend",b.bind(function(O){var N=O.series.get("markers")[O.index];if(this._activeMarker&&N===this._activeMarker){this._activeMarker=null;this.hideTooltip(O);}else{this._activeMarker=N;L.markerEventHandler.apply(this,[O]);}},this));if(F&&M&&F==M){this.on(E+"Event:"+F,this.toggleTooltip);}else{if(M){this.on(E+"Event:"+M,L[E+"EventHandler"]);}if(F){if(r.isArray(F)){K=F.length;for(;J<K;++J){this.on(E+"Event:"+F[J],this.hideTooltip);}}this.on(E+"Event:"+F,this.hideTooltip);}}}},_markerEventDispatcher:function(L){var N=L.type,E=this.get("contentBox"),R=L.currentTarget,Q=R.getAttribute("id").split("_"),K=Q.pop(),I=Q.pop(),J=this.getSeries(parseInt(I,10)),M=this.getSeriesItems(J,K),G=L&&L.hasOwnProperty("changedTouches"),H=G?L.changedTouches[0].pageX:L.pageX,F=G?L.changedTouches[0].pageY:L.pageY,P=H-E.getX(),O=F-E.getY();if(N=="mouseenter"){N="mouseover";}else{if(N=="mouseleave"){N="mouseout";}}J.updateMarkerState(N,K);L.halt();this.fire("markerEvent:"+N,{originEvent:L,pageX:H,pageY:F,categoryItem:M.category,valueItem:M.value,node:R,x:P,y:O,series:J,index:K,seriesIndex:I});},_dataProviderChangeHandler:function(I){var F=I.newVal,H,E,G;this._seriesIndex=-1;this._itemIndex=-1;if(this instanceof b.CartesianChart){this.set("axes",this.get("axes"));this.set("seriesCollection",this.get("seriesCollection"));}H=this.get("axes");if(H){for(E in H){if(H.hasOwnProperty(E)){G=H[E];if(G instanceof b.Axis){if(G.get("position")!="none"){this._addToAxesRenderQueue(G);}G.set("dataProvider",F);}}}}},toggleTooltip:function(F){var E=this.get("tooltip");if(E.visible){this.hideTooltip();}else{E.markerEventHandler.apply(this,[F]);}},_showTooltip:function(H,E,I){var F=this.get("tooltip"),G=F.node;if(H){F.visible=true;F.setTextFunction(G,H);G.setStyle("top",I+"px");G.setStyle("left",E+"px");G.setStyle("visibility","visible");}},_positionTooltip:function(I){var G=this.get("tooltip"),H=G.node,F=this.get("contentBox"),E=(I.pageX+10)-F.getX(),J=(I.pageY+10)-F.getY();if(H){H.setStyle("left",E+"px");H.setStyle("top",J+"px");}},hideTooltip:function(){var E=this.get("tooltip"),F=E.node;E.visible=false;F.set("innerHTML","");F.setStyle("left",-10000);F.setStyle("top",-10000);F.setStyle("visibility","hidden");},_addTooltip:function(){var F=this.get("tooltip"),H=this.get("id")+"_tooltip",E=this.get("contentBox"),G=g.getElementById(H);if(G){E.removeChild(G);}F.node.set("id",H);F.node.setStyle("visibility","hidden");E.appendChild(F.node);},_updateTooltip:function(J){var G=this.get("tooltip")||this._getTooltip(),E,I,H,F={markerLabelFunction:"markerLabelFunction",planarLabelFunction:"planarLabelFunction",setTextFunction:"setTextFunction",showEvent:"showEvent",hideEvent:"hideEvent",markerEventHandler:"markerEventHandler",planarEventHandler:"planarEventHandler",show:"show"};if(r.isObject(J)){I=J.styles;H=b.one(J.node)||G.node;if(I){for(E in I){if(I.hasOwnProperty(E)){H.setStyle(E,I[E]);}}}for(E in F){if(J.hasOwnProperty(E)){G[E]=J[E];}}G.node=H;}return G;},_getTooltip:function(){var F=g.createElement("div"),G=c("chart-tooltip"),E={setTextFunction:this._setText,markerLabelFunction:this._tooltipLabelFunction,planarLabelFunction:this._planarLabelFunction,show:true,hideEvent:"mouseout",showEvent:"mouseover",markerEventHandler:function(I){var H=this.get("tooltip"),J=H.markerLabelFunction.apply(this,[I.categoryItem,I.valueItem,I.index,I.series,I.seriesIndex]);
this._showTooltip(J,I.x+10,I.y+10);},planarEventHandler:function(I){var H=this.get("tooltip"),K,J=this.get("categoryAxis");K=H.planarLabelFunction.apply(this,[J,I.valueItem,I.index,I.items,I.seriesIndex]);this._showTooltip(K,I.x+10,I.y+10);}};F=b.one(F);F.set("id",this.get("id")+"_tooltip");F.setStyle("fontSize","85%");F.setStyle("opacity","0.83");F.setStyle("position","absolute");F.setStyle("paddingTop","2px");F.setStyle("paddingRight","5px");F.setStyle("paddingBottom","4px");F.setStyle("paddingLeft","2px");F.setStyle("backgroundColor","#fff");F.setStyle("border","1px solid #dbdccc");F.setStyle("pointerEvents","none");F.setStyle("zIndex",3);F.setStyle("whiteSpace","noWrap");F.setStyle("visibility","hidden");F.addClass(G);E.node=b.one(F);return E;},_planarLabelFunction:function(L,Q,N,J,H){var F=g.createElement("div"),O,K=0,M=J.length,G,E,P,I;if(L){E=L.get("labelFunction").apply(this,[L.getKeyValueAt(this.get("categoryKey"),N),L.get("labelFormat")]);if(!r.isObject(E)){E=g.createTextNode(E);}F.appendChild(E);}for(;K<M;++K){I=J[K];if(I.get("visible")){O=Q[K];G=O.axis;P=G.get("labelFunction").apply(this,[G.getKeyValueAt(O.key,N),G.get("labelFormat")]);F.appendChild(g.createElement("br"));F.appendChild(g.createTextNode(O.displayName));F.appendChild(g.createTextNode(": "));if(!r.isObject(P)){P=g.createTextNode(P);}F.appendChild(P);}}return F;},_tooltipLabelFunction:function(L,F,I,H,G){var K=g.createElement("div"),E=L.axis.get("labelFunction").apply(this,[L.value,L.axis.get("labelFormat")]),J=F.axis.get("labelFunction").apply(this,[F.value,F.axis.get("labelFormat")]);K.appendChild(g.createTextNode(L.displayName));K.appendChild(g.createTextNode(": "));if(!r.isObject(E)){E=g.createTextNode(E);}K.appendChild(E);K.appendChild(g.createElement("br"));K.appendChild(g.createTextNode(F.displayName));K.appendChild(g.createTextNode(": "));if(!r.isObject(J)){J=g.createTextNode(J);}K.appendChild(J);return K;},_tooltipChangeHandler:function(I){if(this.get("tooltip")){var G=this.get("tooltip"),H=G.node,F=G.show,E=this.get("contentBox");if(H&&F){if(!E.contains(H)){this._addTooltip();}}}},_setText:function(E,F){E.setContent("");if(r.isNumber(F)){F=F+"";}else{if(!F){F="";}}if(n(F)){F=g.createTextNode(F);}E.appendChild(F);},_getAllKeys:function(J){var G=0,E=J.length,I,F,H={};for(;G<E;++G){I=J[G];for(F in I){if(I.hasOwnProperty(F)){H[F]=true;}}}return H;},_buildSeriesKeys:function(F){var H,G=this.get("categoryKey"),I=[],E;if(this._seriesKeysExplicitlySet){return this._seriesKeys;}H=this._getAllKeys(F);for(E in H){if(H.hasOwnProperty(E)&&E!=G){I.push(E);}}return I;}};b.ChartBase=p;b.CartesianChart=b.Base.create("cartesianChart",b.Widget,[b.ChartBase],{renderUI:function(){var I=this.get("boundingBox"),E=this.get("contentBox"),H=this.get("tooltip"),F,G=c("overlay");I.setStyle("position","absolute");E.setStyle("position","absolute");this._addAxes();this._addGridlines();this._addSeries();if(H&&H.show){this._addTooltip();}this.get("styles");if(this.get("interactionType")=="planar"){F=g.createElement("div");this.get("contentBox").appendChild(F);this._overlay=b.one(F);this._overlay.set("id",this.get("id")+"_overlay");this._overlay.setStyle("position","absolute");this._overlay.setStyle("background","#fff");this._overlay.setStyle("opacity",0);this._overlay.addClass(G);this._overlay.setStyle("zIndex",4);}this._setAriaElements(I,E);this._redraw();},_planarEventDispatcher:function(aa){var H=this.get("graph"),L=this.get("boundingBox"),U=H.get("contentBox"),R=aa&&aa.hasOwnProperty("changedTouches"),G=R?aa.changedTouches[0].pageX:aa.pageX,E=R?aa.changedTouches[0].pageY:aa.pageY,P=G-L.getX(),O=E-L.getY(),M={x:G-U.getX(),y:E-U.getY()},F=H.get("seriesCollection"),Q,Y=0,N,K=this._selectedIndex,ac,T=[],I=[],S=[],ad=this.get("direction"),ae,ab,W,V,J,Z,X;aa.halt(true);if(ad=="horizontal"){ab="x";W="y";}else{W="x";ab="y";}V=M[ab];if(F){Z=F.length;while(Y<Z&&!J){if(F[Y]){J=F[Y].get(ab+"MarkerPlane");}Y++;}}if(J){Z=J.length;for(Y=0;Y<Z;++Y){if(V<=J[Y].end&&V>=J[Y].start){N=Y;break;}}Z=F.length;for(Y=0;Y<Z;++Y){Q=F[Y];X=Q.get(W+"coords");ae=Q.get("markers");if(ae&&!isNaN(K)&&K>-1){Q.updateMarkerState("mouseout",K);}if(X&&X[N]>-1){if(ae&&!isNaN(N)&&N>-1){Q.updateMarkerState("mouseover",N);}ac=this.getSeriesItems(Q,N);I.push(ac.category);S.push(ac.value);T.push(Q);}}this._selectedIndex=N;if(N>-1){this.fire("planarEvent:mouseover",{categoryItem:I,valueItem:S,x:P,y:O,pageX:G,pageY:E,items:T,index:N,originEvent:aa});}else{this.fire("planarEvent:mouseout");}}},_type:"combo",_itemRenderQueue:null,_addToAxesRenderQueue:function(E){if(!this._itemRenderQueue){this._itemRenderQueue=[];}if(b.Array.indexOf(this._itemRenderQueue,E)<0){this._itemRenderQueue.push(E);}},_addToAxesCollection:function(E,G){var F=this.get(E+"AxesCollection");if(!F){F=[];this.set(E+"AxesCollection",F);}F.push(G);},_getDefaultSeriesCollection:function(){var F,E=this.get("dataProvider");if(E){F=this._parseSeriesCollection();}return F;},_parseSeriesCollection:function(Y){var O=this.get("direction"),E=[],V,S,Q=[],L,K=this.get("seriesKeys").concat(),U,J,R,I=this.get("type"),W,N,X,G,F=[],H=this.get("categoryKey"),T=this.get("showMarkers"),P=this.get("showAreaFill"),M=this.get("showLines");Y=Y||[];if(O=="vertical"){V="yAxis";N="yKey";S="xAxis";X="xKey";}else{V="xAxis";N="xKey";S="yAxis";X="yKey";}R=Y.length;while(Y&&Y.length>0){L=Y.shift();W=this._getBaseAttribute(L,X);if(W){J=b.Array.indexOf(K,W);if(J>-1){K.splice(J,1);Q.push(W);E.push(L);}else{F.push(L);}}else{F.push(L);}}while(F.length>0){L=F.shift();if(K.length>0){W=K.shift();this._setBaseAttribute(L,X,W);Q.push(W);E.push(L);}else{if(L instanceof b.CartesianSeries){L.destroy(true);}}}if(K.length>0){Q=Q.concat(K);}R=Q.length;for(U=0;U<R;++U){L=E[U]||{type:I};if(L instanceof b.CartesianSeries){this._parseSeriesAxes(L);continue;}L[N]=L[N]||H;L[X]=L[X]||K.shift();L[V]=this._getCategoryAxis();L[S]=this._getSeriesAxis(L[X]);L.type=L.type||I;L.direction=L.direction||O;if((L.type=="combo"||L.type=="stackedcombo"||L.type=="combospline"||L.type=="stackedcombospline")){if(P!==null){L.showAreaFill=(L.showAreaFill!==null&&L.showAreaFill!==undefined)?L.showAreaFill:P;
}if(T!==null){L.showMarkers=(L.showMarkers!==null&&L.showMarkers!==undefined)?L.showMarkers:T;}if(M!==null){L.showLines=(L.showLines!==null&&L.showLines!==undefined)?L.showLines:M;}}E[U]=L;}if(E){G=this.get("graph");G.set("seriesCollection",E);E=G.get("seriesCollection");}return E;},_parseSeriesAxes:function(F){var J=this.get("axes"),H=F.get("xAxis"),E=F.get("yAxis"),I=b.Axis,G;if(H&&!(H instanceof I)&&r.isString(H)&&J.hasOwnProperty(H)){G=J[H];if(G instanceof I){F.set("xAxis",G);}}if(E&&!(E instanceof I)&&r.isString(E)&&J.hasOwnProperty(E)){G=J[E];if(G instanceof I){F.set("yAxis",G);}}},_getCategoryAxis:function(){var E,F=this.get("axes"),G=this.get("categoryAxisName")||this.get("categoryKey");E=F[G];return E;},_getSeriesAxis:function(F,J){var I=this.get("axes"),E,H,G;if(I){if(J&&I.hasOwnProperty(J)){G=I[J];}else{for(E in I){if(I.hasOwnProperty(E)){H=I[E].get("keys");if(H&&H.hasOwnProperty(F)){G=I[E];break;}}}}}return G;},_getBaseAttribute:function(F,E){if(F instanceof b.Base){return F.get(E);}if(F.hasOwnProperty(E)){return F[E];}return null;},_setBaseAttribute:function(F,E,G){if(F instanceof b.Base){F.set(E,G);}else{F[E]=G;}},_setAxes:function(F){var J=this._parseAxes(F),N={},H={edgeOffset:"edgeOffset",position:"position",overlapGraph:"overlapGraph",labelFunction:"labelFunction",labelFunctionScope:"labelFunctionScope",labelFormat:"labelFormat",appendLabelFunction:"appendLabelFunction",appendTitleFunction:"appendTitleFunction",maximum:"maximum",minimum:"minimum",roundingMethod:"roundingMethod",alwaysShowZero:"alwaysShowZero",title:"title",width:"width",height:"height"},I=this.get("dataProvider"),Q,K,R,G,L,P,O,E,M;for(K in J){if(J.hasOwnProperty(K)){P=J[K];if(P instanceof b.Axis){G=P;}else{G=null;E={};E.dataProvider=P.dataProvider||I;E.keys=P.keys;if(P.hasOwnProperty("roundingUnit")){E.roundingUnit=P.roundingUnit;}R=P.position;if(P.styles){E.styles=P.styles;}E.position=P.position;for(Q in H){if(H.hasOwnProperty(Q)&&P.hasOwnProperty(Q)){E[Q]=P[Q];}}if(F){G=this.getAxisByKey(K);}if(G&&G instanceof b.Axis){L=G.get("position");if(R!=L){if(L!="none"){M=this.get(L+"AxesCollection");M.splice(b.Array.indexOf(M,G),1);}if(R!="none"){this._addToAxesCollection(R,G);}}G.setAttrs(E);}else{O=this._getAxisClass(P.type);G=new O(E);G.after("axisRendered",b.bind(this._itemRendered,this));}}if(G){M=this.get(R+"AxesCollection");if(M&&b.Array.indexOf(M,G)>0){G.set("overlapGraph",false);}N[K]=G;}}}return N;},_addAxes:function(){var J=this.get("axes"),F,H,K,E=this.get("width"),G=this.get("height"),I=b.Node.one(this._parentNode);if(!this._axesCollection){this._axesCollection=[];}for(F in J){if(J.hasOwnProperty(F)){H=J[F];if(H instanceof b.Axis){if(!E){this.set("width",I.get("offsetWidth"));E=this.get("width");}if(!G){this.set("height",I.get("offsetHeight"));G=this.get("height");}this._addToAxesRenderQueue(H);K=H.get("position");if(!this.get(K+"AxesCollection")){this.set(K+"AxesCollection",[H]);}else{this.get(K+"AxesCollection").push(H);}this._axesCollection.push(H);if(H.get("keys").hasOwnProperty(this.get("categoryKey"))){this.set("categoryAxis",H);}H.render(this.get("contentBox"));}}}},_addSeries:function(){var E=this.get("graph"),F=this.get("seriesCollection");E.render(this.get("contentBox"));},_addGridlines:function(){var O=this.get("graph"),F=this.get("horizontalGridlines"),G=this.get("verticalGridlines"),N=this.get("direction"),P=this.get("leftAxesCollection"),J=this.get("rightAxesCollection"),L=this.get("bottomAxesCollection"),H=this.get("topAxesCollection"),I,E=this.get("categoryAxis"),M,K;if(this._axesCollection){I=this._axesCollection.concat();I.splice(b.Array.indexOf(I,E),1);}if(F){if(P&&P[0]){M=P[0];}else{if(J&&J[0]){M=J[0];}else{M=N=="horizontal"?E:I[0];}}if(!this._getBaseAttribute(F,"axis")&&M){this._setBaseAttribute(F,"axis",M);}if(this._getBaseAttribute(F,"axis")){O.set("horizontalGridlines",F);}}if(G){if(L&&L[0]){K=L[0];}else{if(H&&H[0]){K=H[0];}else{K=N=="vertical"?E:I[0];}}if(!this._getBaseAttribute(G,"axis")&&K){this._setBaseAttribute(G,"axis",K);}if(this._getBaseAttribute(G,"axis")){O.set("verticalGridlines",G);}}},_getDefaultAxes:function(){var E;if(this.get("dataProvider")){E=this._parseAxes();}return E;},_parseAxes:function(U){var N=this.get("categoryKey"),F,S,P,H={},R=[],G=this.get("categoryAxisName")||this.get("categoryKey"),E=this.get("valueAxisName"),I=this.get("seriesKeys").concat(),V,T,M,L,Q,W=this.get("direction"),O,J,K=[],X=this.get("stacked")?"stacked":"numeric";if(W=="vertical"){O="bottom";J="left";}else{O="left";J="bottom";}if(U){for(V in U){if(U.hasOwnProperty(V)){F=U[V];P=this._getBaseAttribute(F,"keys");S=this._getBaseAttribute(F,"type");if(S=="time"||S=="category"){G=V;this.set("categoryAxisName",V);if(r.isArray(P)&&P.length>0){N=P[0];this.set("categoryKey",N);}H[V]=F;}else{if(V==G){H[V]=F;}else{H[V]=F;if(V!=E&&P&&r.isArray(P)){L=P.length;for(M=0;M<L;++M){R.push(P[M]);}K.push(H[V]);}if(!(this._getBaseAttribute(H[V],"type"))){this._setBaseAttribute(H[V],"type",X);}if(!(this._getBaseAttribute(H[V],"position"))){this._setBaseAttribute(H[V],"position",this._getDefaultAxisPosition(H[V],K,O));}}}}}}Q=b.Array.indexOf(I,N);if(Q>-1){I.splice(Q,1);}T=R.length;for(V=0;V<T;++V){Q=b.Array.indexOf(I,R[V]);if(Q>-1){I.splice(Q,1);}}if(!H.hasOwnProperty(G)){H[G]={};}if(!(this._getBaseAttribute(H[G],"keys"))){this._setBaseAttribute(H[G],"keys",[N]);}if(!(this._getBaseAttribute(H[G],"position"))){this._setBaseAttribute(H[G],"position",J);}if(!(this._getBaseAttribute(H[G],"type"))){this._setBaseAttribute(H[G],"type",this.get("categoryType"));}if(!H.hasOwnProperty(E)&&I&&I.length>0){H[E]={keys:I};K.push(H[E]);}if(R.length>0){if(I.length>0){I=R.concat(I);}else{I=R;}}if(H.hasOwnProperty(E)){if(!(this._getBaseAttribute(H[E],"position"))){this._setBaseAttribute(H[E],"position",this._getDefaultAxisPosition(H[E],K,O));}this._setBaseAttribute(H[E],"type",X);this._setBaseAttribute(H[E],"keys",I);}if(!this._seriesKeysExplicitlySet){this._seriesKeys=I;}return H;},_getDefaultAxisPosition:function(H,F,E){var I=this.get("direction"),G=b.Array.indexOf(F,H);
if(F[G-1]&&F[G-1].position){if(I=="horizontal"){if(F[G-1].position=="left"){E="right";}else{if(F[G-1].position=="right"){E="left";}}}else{if(F[G-1].position=="bottom"){E="top";}else{E="bottom";}}}return E;},getSeriesItems:function(J,I){var K=J.get("xAxis"),G=J.get("yAxis"),H=J.get("xKey"),F=J.get("yKey"),L,E;if(this.get("direction")=="vertical"){L={axis:G,key:F,value:G.getKeyValueAt(F,I)};E={axis:K,key:H,value:K.getKeyValueAt(H,I)};}else{E={axis:G,key:F,value:G.getKeyValueAt(F,I)};L={axis:K,key:H,value:K.getKeyValueAt(H,I)};}L.displayName=J.get("categoryDisplayName");E.displayName=J.get("valueDisplayName");L.value=L.axis.getKeyValueAt(L.key,I);E.value=E.axis.getKeyValueAt(E.key,I);return{category:L,value:E};},_sizeChanged:function(H){if(this._axesCollection){var G=this._axesCollection,F=0,E=G.length;for(;F<E;++F){this._addToAxesRenderQueue(G[F]);}this._redraw();}},_getTopOverflow:function(J,H,F){var G=0,E,K=0,I;if(J){E=J.length;for(;G<E;++G){I=J[G];K=Math.max(K,Math.abs(I.getMaxLabelBounds().top)-(I.getEdgeOffset(I.get("styles").majorTicks.count,F)*0.5));}}if(H){G=0;E=H.length;for(;G<E;++G){I=H[G];K=Math.max(K,Math.abs(I.getMaxLabelBounds().top)-(I.getEdgeOffset(I.get("styles").majorTicks.count,F)*0.5));}}return K;},_getRightOverflow:function(J,G,I){var F=0,E,K=0,H;if(J){E=J.length;for(;F<E;++F){H=J[F];K=Math.max(K,H.getMaxLabelBounds().right-(H.getEdgeOffset(H.get("styles").majorTicks.count,I)*0.5));}}if(G){F=0;E=G.length;for(;F<E;++F){H=G[F];K=Math.max(K,H.getMaxLabelBounds().right-(H.getEdgeOffset(H.get("styles").majorTicks.count,I)*0.5));}}return K;},_getLeftOverflow:function(J,G,I){var F=0,E,K=0,H;if(J){E=J.length;for(;F<E;++F){H=J[F];K=Math.max(K,Math.abs(H.getMinLabelBounds().left)-(H.getEdgeOffset(H.get("styles").majorTicks.count,I)*0.5));}}if(G){F=0;E=G.length;for(;F<E;++F){H=G[F];K=Math.max(K,Math.abs(H.getMinLabelBounds().left)-(H.getEdgeOffset(H.get("styles").majorTicks.count,I)*0.5));}}return K;},_getBottomOverflow:function(J,H,F){var G=0,E,K=0,I;if(J){E=J.length;for(;G<E;++G){I=J[G];K=Math.max(K,I.getMinLabelBounds().bottom-(I.getEdgeOffset(I.get("styles").majorTicks.count,F)*0.5));}}if(H){G=0;E=H.length;for(;G<E;++G){I=H[G];K=Math.max(K,I.getMinLabelBounds().bottom-(I.getEdgeOffset(I.get("styles").majorTicks.count,F)*0.5));}}return K;},_redraw:function(){if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;var R=this.get("width"),ab=this.get("height"),Z=0,J=0,af=0,F=0,E=this.get("leftAxesCollection"),P=this.get("rightAxesCollection"),Q=this.get("topAxesCollection"),ae=this.get("bottomAxesCollection"),aa=0,X,K,H="visible",I=this.get("graph"),M,S,Y,W,N,O,ad,ac,V=this.get("allowContentOverflow"),T,G,ah,U,L,ag={};if(E){ah=[];X=E.length;for(aa=X-1;aa>-1;--aa){ah.unshift(Z);Z+=E[aa].get("width");}}if(P){G=[];X=P.length;aa=0;for(aa=X-1;aa>-1;--aa){J+=P[aa].get("width");G.unshift(R-J);}}if(Q){U=[];X=Q.length;for(aa=X-1;aa>-1;--aa){U.unshift(af);af+=Q[aa].get("height");}}if(ae){L=[];X=ae.length;for(aa=X-1;aa>-1;--aa){F+=ae[aa].get("height");L.unshift(ab-F);}}N=R-(Z+J);O=ab-(F+af);ag.left=Z;ag.top=af;ag.bottom=ab-F;ag.right=R-J;if(!V){M=this._getTopOverflow(E,P);S=this._getBottomOverflow(E,P);Y=this._getLeftOverflow(ae,Q);W=this._getRightOverflow(ae,Q);T=M-af;if(T>0){ag.top=M;if(U){aa=0;X=U.length;for(;aa<X;++aa){U[aa]+=T;}}}T=S-F;if(T>0){ag.bottom=ab-S;if(L){aa=0;X=L.length;for(;aa<X;++aa){L[aa]-=T;}}}T=Y-Z;if(T>0){ag.left=Y;if(ah){aa=0;X=ah.length;for(;aa<X;++aa){ah[aa]+=T;}}}T=W-J;if(T>0){ag.right=R-W;if(G){aa=0;X=G.length;for(;aa<X;++aa){G[aa]-=T;}}}}N=ag.right-ag.left;O=ag.bottom-ag.top;ad=ag.left;ac=ag.top;if(Q){X=Q.length;aa=0;for(;aa<X;aa++){K=Q[aa];if(K.get("width")!==N){K.set("width",N);}K.get("boundingBox").setStyle("left",ad+"px");K.get("boundingBox").setStyle("top",U[aa]+"px");}if(K._hasDataOverflow()){H="hidden";}}if(ae){X=ae.length;aa=0;for(;aa<X;aa++){K=ae[aa];if(K.get("width")!==N){K.set("width",N);}K.get("boundingBox").setStyle("left",ad+"px");K.get("boundingBox").setStyle("top",L[aa]+"px");}if(K._hasDataOverflow()){H="hidden";}}if(E){X=E.length;aa=0;for(;aa<X;++aa){K=E[aa];K.get("boundingBox").setStyle("top",ac+"px");K.get("boundingBox").setStyle("left",ah[aa]+"px");if(K.get("height")!==O){K.set("height",O);}}if(K._hasDataOverflow()){H="hidden";}}if(P){X=P.length;aa=0;for(;aa<X;++aa){K=P[aa];K.get("boundingBox").setStyle("top",ac+"px");K.get("boundingBox").setStyle("left",G[aa]+"px");if(K.get("height")!==O){K.set("height",O);}}if(K._hasDataOverflow()){H="hidden";}}this._drawing=false;if(this._callLater){this._redraw();return;}if(I){I.get("boundingBox").setStyle("left",ad+"px");I.get("boundingBox").setStyle("top",ac+"px");I.set("width",N);I.set("height",O);I.get("boundingBox").setStyle("overflow",H);}if(this._overlay){this._overlay.setStyle("left",ad+"px");this._overlay.setStyle("top",ac+"px");this._overlay.setStyle("width",N+"px");this._overlay.setStyle("height",O+"px");}},destructor:function(){var I=this.get("graph"),G=0,E,J=this.get("seriesCollection"),F=this._axesCollection,H=this.get("tooltip").node;if(this._description){this._description.empty();this._description.remove(true);}if(this._liveRegion){this._liveRegion.empty();this._liveRegion.remove(true);}E=J?J.length:0;for(;G<E;++G){if(J[G] instanceof b.CartesianSeries){J[G].destroy(true);}}E=F?F.length:0;for(G=0;G<E;++G){if(F[G] instanceof b.Axis){F[G].destroy(true);}}if(I){I.destroy(true);}if(H){H.empty();H.remove(true);}if(this._overlay){this._overlay.empty();this._overlay.remove(true);}},_getAriaMessage:function(O){var H="",K,N,G,M,J=this._seriesIndex,E=this._itemIndex,I=this.get("seriesCollection"),L=I.length,F;if(O%2===0){if(L>1){if(O===38){J=J<1?L-1:J-1;}else{if(O===40){J=J>=L-1?0:J+1;}}this._itemIndex=-1;}else{J=0;}this._seriesIndex=J;K=this.getSeries(parseInt(J,10));H=K.get("valueDisplayName")+" series.";}else{if(J>-1){H="";K=this.getSeries(parseInt(J,10));}else{J=0;this._seriesIndex=J;K=this.getSeries(parseInt(J,10));H=K.get("valueDisplayName")+" series.";}F=K._dataLength?K._dataLength:0;
if(O===37){E=E>0?E-1:F-1;}else{if(O===39){E=E>=F-1?0:E+1;}}this._itemIndex=E;N=this.getSeriesItems(K,E);G=N.category;M=N.value;if(G&&M&&G.value&&M.value){H+=G.displayName+": "+G.axis.formatLabel.apply(this,[G.value,G.axis.get("labelFormat")])+", ";H+=M.displayName+": "+M.axis.formatLabel.apply(this,[M.value,M.axis.get("labelFormat")])+", ";}else{H+="No data available.";}H+=(E+1)+" of "+F+". ";}return H;}},{ATTRS:{allowContentOverflow:{value:false},axesStyles:{getter:function(){var G=this.get("axes"),E,F=this._axesStyles;if(G){for(E in G){if(G.hasOwnProperty(E)&&G[E] instanceof b.Axis){if(!F){F={};}F[E]=G[E].get("styles");}}}return F;},setter:function(G){var F=this.get("axes"),E;for(E in G){if(G.hasOwnProperty(E)&&F.hasOwnProperty(E)){this._setBaseAttribute(F[E],"styles",G[E]);}}}},seriesStyles:{getter:function(){var F=this._seriesStyles,G=this.get("graph"),H,E;if(G){H=G.get("seriesDictionary");if(H){F={};for(E in H){if(H.hasOwnProperty(E)){F[E]=H[E].get("styles");}}}}return F;},setter:function(H){var F,E,G;if(r.isArray(H)){G=this.get("seriesCollection");F=0;E=H.length;for(;F<E;++F){this._setBaseAttribute(G[F],"styles",H[F]);}}else{for(F in H){if(H.hasOwnProperty(F)){G=this.getSeries(F);this._setBaseAttribute(G,"styles",H[F]);}}}}},graphStyles:{getter:function(){var E=this.get("graph");if(E){return(E.get("styles"));}return this._graphStyles;},setter:function(F){var E=this.get("graph");this._setBaseAttribute(E,"styles",F);}},styles:{getter:function(){var E={axes:this.get("axesStyles"),series:this.get("seriesStyles"),graph:this.get("graphStyles")};return E;},setter:function(E){if(E.hasOwnProperty("axes")){if(this.get("axesStyles")){this.set("axesStyles",E.axes);}else{this._axesStyles=E.axes;}}if(E.hasOwnProperty("series")){if(this.get("seriesStyles")){this.set("seriesStyles",E.series);}else{this._seriesStyles=E.series;}}if(E.hasOwnProperty("graph")){this.set("graphStyles",E.graph);}}},axes:{valueFn:"_getDefaultAxes",setter:function(E){if(this.get("dataProvider")){E=this._setAxes(E);}return E;}},seriesCollection:{valueFn:"_getDefaultSeriesCollection",setter:function(E){if(this.get("dataProvider")){E=this._parseSeriesCollection(E);}return E;}},leftAxesCollection:{},bottomAxesCollection:{},rightAxesCollection:{},topAxesCollection:{},stacked:{value:false},direction:{getter:function(){var E=this.get("type");if(E=="bar"){return"vertical";}else{if(E=="column"){return"horizontal";}}return this._direction;},setter:function(E){this._direction=E;return this._direction;}},showAreaFill:{},showMarkers:{},showLines:{},categoryAxisName:{},valueAxisName:{value:"values"},horizontalGridlines:{getter:function(){var E=this.get("graph");if(E){return E.get("horizontalGridlines");}return this._horizontalGridlines;},setter:function(F){var E=this.get("graph");if(F&&!r.isObject(F)){F={};}if(E){E.set("horizontalGridlines",F);}else{this._horizontalGridlines=F;}}},verticalGridlines:{getter:function(){var E=this.get("graph");if(E){return E.get("verticalGridlines");}return this._verticalGridlines;},setter:function(F){var E=this.get("graph");if(F&&!r.isObject(F)){F={};}if(E){E.set("verticalGridlines",F);}else{this._verticalGridlines=F;}}},type:{getter:function(){if(this.get("stacked")){return"stacked"+this._type;}return this._type;},setter:function(E){if(this._type=="bar"){if(E!="bar"){this.set("direction","horizontal");}}else{if(E=="bar"){this.set("direction","vertical");}}this._type=E;return this._type;}},categoryAxis:{}}});b.PieChart=b.Base.create("pieChart",b.Widget,[b.ChartBase],{_getSeriesCollection:function(){if(this._seriesCollection){return this._seriesCollection;}var J=this.get("axes"),L=[],K,H=0,G,M=this.get("type"),O,E="categoryAxis",I="categoryKey",F="valueAxis",N="valueKey";if(J){K=J.values.get("keyCollection");O=J.category.get("keyCollection")[0];G=K.length;for(;H<G;++H){L[H]={type:M};L[H][E]="category";L[H][F]="values";L[H][I]=O;L[H][N]=K[H];}}this._seriesCollection=L;return L;},_parseAxes:function(H){if(!this._axes){this._axes={};}var I,N,G,L,E,K,M=this.get("type"),O=this.get("width"),J=this.get("height"),F=b.Node.one(this._parentNode);if(!O){this.set("width",F.get("offsetWidth"));O=this.get("width");}if(!J){this.set("height",F.get("offsetHeight"));J=this.get("height");}for(I in H){if(H.hasOwnProperty(I)){L=H[I];N=M=="pie"?"none":L.position;K=this._getAxisClass(L.type);E={dataProvider:this.get("dataProvider")};if(L.hasOwnProperty("roundingUnit")){E.roundingUnit=L.roundingUnit;}E.keys=L.keys;E.width=O;E.height=J;E.position=N;E.styles=L.styles;G=new K(E);G.on("axisRendered",b.bind(this._itemRendered,this));this._axes[I]=G;}}},_addAxes:function(){var H=this.get("axes"),E,F,G;if(!H){this.set("axes",this._getDefaultAxes());H=this.get("axes");}if(!this._axesCollection){this._axesCollection=[];}for(E in H){if(H.hasOwnProperty(E)){F=H[E];G=F.get("position");if(!this.get(G+"AxesCollection")){this.set(G+"AxesCollection",[F]);}else{this.get(G+"AxesCollection").push(F);}this._axesCollection.push(F);}}},_addSeries:function(){var E=this.get("graph"),F=this.get("seriesCollection");this._parseSeriesAxes(F);E.set("showBackground",false);E.set("width",this.get("width"));E.set("height",this.get("height"));E.set("seriesCollection",F);this._seriesCollection=E.get("seriesCollection");E.render(this.get("contentBox"));},_parseSeriesAxes:function(J){var F=0,E=J.length,H,I=this.get("axes"),G;for(;F<E;++F){H=J[F];if(H){if(H instanceof b.PieSeries){G=H.get("categoryAxis");if(G&&!(G instanceof b.Axis)){H.set("categoryAxis",I[G]);}G=H.get("valueAxis");if(G&&!(G instanceof b.Axis)){H.set("valueAxis",I[G]);}continue;}H.categoryAxis=I.category;H.valueAxis=I.values;if(!H.type){H.type=this.get("type");}}}},_getDefaultAxes:function(){var G=this.get("categoryKey"),F=this.get("seriesKeys").concat(),E="numeric";return{values:{keys:F,type:E},category:{keys:[G],type:this.get("categoryType")}};},getSeriesItems:function(G,F){var H={axis:G.get("categoryAxis"),key:G.get("categoryKey"),displayName:G.get("categoryDisplayName")},E={axis:G.get("valueAxis"),key:G.get("valueKey"),displayName:G.get("valueDisplayName")};
H.value=H.axis.getKeyValueAt(H.key,F);E.value=E.axis.getKeyValueAt(E.key,F);return{category:H,value:E};},_sizeChanged:function(E){this._redraw();},_redraw:function(){var G=this.get("graph"),E=this.get("width"),F=this.get("height"),H;if(G){H=Math.min(E,F);G.set("width",H);G.set("height",H);}},_tooltipLabelFunction:function(L,E,H,G,F){var K=g.createElement("div"),I=G.getTotalValues(),J=Math.round((E.value/I)*10000)/100;K.appendChild(g.createTextNode(L.displayName+": "+L.axis.get("labelFunction").apply(this,[L.value,L.axis.get("labelFormat")])));K.appendChild(g.createElement("br"));K.appendChild(g.createTextNode(E.displayName+": "+E.axis.get("labelFunction").apply(this,[E.value,E.axis.get("labelFormat")])));K.appendChild(g.createElement("br"));K.appendChild(g.createTextNode(J+"%"));return K;},_getAriaMessage:function(Q){var G="",F,N,K,M,J=0,E=this._itemIndex,H=this.get("seriesCollection"),L,O,P,I;K=this.getSeries(parseInt(J,10));I=K.get("markers");L=I&&I.length?I.length:0;if(Q===37){E=E>0?E-1:L-1;}else{if(Q===39){E=E>=L-1?0:E+1;}}this._itemIndex=E;N=this.getSeriesItems(K,E);F=N.category;M=N.value;O=K.getTotalValues();P=Math.round((M.value/O)*10000)/100;if(F&&M){G+=F.displayName+": "+F.axis.formatLabel.apply(this,[F.value,F.axis.get("labelFormat")])+", ";G+=M.displayName+": "+M.axis.formatLabel.apply(this,[M.value,M.axis.get("labelFormat")])+", ";G+="Percent of total "+M.displayName+": "+P+"%,";}else{G+="No data available,";}G+=(E+1)+" of "+L+". ";return G;}},{ATTRS:{ariaDescription:{value:"Use the left and right keys to navigate through items.",setter:function(E){if(this._description){this._description.setContent("");this._description.appendChild(g.createTextNode(E));}return E;}},axes:{getter:function(){return this._axes;},setter:function(E){this._parseAxes(E);}},seriesCollection:{getter:function(){return this._getSeriesCollection();},setter:function(E){return this._setSeriesCollection(E);}},type:{value:"pie"}}});},"@VERSION@",{"requires":["dom","datatype-number","datatype-date","event-custom","event-mouseenter","event-touch","widget","widget-position","widget-stack","graphics"]});