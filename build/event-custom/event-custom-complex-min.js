YUI.add("event-custom-complex",function(e){var b,d,a=e.CustomEvent.prototype,c=e.EventTarget.prototype;e.EventFacade=function(g,f){g=g||{};this.details=g.details;this.type=g.type;this._type=g.type;this.target=g.target;this.currentTarget=f;this.relatedTarget=g.relatedTarget;this.stopPropagation=function(){g.stopPropagation();this.stopped=1;};this.stopImmediatePropagation=function(){g.stopImmediatePropagation();this.stopped=2;};this.preventDefault=function(){g.preventDefault();this.prevented=1;};this.halt=function(h){g.halt(h);this.prevented=1;this.stopped=(h)?2:1;};};a.fireComplex=function(n){var o=e.Env._eventstack,j,f,l,g,m,s,h,r=this,p=r.host||r,k,i;if(o){if(r.queuable&&r.type!=o.next.type){r.log("queue "+r.type);o.queue.push([r,n]);return true;}}else{e.Env._eventstack={id:r.id,next:r,silent:r.silent,stopped:0,prevented:0,bubbling:null,type:r.type,afterQueue:new e.Queue(),defaultTargetOnly:r.defaultTargetOnly,queue:[]};o=e.Env._eventstack;}h=r.getSubs();r.stopped=(r.type!==o.type)?0:o.stopped;r.prevented=(r.type!==o.type)?0:o.prevented;r.target=r.target||p;s=new e.EventTarget({fireOnce:true,context:p});r.events=s;if(r.preventedFn){s.on("prevented",r.preventedFn);}if(r.stoppedFn){s.on("stopped",r.stoppedFn);}r.currentTarget=p;r.details=n.slice();r.log("Firing "+r.type);r._facade=null;j=r._getFacade(n);if(e.Lang.isObject(n[0])){n[0]=j;}else{n.unshift(j);}if(h[0]){r._procSubs(h[0],n,j);}if(r.bubbles&&p.bubble&&!r.stopped){i=o.bubbling;o.bubbling=r.type;if(o.type!=r.type){o.stopped=0;o.prevented=0;}m=p.bubble(r);r.stopped=Math.max(r.stopped,o.stopped);r.prevented=Math.max(r.prevented,o.prevented);o.bubbling=i;}if(r.defaultFn&&!r.prevented&&((!r.defaultTargetOnly&&!o.defaultTargetOnly)||p===j.target)){r.defaultFn.apply(p,n);}r._broadcast(n);if(h[1]&&!r.prevented&&r.stopped<2){if(o.id===r.id||r.type!=p._yuievt.bubbling){r._procSubs(h[1],n,j);while((k=o.afterQueue.last())){k();}}else{o.afterQueue.add(function(){r._procSubs(h[1],n,j);});}}r.target=null;if(o.id===r.id){l=o.queue;while(l.length){f=l.pop();g=f[0];o.next=g;g.fire.apply(g,f[1]);}e.Env._eventstack=null;}m=!(r.stopped);if(r.type!=p._yuievt.bubbling){o.stopped=0;o.prevented=0;r.stopped=0;r.prevented=0;}return m;};a._getFacade=function(){var f=this._facade,i,h,g=this.details;if(!f){f=new e.EventFacade(this,this.currentTarget);}i=g&&g[0];if(e.Lang.isObject(i,true)){h={};e.mix(h,f,true,d);e.mix(f,i,true);e.mix(f,h,true,d);f.type=i.type||f.type;}f.details=this.details;f.target=this.originalTarget||this.target;f.currentTarget=this.currentTarget;f.stopped=0;f.prevented=0;this._facade=f;return this._facade;};a.stopPropagation=function(){this.stopped=1;e.Env._eventstack.stopped=1;this.events.fire("stopped",this);};a.stopImmediatePropagation=function(){this.stopped=2;e.Env._eventstack.stopped=2;this.events.fire("stopped",this);};a.preventDefault=function(){if(this.preventable){this.prevented=1;e.Env._eventstack.prevented=1;this.events.fire("prevented",this);}};a.halt=function(f){if(f){this.stopImmediatePropagation();}else{this.stopPropagation();}this.preventDefault();};c.addTarget=function(f){this._yuievt.targets[e.stamp(f)]=f;this._yuievt.hasTargets=true;};c.getTargets=function(){return e.Object.values(this._yuievt.targets);};c.removeTarget=function(f){delete this._yuievt.targets[e.stamp(f)];};c.bubble=function(s,p,n){var l=this._yuievt.targets,o=true,u,q=s&&s.type,g,k,m,h,f=n||(s&&s.target)||this,r=e.Env._eventstack,j;if(!s||((!s.stopped)&&l)){for(k in l){if(l.hasOwnProperty(k)){u=l[k];g=u.getEvent(q,true);h=u.getSibling(q,g);if(h&&!g){g=u.publish(q);}j=u._yuievt.bubbling;u._yuievt.bubbling=q;if(!g){if(u._yuievt.hasTargets){u.bubble(s,p,f);}}else{g.sibling=h;g.target=f;g.originalTarget=f;g.currentTarget=u;m=g.broadcast;g.broadcast=false;g.emitFacade=true;o=o&&g.fire.apply(g,p||s.details||[]);g.broadcast=m;g.originalTarget=null;if(g.stopped){break;}}u._yuievt.bubbling=j;}}}return o;};b=new e.EventFacade();d=e.Object.keys(b);},"@VERSION@",{requires:["event-custom-base"]});