YUI.add("event-custom-complex",function(A){(function(){var C,D,B=A.CustomEvent.prototype;A.EventFacade=function(F,E){F=F||{};this.details=F.details;this.type=F.type;this._type=F.type;this.target=F.target;this.currentTarget=E;this.relatedTarget=F.relatedTarget;this.stopPropagation=function(){F.stopPropagation();};this.stopImmediatePropagation=function(){F.stopImmediatePropagation();};this.preventDefault=function(){F.preventDefault();};this.halt=function(G){F.halt(G);};};B.fireComplex=function(K){var L=A.Env._eventstack,H,E,I,F,J,M,G;if(L){if(this.queuable&&this.type!=L.next.type){this.log("queue "+this.type);L.queue.push([this,K]);return true;}}else{A.Env._eventstack={id:this.id,next:this,silent:this.silent,stopped:0,prevented:0,queue:[]};L=A.Env._eventstack;}G=this.getSubs();this.stopped=0;this.prevented=0;this.target=this.target||this.host;M=new A.EventTarget({fireOnce:true,context:this.host});this.events=M;if(this.preventedFn){M.on("prevented",this.preventedFn);}if(this.stoppedFn){M.on("stopped",this.stoppedFn);}this.currentTarget=this.host||this.currentTarget;this.details=K.slice();this.log("Firing "+this.type);this._facade=null;H=this._getFacade(K);if(A.Lang.isObject(K[0])){K[0]=H;}else{K.unshift(H);}if(G[0]){this._procSubs(G[0],K,H);}if(this.bubbles&&this.host&&this.host.bubble&&!this.stopped){L.stopped=0;L.prevented=0;J=this.host.bubble(this);this.stopped=Math.max(this.stopped,L.stopped);this.prevented=Math.max(this.prevented,L.prevented);}if(this.defaultFn&&!this.prevented){this.defaultFn.apply(this.host||this,K);}this._broadcast(K);if(G[1]&&!this.prevented&&this.stopped<2){this._procSubs(G[1],K,H);}if(L.id===this.id){I=L.queue;while(I.length){E=I.pop();F=E[0];L.stopped=0;L.prevented=0;L.next=F;F.fire.apply(F,E[1]);}A.Env._eventstack=null;}return this.stopped?false:true;};B._getFacade=function(){var E=this._facade,H,G,F=this.details;if(!E){E=new A.EventFacade(this,this.currentTarget);}H=F&&F[0];if(A.Lang.isObject(H,true)){G={};A.mix(G,E,true,D);A.mix(E,H,true);A.mix(E,G,true,D);E.type=H.type||E.type;}E.details=this.details;E.target=this.originalTarget||this.target;E.currentTarget=this.currentTarget;E.stopped=0;E.prevented=0;this._facade=E;return this._facade;};B.stopPropagation=function(){this.stopped=1;A.Env._eventstack.stopped=1;this.events.fire("stopped",this);};B.stopImmediatePropagation=function(){this.stopped=2;A.Env._eventstack.stopped=2;this.events.fire("stopped",this);};B.preventDefault=function(){if(this.preventable){this.prevented=1;A.Env._eventstack.prevented=1;this.events.fire("prevented",this);}};B.halt=function(E){if(E){this.stopImmediatePropagation();}else{this.stopPropagation();}this.preventDefault();};A.EventTarget.prototype.bubble=function(N,L,J){var H=this._yuievt.targets,K=true,O,M,E,G,I,F;if(!N||((!N.stopped)&&H)){for(G in H){if(H.hasOwnProperty(G)){O=H[G];M=N&&N.type;E=O.getEvent(M,true);F=O.getSibling(M,E);if(F&&!E){E=O.publish(M);}if(!E){if(O._yuievt.hasTargets){O.bubble.apply(O,arguments);}}else{E.sibling=F;E.originalTarget=J||(N&&N.target)||this;E.currentTarget=O;I=E.broadcast;E.broadcast=false;K=K&&E.fire.apply(E,L||N.details||[]);E.broadcast=I;E.originalTarget=null;if(E.stopped){break;}}}}}return K;};C=new A.EventFacade();D=A.Object.keys(C);})();},"@VERSION@",{requires:["event-custom-base"]});