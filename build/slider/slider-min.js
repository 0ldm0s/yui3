YUI.add("slider",function(B){var A="rail",H="thumb",F="input",E=/^\d+(?:p[xtc]|%|e[mx]|in|[mc]m)$/,G=B.Lang,C=G.isString,I=G.isNumber;function D(){this.constructor.superclass.constructor.apply(this,arguments);}B.mix(D,{NAME:"slider",AXIS_PROPS:{x:{offsetEdge:"left",dim:"width",axisDim:"railWidth",offAxisDim:"railHeight",offsetDim:"offsetWidth",posMethod:"getX",eventPageAxis:"pageX",ddStick:"stickX",ticks:"tickX",xyIndex:0},y:{offsetEdge:"top",dim:"height",axisDim:"railHeight",offAxisDim:"railWIdth",offsetDim:"offsetHeight",posMethod:"getY",eventPageAxis:"pageY",ddStick:"stickY",ticks:"tickY",xyIndex:1}},FIELD_HANDLER:{"replace":function(){this._replaceField();},"preserve":function(){this._preserveField();},"hide":function(){this._hideField();}},ATTRS:{axis:{value:"x",writeOnce:true,validator:function(J){return C(J)&&J.length===1&&"xy".indexOf(J.toLowerCase())>-1;},set:function(J){return J.toLowerCase();}},value:{value:0,validator:function(J){return I(J)&&J>=this.get("min")&&J<=this.get("max");},set:function(L){var K=this.get("values"),J,M;if(K){J=K[K.length-1];for(M=K.length-1;M>=0;--M){if(K[M]>L){J=K[M];}else{return Math.abs(J-L)<Math.abs(K[M]-L)?J:K[M];}}}}},values:{value:null,validator:function(J){return J===null||G.isArray(J)||(I(J)&&J>1&&J<=this.get("max"));},set:function(L){if(I(L)){var N=this.get("min"),K=this.get("max"),P=Math.round((K-N)/L),O=[N],M,J;for(M=1,J=L-1;M<J;++M){O[M]=N+(M*P);}O[M]=K;L=O;}if(L){L.sort();}return L;}},min:{value:0,validator:I},max:{value:100,validator:I},field:{value:null,validator:function(J){if(this.get("rendered")){return false;}return true;},set:function(K){var J=K?B.queryAll(K):null;return J&&J.length===1?J.item(0):J;}},rail:{value:null,set:function(J){return J?B.get(J):null;}},thumb:{value:null,set:function(J){return J?B.get(J):null;}},thumbImage:{value:null,set:function(J){return J?B.get(J)||B.Node.create('<img src="'+J+'" alt="Slider thumb">'):null;}},railHeight:{value:"20px",validator:function(J){return C(J)&&(J==="0"||E.test(J));}},railWidth:{value:"200px",validator:function(J){return C(J)&&(J==="0"||E.test(J));}},backgroundEnabled:{value:true,validator:G.isBoolean},preserveField:{value:function(){this._replaceField();},writeOnce:true,validator:function(J){return G.isFunction(J)||C(J);},set:function(J){J=G.isFunction(J)?J:D.FIELD_HANDLER[J];return B.bind(J,this);}},keyIncrement:{value:5,validator:I},edgeOffset:{value:0,validator:C}}});B.extend(D,B.Widget,{HTML_PARSER:{rail:function(J){return J.query("."+this.getClassName(A));},thumb:function(J){return J.quer("."+this.getClassName(H));},field:function(J){return J.query("."+this.getClassName(F));},thumbImage:function(J){return J.query("."+this.getClassName(H)+" img");}},_hasFieldValues:false,_factor:0.5,_tickSize:false,_thumbCenterOffset:null,initializer:function(){this.on("fieldChange",this._onFieldChange);this.on("minChange",this._onMinChange);this.on("maxChange",this._onMaxChange);this.publish("slideStart");this.publish("change");this.publish("slideEnd");},renderUI:function(){this.initField();this.initRail();this.initThumb();this.initRailDims();},initField:function(){this.get("preserveField")(this.get("field"));},initRail:function(){var J=this.get("contentBox"),K=this.get("rail");if(!K){K=J.appendChild(B.Node.create('<div class="'+this.getClassName(A)+'"></div>'));this.set("rail",K);}else{if(!J.contains(K)){J.appendChild(K);}}if("absolute|relative".indexOf(K.getStyle("position"))===-1){K.setStyle("position","relative");}},initRailDims:function(){var L=this.get("rail"),J=this.get("railWidth"),K=this.get("railHeight"),M;if(!K){K=(parseInt(L.getComputedStyle("height"),10)||L.get("offsetHeight"))+"px";this.set("railHeight",M);}L.setStyle("height",K);if(!J){J=(parseInt(L.getComputedStyle("width"),10)||L.get("offsetWidth"))+"px";this.set("railWidth",M);}L.setStyle("width",J);},initThumb:function(){var M=this.get("rail"),K=this.get("thumb"),J=this.get("thumbImage"),L;if(!K){K=B.Node.create('<div class="'+this.getClassName(H)+'"></div>');this.set("thumb",K);}if(!M.contains(K)){M.appendChild(K);}K.setStyle("position","absolute");if(J){this.initThumbImage();}else{this.defaultThumbDimensions();}this._calcThumbCenterOffset();},initThumbImage:function(){var K=this.get("thumb"),J=this.get("thumbImage");if(!K.contains(J)){K.appendChild(J);}},defaultThumbDimensions:function(){var J=this.get("thumb"),K=D.AXIS_PROPS[this.get("axis")],L=parseInt(this.get(K.offAxisDim),10)+"px";if(parseInt(J.getStyle("height"),10)<1){J.setStyle("height",L);}if(parseInt(J.getStyle("width"),10)<1){J.setStyle("width",L);}},_calcThumbCenterOffset:function(){var J=D.AXIS_PROPS[this.get("axis")].offAxisDim,K=this.get(J);this._thumbCenterOffset=Math.round(parseInt(K,10)/2);},bindUI:function(){this.initThumbDD();this._setConvFactor();this.on("valueChange",this._onValueChange);this.on("valuesChange",this._onValuesChange);this.on("backgroundEnabledChange",this._onBGEnabledChange);this.get("rail").on("mousedown",this.focus);B.on("keyup",this._onKeyup,B.config.doc);},initThumbDD:function(){this._dd=new B.DD.Drag({node:this.get("thumb"),constrain2node:this.get("rail")});this._dd.on("drag:start",B.bind(this._onDDStartDrag,this));this._dd.on("drag:drag",B.bind(this._onDDDrag,this));this._dd.on("drag:end",B.bind(this._onDDEndDrag,this));this._dd.set(D.AXIS_PROPS[this.get("axis")].ddStick,true);this._initBackgroundDD();this._setValueStops();},_initBackgroundDD:function(){var J=D.AXIS_PROPS[this.get("axis")],M=J.eventPageAxis,L=J.xyIndex,K=this._thumbCenterOffset;B.on("mousedown",B.bind(function(N){var O;if(this.get("primaryButtonOnly")&&N.button>1){return false;}this._dragThreshMet=true;this._fixIEMouseDown();N.halt();B.DD.DDM.activeDrag=this;O=this.get("dragNode").getXY();O[L]+=K;this._setStartPosition(O);this.start();this._moveNode([N.pageX,N.pageY]);},this._dd),this.get("rail"));},_setValueStops:function(){var K=D.AXIS_PROPS[this.get("axis")],J=this.get("values"),L=false,M;if(J){M=parseInt(this.get(K.axisDim),10)-(this._thumbCenterOffset*2);L=Math.round(M/(J.length-1));
}this._tickSize=L;this._dd.set(K.ticks,L);},syncUI:function(){this.set("value",this.get("value"));},getValue:function(){return this.get("value");},setValue:function(K,J){this.set("value",K,{omitChangeEvent:J});},initKeyListeners:function(){},_onValueChange:function(J){if(!J.src){this._uiSetThumbPosition(J.newVal,J.omitChangeEvent);}},_onValuesChange:function(J){},_onBGEnabledChange:function(J){},_onKeyup:function(J){},_onDDStartDrag:function(K){var J=D.AXIS_PROPS[this.get("axis")];this.fire("slideStart",{ddEvent:K});this._offsetXY=this.get("rail").getXY()[J.xyIndex];},_onDDDrag:function(N){var M=D.AXIS_PROPS[this.get("axis")],K=this.get("values"),O=N[M.eventPageAxis]-this._offsetXY,L,J;if(K){for(L=0,J=K.length-1;L<J;++L){if(O-(L*this._tickSize)<=0){break;}}O=K[L];}else{O*=this._factor;}this.set("value",Math.round(O),{src:"dd"});this.fire("change",{value:this.get("value"),ddEvent:N});},_onDDEndDrag:function(J){this.fire("slideEnd",{ddEvent:J});},_uiSetThumbPosition:function(L){var N=D.AXIS_PROPS[this.get("axis")],K=this.get("values"),M,J;if(K){for(M=K.length-1;M>=0;--M){if(K[M]===L){break;}}L=this._tickSize*M;}else{L=Math.round(L/this._factor);}this.get("thumb").setStyle(N.offsetEdge,L+"px");},_onFieldChange:function(J){this._updateValues(this.get("min"),this.get("max"),J.newVal);},_onMinChange:function(J){this._updateValues(J.newVal,this.get("max"),this.get("field"));},_onMaxChange:function(J){this._updateValues(this.get("min"),J.newVal,this.get("field"));},_updateValues:function(K,J,L){},_replaceField:function(){},_hideField:function(){},_preserveField:function(){},_setConvFactor:function(){var L=D.AXIS_PROPS[this.get("axis")],J=this.get("max")-this.get("min"),K=parseInt(this.get(L.axisDim),10)-(2*this._thumbCenterOffset);if(K){this._factor=J/K;}}});B.Slider=D;},"@VERSION@",{requires:["widget","dd"]});