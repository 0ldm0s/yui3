YUI.add("slider",function(D){var S="rail",R="thumb",J="value",h="min",i="max",E="thumbImage",H="railWidth",F="railHeight",K="slideStart",N="slideEnd",e="sync",b="thumbDrag",c="valueSet",A="rendered",f=".",P="px",I="width",d="height",T="offsetWidth",C="offsetHeight",a="position",G=/^\d+(?:p[xtc]|%|e[mx]|in|[mc]m)$/,Q=D.Lang,U=Q.isArray,V=Q.isString,W=Q.isNumber,O=Math,j=O.round,g=O.floor,B=O.ceil,X=O.abs;function Z(){Z.superclass.constructor.apply(this,arguments);}D.mix(Z,{NAME:"slider",AXIS_KEYS:{x:{offsetEdge:"left",dim:I,offAxisDim:d,axisDim:H,offsetDim:T,posMethod:"getX",eventPageAxis:"pageX",ddStick:"stickX",xyIndex:0},y:{offsetEdge:"top",dim:d,offAxisDim:I,axisDim:F,offsetDim:C,posMethod:"getY",eventPageAxis:"pageY",ddStick:"stickY",xyIndex:1}},HTML_PARSER:{rail:function(L){return L.query(f+this.getClassName(S));},thumb:function(L){return L.quer(f+this.getClassName(R));},thumbImage:function(L){return L.query(f+this.getClassName(R)+" img");}},ATTRS:{axis:{value:"x",writeOnce:true,validator:function(L){return this._validateNewAxis(L);},set:function(L){return this._setAxisFn(L);}},min:{value:0,validator:function(L){return this._validateNewMin(L);}},max:{value:100,validator:function(L){return this._validateNewMax(L);}},value:{value:null,validator:function(L){return this._validateNewValue(L);},set:function(L){return this._setValueFn(L);}},rail:{value:null,set:function(L){return this._setRailFn(L);}},thumb:{value:null,set:function(L){return this._setThumbFn(L);}},thumbImage:{value:null,set:function(L){return this._setThumbImageFn(L);}},railHeight:{value:"0",validator:function(L){return this._validateNewRailHeight(L);}},railWidth:{value:"0",validator:function(L){return this._validateNewRailWidth(L);}},backgroundEnabled:{value:true,validator:Q.isBoolean}}});D.extend(Z,D.Widget,{_key:null,_factor:0.5,_tickSize:false,_railDims:null,_thumbDims:null,initializer:function(){this._key=Z.AXIS_KEYS[this.get("axis")];this.after("minChange",this._afterMinChange);this.after("maxChange",this._afterMaxChange);this.after(this._key.axisDim+"Change",this._afterRailDimChange);this.publish(K);this.publish(N);this.publish(e,{defaultFn:this._doSyncUI});this.publish(c,{defaultFn:this._uiSetThumbPosition});},renderUI:function(){var L;this.initRail();this.initThumb();},initRail:function(){var L=this.get("contentBox"),M=this.get(S);if(!M){M=L.appendChild(D.Node.create('<div class="'+this.getClassName(S)+'"></div>'));this.set(S,M);}else{if(!L.contains(M)){L.appendChild(M);}}if("absolute|relative".indexOf(M.getStyle(a))===-1){M.setStyle(a,"relative");}},initThumb:function(){var M=this.get(S),L=this.get(R);if(!L){L=D.Node.create('<div class="'+this.getClassName(R)+'"></div>');this.set(R,L);}if(!M.contains(L)){M.appendChild(L);}L.setStyle(a,"absolute");if(this.get(E)){this.initThumbImage();}},initThumbImage:function(){var M=this.get(R),L=this.get(E);if(L){if(!M.contains(L)){M.appendChild(L);}}},bindUI:function(){this.publish(b,{defaultFn:this._updateValueFromDD});this.initThumbDD();this.after("valueChange",this._afterValueChange);},initThumbDD:function(){this._dd=new D.DD.Drag({node:this.get(R),constrain2node:this.get(S)});this._dd.on("drag:start",D.bind(this._onDDStartDrag,this));this._dd.on("drag:drag",D.bind(this._onDDDrag,this));this._dd.on("drag:end",D.bind(this._onDDEndDrag,this));this._dd.set(this._key.ddStick,true);this._initBackgroundDD();},_initBackgroundDD:function(){var Y=this._key.eventPageAxis,M=this._key.xyIndex,L=this;D.on("mousedown",D.bind(function(k){if(L.get("backgroundEnabled")){var l;if(this.get("primaryButtonOnly")&&k.button>1){return false;}this._dragThreshMet=true;this._fixIEMouseDown();k.halt();D.DD.DDM.activeDrag=this;l=this.get("dragNode").getXY();l[M]+=g(L._thumbDims[L._key.xyIndex]/2);this._setStartPosition(l);this.start();this._moveNode([k.pageX,k.pageY]);}},this._dd),this.get(S));},syncUI:function(){var L=this.get(E),M;if(!L||L.get("complete")){this.fire(e);}else{M=D.bind(function(){this.fire(e);},this);L.on("load",M);L.on("error",M);}},_doSyncUI:function(L){this._setRailDims();this._setThumbDims();this._setRailOffsetXY();this._setDDGutter();this._setConvFactor();this.set(J,this.get(J),{ddEvent:null});},_setRailDims:function(){var l=this.get(S),Y=this.get(R),M=this.get(E),L=this.get(H),k=this.get(F);if(parseInt(k,10)){l.setStyle(d,k);k=l.getComputedStyle(d);}else{k=((this._isImageLoaded(M)&&M.get(d))||parseInt(Y.getComputedStyle(d),10)||Y.get(C))+P;}l.setStyle(d,k);if(parseInt(L,10)){l.setStyle(I,L);L=l.getComputedStyle(I);}else{L=((this._isImageLoaded(M)&&M.get(I))||parseInt(Y.getComputedStyle(I),10)||Y.get(T))+P;}l.setStyle(I,L);this._railDims=[parseInt(L,10),parseInt(k,10)];},_setRailOffsetXY:function(){this._offsetXY=this.get(S).getXY()[this._key.xyIndex]-g(this._thumbDims[this._key.xyIndex]/2);},_setThumbDims:function(){var m=this.get(S),Y=this.get(R),M=this.get(E),l=parseInt(m.getComputedStyle(this._key.offAxisDim),10),L,k;if(this._isImageLoaded(M)){k=M.get(d);L=M.get(I);}else{k=parseInt(Y.getComputedStyle(d),10)||Y.get(C)||l;L=parseInt(Y.getComputedStyle(I),10)||Y.get(T)||l;}Y.setStyle(d,k+P);Y.setStyle(I,L+P);this._thumbDims=[L,k];},_setDDGutter:function(){var k=[0,0,0,0],M=this._key.xyIndex,Y=this._thumbDims[M]/2,l=-1*g(Y),L=-1*B(Y);if(M){k[0]=l;k[2]=L;}else{k[3]=l;k[1]=L;}this._dd.set("gutter",k.join(" "));},_setConvFactor:function(){var L=this.get(i)-this.get(h),M=this._railDims[this._key.xyIndex];this._factor=M?L/M:1;},getValue:function(){return this.get(J);},setValue:function(M,L){this.set(J,M,{omitEvents:L});},_validateNewAxis:function(L){return V(L)&&L.length===1&&"xy".indexOf(L.toLowerCase())>-1;},_validateNewMin:function(L){return W(L);},_validateNewMax:function(L){return W(L);},_validateNewValue:function(M){var Y=this.get(h),L=this.get(i);return W(M)&&(Y<L?(M>=Y&&M<=L):(M>=L&&M<=Y));},_validateNewRailHeight:function(L){return V(L)&&(L==="0"||G.test(L));},_validateNewRailWidth:function(L){return V(L)&&(L==="0"||G.test(L));},_setAxisFn:function(L){return L.toLowerCase();},_setValueFn:function(L){if(!W(L)){L=this.get(h);
}return j(L);},_setRailFn:function(L){return L?D.get(L):null;},_setThumbFn:function(L){return L?D.get(L):null;},_setThumbImageFn:function(L){return L?D.get(L)||D.Node.create('<img src="'+L+'" alt="Slider thumb">'):null;},_onDDStartDrag:function(L){this._setRailOffsetXY();this.fire(K,{ddEvent:L});},_onDDDrag:function(L){this.fire(b,{ddEvent:L});},_updateValueFromDD:function(M){var L=this.get(J),Y=M.ddEvent[this._key.eventPageAxis]-this._offsetXY;Y=j(this.get(h)+(Y*this._factor));if(L!==Y){this.set(J,Y,{ddEvent:M.ddEvent});}},_onDDEndDrag:function(L){this.fire(N,{ddEvent:L});},_uiSetThumbPosition:function(l){var k=this.get(h),L=this.get(i),Y=this._key.xyIndex,M;M=j(((l.changeEv.newVal-k)/(L-k))*this._railDims[Y])-g(this._thumbDims[Y]/2);this.get(R).setStyle(this._key.offsetEdge,M+P);},_afterValueChange:function(L){if(!L.ddEvent){this.fire(c,{changeEv:L});}L.ddEvent=L.omitEvents=null;},_afterMinChange:function(L){this._refresh(L);},_afterMaxChange:function(L){this._refresh(L);},_afterRailDimChange:function(L){this._refresh(L);},_refresh:function(L){if(L.newVal!==L.prevVal&&this.get(A)){this.syncUI();}},_isImageLoaded:function(M){var Y=(!M||!M.get("complete")),L;if(!Y){L=M.get("naturalWidth");Y=L===undefined?!M.get(I):!L;}return !Y;}});D.Slider=Z;},"@VERSION@",{requires:["widget","dd"]});