YUI.add("slider",function(B){var A="rail",H="thumb",F="input",E=/^\d+(?:p[xtc]|%|e[mx]|in|[mc]m)$/,G=B.Lang,C=G.isString,I=G.isNumber;function D(){this.constructor.superclass.constructor.apply(this,arguments);}B.mix(D,{NAME:"slider",AXIS_PROPS:{x:{offsetEdge:"left",dim:"width",axisDim:"railWidth",offAxisDim:"railHeight",offsetDim:"offsetWidth",posMethod:"getX",eventPageAxis:"pageX",ddStick:"stickX",ticks:"tickX",xyIndex:0},y:{offsetEdge:"top",dim:"height",axisDim:"railHeight",offAxisDim:"railWIdth",offsetDim:"offsetHeight",posMethod:"getY",eventPageAxis:"pageY",ddStick:"stickY",ticks:"tickY",xyIndex:1}},ATTRS:{axis:{value:"x",writeOnce:true,validator:function(J){return C(J)&&J.length===1&&"xy".indexOf(J.toLowerCase())>-1;},set:function(J){return J.toLowerCase();}},min:{value:0,validator:I},max:{value:100,validator:I},value:{value:0,validator:function(J){return I(J)&&J>=this.get("min")&&J<=this.get("max");},set:function(L){var K=this.get("values"),J,M;if(K){J=K[K.length-1];for(M=K.length-1;M>=0;--M){if(K[M]>L){J=K[M];}else{L=Math.abs(J-L)<Math.abs(K[M]-L)?J:K[M];break;}}}return L;}},values:{value:null,validator:function(J){return J===null||G.isArray(J)||(I(J)&&J>1&&J<=this.get("max"));},set:function(L){if(I(L)){var N=this.get("min"),K=this.get("max"),P=(K-N)/(L-1),O=[N],M,J;for(M=1,J=L-1;M<J;++M){O[M]=Math.round(N+(M*P));}O[M]=K;L=O;}if(G.isArray(L)){L.sort(this._valueSorter);}return L;}},rail:{value:null,set:function(J){return J?B.get(J):null;}},thumb:{value:null,set:function(J){return J?B.get(J):null;}},thumbImage:{value:null,set:function(J){return J?B.get(J)||B.Node.create('<img src="'+J+'" alt="Slider thumb">'):null;}},railHeight:{value:"20px",validator:function(J){return C(J)&&(J==="0"||E.test(J));}},railWidth:{value:"200px",validator:function(J){return C(J)&&(J==="0"||E.test(J));}},backgroundEnabled:{value:true,validator:G.isBoolean},edgeOffset:{value:0,validator:C}}});B.extend(D,B.Widget,{HTML_PARSER:{rail:function(J){return J.query("."+this.getClassName(A));},thumb:function(J){return J.quer("."+this.getClassName(H));},thumbImage:function(J){return J.query("."+this.getClassName(H)+" img");}},_factor:0.5,_tickSize:false,_thumbCenterOffset:null,_valueSorter:function(K,J){return(+K<+J)?-1:(+K<+J)?1:0;},initializer:function(){this.on("minChange",this._onMinChange);this.on("maxChange",this._onMaxChange);this.publish("slideStart");this.publish("change");this.publish("slideEnd");},renderUI:function(){this.initRail();this.initThumb();this.initRailDims();},initRail:function(){var K=D.AXIS_PROPS[this.get("axis")],J=this.get("contentBox"),L=this.get("rail");if(!L){L=J.appendChild(B.Node.create('<div class="'+this.getClassName(A)+'"></div>'));this.set("rail",L);}else{if(!J.contains(L)){J.appendChild(L);}}if("absolute|relative".indexOf(L.getStyle("position"))===-1){L.setStyle("position","relative");}this._offsetXY=this.get("rail").getXY()[K.xyIndex];},initRailDims:function(){var L=this.get("rail"),J=this.get("railWidth"),K=this.get("railHeight"),M;if(!K){K=(parseInt(L.getComputedStyle("height"),10)||L.get("offsetHeight"))+"px";this.set("railHeight",M);}L.setStyle("height",K);if(!J){J=(parseInt(L.getComputedStyle("width"),10)||L.get("offsetWidth"))+"px";this.set("railWidth",M);}L.setStyle("width",J);},initThumb:function(){var L=D.AXIS_PROPS[this.get("axis")],N=this.get("rail"),K=this.get("thumb"),J=this.get("thumbImage"),M;if(!K){K=B.Node.create('<div class="'+this.getClassName(H)+'"></div>');this.set("thumb",K);}if(!N.contains(K)){N.appendChild(K);}K.setStyle("position","absolute");K.setStyle(L.offsetEdge,"0");if(J){this.initThumbImage();}else{this.defaultThumbDimensions();}this._calcThumbCenterOffset();},initThumbImage:function(){var K=this.get("thumb"),J=this.get("thumbImage");if(!K.contains(J)){K.appendChild(J);}},defaultThumbDimensions:function(){var J=this.get("thumb"),K=D.AXIS_PROPS[this.get("axis")],L=parseInt(this.get(K.offAxisDim),10)+"px";if(parseInt(J.getStyle("height"),10)<1){J.setStyle("height",L);}if(parseInt(J.getStyle("width"),10)<1){J.setStyle("width",L);}},_calcThumbCenterOffset:function(){var J=D.AXIS_PROPS[this.get("axis")].offAxisDim,K=this.get(J);this._thumbCenterOffset=Math.round(parseInt(K,10)/2);},bindUI:function(){this.initThumbDD();this._setConvFactor();this.after("valueChange",this._onValueChange);this.after("valuesChange",this._onValuesChange);this.get("rail").on("mousedown",this.focus);},initThumbDD:function(){this._dd=new B.DD.Drag({node:this.get("thumb"),constrain2node:this.get("rail")});this._dd.on("drag:start",B.bind(this._onDDStartDrag,this));this._dd.on("drag:drag",B.bind(this._onDDDrag,this));this._dd.on("drag:end",B.bind(this._onDDEndDrag,this));this._dd.set(D.AXIS_PROPS[this.get("axis")].ddStick,true);this._initBackgroundDD();this._setValueStops();},_initBackgroundDD:function(){var K=D.AXIS_PROPS[this.get("axis")],M=K.eventPageAxis,L=K.xyIndex,J=this;B.on("mousedown",B.bind(function(N){if(J.get("backgroundEnabled")){var O;if(this.get("primaryButtonOnly")&&N.button>1){return false;}this._dragThreshMet=true;this._fixIEMouseDown();N.halt();B.DD.DDM.activeDrag=this;O=this.get("dragNode").getXY();O[L]+=J._thumbCenterOffset;this._setStartPosition(O);this.start();this._moveNode([N.pageX,N.pageY]);}},this._dd),this.get("rail"));},_setValueStops:function(){var K=D.AXIS_PROPS[this.get("axis")],J=this.get("values"),L=false,M;if(J){M=parseInt(this.get(K.axisDim),10)-this.get("thumb").get(K.offsetDim);L=Math.floor(M/(J.length-1));}this._tickSize=L;this._dd.set(K.ticks,L);},syncUI:function(){this.set("value",this.get("value"));},getValue:function(){return this.get("value");},setValue:function(K,J){this.set("value",K,{omitChangeEvent:J});},_onValueChange:function(J){if(!J.src){this._uiSetThumbPosition(J.newVal,J.omitChangeEvent);}},_onValuesChange:function(J){},_onDDStartDrag:function(K){var J=D.AXIS_PROPS[this.get("axis")];this.fire("slideStart",{ddEvent:K});this._offsetXY=this.get("rail").getXY()[J.xyIndex];},_onDDDrag:function(O){var M=D.AXIS_PROPS[this.get("axis")],K=this.get("values"),P=O[M.eventPageAxis]-this._offsetXY,N=this.get("value"),L,J;
if(K){for(L=0,J=K.length-1;L<J;++L){if(P-(L*this._tickSize)<=0){break;}}P=K[L];}else{P*=this._factor;}this.set("value",P,{src:"dd"});P=this.get("value");if(N!==P){this.fire("change",{value:P,ddEvent:O});}},_onDDEndDrag:function(J){this.fire("slideEnd",{ddEvent:J});},_uiSetThumbPosition:function(L){var N=D.AXIS_PROPS[this.get("axis")],K=this.get("values"),M,J;if(K){for(M=K.length-1;M>=0;--M){if(K[M]===L){break;}}L=this._tickSize*M;}else{L=Math.round(L/this._factor);}this.get("thumb").setStyle(N.offsetEdge,L+"px");},_onMinChange:function(J){this._updateValues(J.newVal,this.get("max"));},_onMaxChange:function(J){this._updateValues(this.get("min"),J.newVal);},_updateValues:function(K,J,L){},_setConvFactor:function(){var L=D.AXIS_PROPS[this.get("axis")],J=this.get("max")-this.get("min"),K=parseInt(this.get(L.axisDim),10)-(2*this._thumbCenterOffset);if(K){this._factor=J/K;}}});B.Slider=D;},"@VERSION@",{requires:["widget","dd"]});