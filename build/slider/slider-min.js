(function(){var G=YAHOO,C=G.util,F=C.Dom,B=G.lang,A=G.widget;function E(D){this.constructor.superclass.constructor.apply(this,arguments);}E.NAME="SliderThumb";E.CONFIG={"group":{},"minX":{value:0},"maxX":{value:0},"minY":{value:0},"maxY":{value:0},"tickSize":{validator:function(D){return(B.isNumber(D)&&D>=0);},value:0},"x":{set:function(D){return this._constrain(D,E.X);},value:0},"y":{set:function(D){return this._constrain(D,E.Y);},value:0},"locked":{value:false}};E.X="X";E.Y="Y";B.extend(E,A.Widget,{initializer:function(D){},renderer:function(){this._centerPoint=this.findCenter();this.initDD();this.initUI();},lock:function(){this.set("locked",true);},unlock:function(){this.set("locked",false);},isLocked:function(){return this.get("locked");},getValue:function(){var H=this.parent,D;if(H._isRegion){D=[this.getXValue(),this.getYValue()];}else{if(H._isVert){D=this.getYValue();}else{D=this.getXValue();}}return D;},getXValue:function(){return this.get("x");},getYValue:function(){return this.get("y");},getXRange:function(){return this.get("maxX")-this.get("minX");},getYRange:function(){return this.get("maxY")-this.get("minY");},initDD:function(){var H=this,I=this.getXScale(),J=this.getYScale();var D=new C.DD(this.getThumbEl().id,H.get("group"));D.isTarget=false;D.maintainOffset=true;D.scroll=false;D.setInitPosition();D.setXConstraint(H.get("minX")*I,H.get("maxX")*I,H.get("tickSize")*I);D.setYConstraint(H.get("minY")*J,H.get("maxY")*J,H.get("tickSize")*J);this._dd=D;},getOffsetFromParent:function(M){var O=this.getThumbEl();var K;if(!this.deltaOffset){var D=F.getXY(O);M=M||F.getXY(this.getParentEl());K=[(D[0]-M[0]),(D[1]-M[1])];var I=parseInt(F.getStyle(O,"left"),10);var P=parseInt(F.getStyle(O,"top"),10);var L=I-K[0];var J=P-K[1];if(!isNaN(L)&&!isNaN(J)){this.deltaOffset=[L,J];}}else{var H=parseInt(F.getStyle(O,"left"),10);var N=parseInt(F.getStyle(O,"top"),10);K=[H+this.deltaOffset[0],N+this.deltaOffset[1]];}return K;},getUIValue:function(){var H=this.parent,D;if(H._isHoriz){D=this.getUIXValue();}else{if(H._isVert){D=this.getUIYValue();}else{D=[this.getUIXValue(),this.getUIYValue()];}}return D;},getUIXValue:function(){return Math.round(this.getOffsetFromParent()[0]/this.getXScale());},getUIYValue:function(){return Math.round(this.getOffsetFromParent()[1]/this.getYScale());},setXOffset:function(){this.moveThumb(this.getOffsetForX(),null);},setYOffset:function(){this.moveThumb(null,this.getOffsetForY());},getXScale:function(){var D=this.getXRange();if(D>0){var H=this.getParentEl().offsetWidth-this.getThumbEl().offsetWidth;return Math.round(H/D);}else{return 0;}},getYScale:function(){var D=this.getYRange();if(D>0){var H=this.getParentEl().offsetHeight-this.getThumbEl().offsetHeight;return Math.round(H/D);}else{return 0;}},getOffsetForX:function(D){var I=this.getXValue()-this.get("minX");var J=I*this.getXScale()+this._centerPoint.x;var H=F.getXY(this.getParentEl())[0];return H+J;},getOffsetForY:function(J){var H=this.getYValue()-this.get("minY");var I=H*this.getYScale()+this._centerPoint.y;var D=F.getXY(this.getParentEl())[1];return D+I;},getThumbEl:function(){return this._node;},getParentEl:function(){return this.parent._node;},initUI:function(){this.addUIListeners();},addUIListeners:function(){this.on("xChange",this.setXOffset,this,true);this.on("yChange",this.setYOffset,this,true);this.on("tickSize",this._uiSetTickSize,this,true);this.on("lockedChange",this._uiSetLock,this,true);this.on("render",this.syncUI,this,true);},syncUI:function(){this._uiSetTickSize();this._uiSetLock();this.setYOffset();this.setXOffset();},findCenter:function(){var D=this.getThumbEl();return{x:parseInt(D.offsetWidth/2,10),y:parseInt(D.offsetHeight/2,10)};},moveThumb:function(H,J){var D=F.getXY(this.getThumbEl());var I=this._centerPoint;if(!H&&H!==0){H=D[0]+I.x;}if(!J&&J!==0){J=D[1]+I.y;}this._dd.setDelta(I.x,I.y);if(this.fireEvent("beforeMove",[H,J,D])!==false){this.move(H,J);this.fireEvent("move");}},move:function(D,H){this._dd.setDragElPos(D,H);this._endMove();},_endMove:function(){this.parent._endMove();},_constrain:function(L,J){var I=this.get("min"+J);var D=this.get("max"+J);var H=this.get("tickSize");if(L<I){L=I;}else{if(L>D){L=D;}else{if(H>0){var K=L%H;if(K>0){if(K<Math.round(H/2)){L=L-K;}else{L=L+(H-K);}}}}}return L;},_uiSetTickSize:function(){if(this.get("tickSize")===0){this._dd.clearTicks();}},_uiSetLock:function(){var D=this._dd;if(this.get("locked")){D.lock();}else{D.unlock();}},_centerPoint:null,_dd:null});A.SliderThumb=E;})();(function(){var I=YAHOO,C=I.util,G=C.Event,H=C.Dom,B=I.lang,A=I.widget;function F(D){this.constructor.superclass.constructor.apply(this,arguments);}F.NAME="Slider";F.INC=1;F.DEC=-1;F.REGION="region";F.HORIZ="horiz";F.VERT="vert";F.CONFIG={group:{},thumb:{},type:{set:function(D){if(D==F.REGION){this._isRegion=true;}else{if(D==F.HORIZ){this._isHoriz=true;}else{this._isVert=true;}}},value:F.HORIZ,validator:function(D){return(D==F.HORIZ||D==F.VERT||D==F.REGION);}},bgEnabled:{value:true},keysEnabled:{value:true},keyIncrement:{value:20},locked:{value:false}};B.extend(F,A.Widget,{initializer:function(D){this.initThumb();},renderer:function(){this._baselinePos=H.getXY(this.getBackgroundEl());this.getThumb().render();this.initDD();this.initUI();},initThumb:function(){var D=this.getThumb();D.parent=this;},getThumb:function(){return this.get("thumb");},lock:function(){this.set("locked",true);},unlock:function(){this.set("locked",false);},isLocked:function(){return this.get("locked");},getValue:function(){return this.getThumb().getValue();},setValueToMin:function(){this._setValToLimit(false);},setValueToMax:function(){this._setValToLimit(true);},setValue:function(K,J,D){if(this.isLocked()&&!J){return false;}if(isNaN(K)){return false;}var E=this.getThumb();if(this._isRegion){return false;}else{if(this._isHoriz){E.set("x",K,D);}else{if(this._isVert){E.set("y",K,D);}}}},setRegionValue:function(E,D,L,J){if(this.isLocked()&&!L){return false;}if(isNaN(E)&&isNaN(D)){return false;}var K=this.getThumb();if(E||E===0){K.set("x",E,J);
}if(D||D===0){K.set("y",D,J);}},stepYValue:function(D){var E=this.get("keyIncrement")*D;var J=this.getThumb().getYValue()+E;if(this._isVert){this.setValue(J);}else{if(this._isRegion){this.setRegionValue(null,J);}}},stepXValue:function(D){var E=this.get("keyIncrement")*D;var J=this.getThumb().getXValue()+E;if(this._isHoriz){this.setValue(J);}else{if(this._isRegion){this.setRegionValue(J,null);}}},getBackgroundEl:function(){return this._node;},focus:function(){this._focusEl();if(this.isLocked()){return false;}else{this._slideStart();return true;}},initDD:function(){this._dd=new C.DragDrop(this.getBackgroundEl().id,this.get("group"),true);this._dd.setInitPosition();this._dd.isTarget=false;},initUI:function(){this.addKeyListeners();this.addDDListeners();this.addThumbDDListeners();this.addUIListeners();},addKeyListeners:function(){var D=this.getBackgroundEl();G.on(D,"keydown",this._onKeyDown,this,true);G.on(D,"keypress",this._onKeyPress,this,true);},addDDListeners:function(){var D=this,E=this._dd;E.b4MouseDown=function(J){D._beforeBGMouseDown(J);};E.onDrag=function(J){D._onBGDrag(J);};E.onMouseDown=function(J){D._onBGMouseDown(J);};this.on(F.E.EndMove,this.syncValue,this,true);},addThumbDDListeners:function(){var D=this,E=this.getThumb()._dd;E.onMouseDown=function(J){D._onThumbMouseDown(J);};E.startDrag=function(J){D._onThumbStartDrag(J);};E.onDrag=function(J){D._onThumbDrag(J);};E.onMouseUp=function(J){D._onThumbMouseUp(J);};},addUIListeners:function(){this.on("lockedChange",this._uiSetLock,this,true);},syncUI:function(){this._uiSetLock();},syncValue:function(){var D=this.getThumb().getUIValue();if(this._isRegion){this.setRegionValue(D[0],D[1],false,true);}else{this.setValue(D,false,true);}},_uiSetLock:function(){var D=this._dd;var E=this.getThumb();if(this.get("locked")){D.lock();E.lock();}else{D.unlock();E.unlock();}},_beforeBGMouseDown:function(E){var D=this.getThumb()._dd;D.autoOffset();D.resetConstraints();},_onBGMouseDown:function(D){if(!this.isLocked()&&this.get("bgEnabled")){this.focus();this._moveThumb(D);}},_onBGDrag:function(D){if(!this.isLocked()){this._moveThumb(D);}},_onThumbMouseDown:function(D){return this.focus();},_onThumbStartDrag:function(D){this._slideStart();},_onThumbDrag:function(D){this.syncValue();this._fireEvents(true);},_onThumbMouseUp:function(D){if(!this.isLocked()&&!this.moveComplete){this._endMove();}},_onKeyPress:function(D){if(this.get("keysEnabled")){switch(G.getCharCode(D)){case 37:case 38:case 39:case 40:case 36:case 35:G.preventDefault(D);break;default:}}},_onKeyDown:function(E){var D=F;if(this.get("keysEnabled")){var J=true;switch(G.getCharCode(E)){case 37:this.stepXValue(D.DEC);break;case 38:this.stepYValue(D.DEC);break;case 39:this.stepXValue(D.INC);break;case 40:this.stepYValue(D.INC);break;case 36:this.setValueToMin();break;case 35:this.setValueToMax();break;default:J=false;}if(J){G.stopEvent(E);}}},_setValToLimit:function(E){var L=(E)?"max":"min",J=this.getThumb(),K=A.SliderThumb,D=K.X,M=K.Y;if(this._isRegion){this.setRegionValue(J.get(L+D),J.get(L+M));}else{if(this._isVert){this.setValue(J.get(L+M));}else{this.setValue(J.get(L+D));}}},_slideStart:function(){if(!this._sliding){this.fireEvent(F.E.SlideStart);this._sliding=true;}},_slideEnd:function(){if(this._sliding&&this.moveComplete){this.fireEvent(F.E.SlideEnd);this._sliding=false;this.moveComplete=false;}},_focusEl:function(){var D=this.getBackgroundEl();if(D.focus){try{D.focus();}catch(E){}}this._verifyOffset();},_endMove:function(){this.unlock();this.moveComplete=true;this.fireEvent(F.E.EndMove);this._fireEvents();},_verifyOffset:function(E){var D=H.getXY(this.getBackgroundEl());if(D){if(D[0]!=this._baselinePos[0]||D[1]!=this._baselinePos[1]){this.getThumb()._dd.resetConstraints();this._baselinePos=D;return false;}}return true;},_cachePosition:function(){this.getThumb()._dd.cachePosition();},_moveThumb:function(E){var D=G.getPageX(E);var J=G.getPageY(E);this.getThumb().moveThumb(D,J);},_fireEvents:function(J){var E=this.getThumb();if(!J){this._cachePosition();}if(!this.isLocked()){if(this._isRegion){var L=E.getXValue();var K=E.getYValue();if(L!=this.previousX||K!=this.previousY){this.fireEvent(F.E.Change,{x:L,y:K});}this.previousX=L;this.previousY=K;}else{var D=E.getValue();if(D!=this.previousVal){this.fireEvent(F.E.Change,D);}this.previousVal=D;}this._slideEnd();}},_dd:null});F.getHorizSlider=function(J,E,D,M,L){var K=new A.SliderThumb({id:E,group:J,minX:D,maxX:M,minY:0,maxY:0,tickSize:L});return new F({id:J,group:J,thumb:K,type:F.HORIZ});};F.getVertSlider=function(E,D,M,L,K){var J=new A.SliderThumb({id:D,group:E,minY:M,maxY:L,minX:0,maxX:0,tickSize:K});return new F({id:E,group:E,thumb:J,type:F.VERT});};F.getRegionSlider=function(J,E,D,N,O,M,L){var K=new A.SliderThumb({id:E,group:J,minX:D,maxX:N,minY:O,maxY:M,tickSize:L});return new F({id:J,group:J,thumb:K,type:F.REGION});};F.E={SlideStart:"slideStart",SlideEnd:"slideEnd",EndMove:"endMove",Change:"change"};A.Slider=F;})();YAHOO.register("slider",YAHOO.widget.Slider,{version:"@VERSION@",build:"@BUILD@"});