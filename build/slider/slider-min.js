(function(){var I=YAHOO,C=I.util,G=C.Dom,B=I.lang,A=I.widget;function F(J,D){this.constructor.superclass.constructor.apply(this,arguments);}F.NAME="SliderThumb";F.X="X";F.Y="Y";F.CONFIG={"group":{},"minX":{value:0},"maxX":{value:0},"minY":{value:0},"maxY":{value:0},"tickSize":{value:0},"x":{set:function(D){return this.constrain(D,F.X);},value:0},"y":{set:function(D){return this.constrain(D,F.Y);},value:0}};B.extend(F,A.Widget,{initializer:function(D){this.initProps();},initProps:function(){var D=this.getXRange();var J=this.getYRange();if(D!==0&&J!==0){this._isRegion=true;}else{if(D!==0){this._isHoriz=true;}else{this._isVert=true;}}},constrain:function(N,L){var K=this.get("min"+L);var D=this.get("max"+L);var J=this.get("tickSize");if(N<K){N=K;}else{if(N>D){N=D;}else{if(J>0){var M=N%J;if(M>0){if(M<Math.round(J/2)){N=N-M;}else{N=N+(J-M);}}}}}return N;},clearTicks:function(){this.set("tickSize",0);},lock:function(){this.set("locked",true);},unlock:function(){this.set("locked",false);},isLocked:function(){return this.get("locked");},getValue:function(){if(this._isHoriz){return this.getXValue();}else{if(this._isVert){return this.getYValue();}else{return[this.getXValue(),this.getYValue()];}}},getXValue:function(){return this.get("x");},getYValue:function(){return this.get("y");},getXRange:function(){return this.get("maxX")-this.get("minX");},getYRange:function(){return this.get("maxY")-this.get("minY");},getTickPause:function(){var K=this.get("tickSize");if(K>0){var D=(this._isHoriz)?this.getXRange():this.getYRange();var J=Math.round(D/K);if(J>0){return Math.round(360/J);}}return 0;},endMove:function(){this.parent.endMove();},_isHoriz:false,_isVert:false,_isRegion:false});function H(D){this.superApply(D);}B.extend(H,A.WidgetView,{_dd:null,render:function(){this.centerPoint=this.findCenter();this.initDD();},update:function(){this.setXOffset();this.setYOffset();},initDD:function(){var J=this.widget,K=this.getXScale(),L=this.getYScale();var D=new C.DD(this.getThumbEl().id,J.get("group"));D.setXConstraint(J.get("minX")*K,J.get("maxX")*K,J.get("tickSize")*K);D.setYConstraint(J.get("minY")*L,J.get("maxY")*L,J.get("tickSize")*L);D.isTarget=false;D.maintainOffset=true;D.scroll=false;this._dd=D;},getOffsetFromParent:function(O){var Q=this.getThumbEl();var M;if(!this.deltaOffset){var D=G.getXY(Q);O=O||G.getXY(this.getParentEl());M=[(D[0]-O[0]),(D[1]-O[1])];var K=parseInt(G.getStyle(Q,"left"),10);var R=parseInt(G.getStyle(Q,"top"),10);var N=K-M[0];var L=R-M[1];if(!isNaN(N)&&!isNaN(L)){this.deltaOffset=[N,L];}}else{var J=parseInt(G.getStyle(Q,"left"),10);var P=parseInt(G.getStyle(Q,"top"),10);M=[J+this.deltaOffset[0],P+this.deltaOffset[1]];}return M;},getValue:function(){if(this.widget._isHoriz){return this.getXValue();}else{if(this.widget._isVert){return this.getYValue();}else{return[this.getXValue(),this.getYValue()];}}},getXValue:function(){return Math.round(this.getOffsetFromParent()[0]/this.getXScale());},getYValue:function(){return Math.round(this.getOffsetFromParent()[1]/this.getYScale());},setXOffset:function(){this.moveThumb(this.getOffsetForX(),null,false,false);},setYOffset:function(){this.moveThumb(null,this.getOffsetForY(),false,false);},getXScale:function(){var D=this.widget.getXRange();if(D>0){var J=this.getParentEl().offsetWidth-this.getThumbEl().offsetWidth;return Math.round(J/D);}else{return 0;}},getYScale:function(){var D=this.widget.getYRange();if(D>0){var J=this.getParentEl().offsetHeight-this.getThumbEl().offsetHeight;return Math.round(J/D);}else{return 0;}},getOffsetForX:function(D){var K=this.widget.getXValue()-this.widget.get("minX");var L=K*this.getXScale()+this.centerPoint.x;var J=G.getXY(this.getParentEl())[0];return J+L;},getOffsetForY:function(L){var J=this.widget.getYValue()-this.widget.get("minY");var K=J*this.getYScale()+this.centerPoint.y;var D=G.getXY(this.getParentEl())[1];return D+K;},findCenter:function(){var D=this.getThumbEl();return{x:parseInt(D.offsetWidth/2,10),y:parseInt(D.offsetHeight/2,10)};},moveThumb:function(S,R,P,O){var J=this.widget;var T=this;var L=G.getXY(this.getThumbEl());if(!S&&S!==0){S=L[0];}if(!R&&R!==0){R=L[1];}var Q=this.centerPoint;this._dd.setDelta(Q.x,Q.y);var K=this._dd.getTargetCoord(S,R);var N=[K.x,K.y];var M=J.parent.get("animate");if(M&&J.get("tickSize")>0&&!P){J.lock();this.curCoord=L;setTimeout(function(){T.moveOneTick(N);},J.parent.get("tickPause"));}else{if(M&&!P){J.lock();var D=new C.Motion(J.get("node").get("id"),{points:{to:N}},J.get("animationDuration"),C.Easing.easeOut);D.onComplete.subscribe(function(){J.endMove();});D.animate();}else{this._dd.setDragElPos(S,R);if(!O){J.endMove();}}}},moveOneTick:function(J){var L=this.widget;var M=null;if(L._isRegion){M=this._getNextX(this.curCoord,J);var D=(M)?M[0]:this.curCoord[0];M=this._getNextY([D,this.curCoord[1]],J);}else{if(L._isHoriz){M=this._getNextX(this.curCoord,J);}else{M=this._getNextY(this.curCoord,J);}}if(M){this.curCoord=M;this._dd.alignElWithMouse(this.getThumbEl(),M[0],M[1]);if(!(M[0]==J[0]&&M[1]==J[1])){var K=this;setTimeout(function(){K.moveOneTick(J);},L.parent.get("tickPause"));}else{L.endMove();}}else{L.endMove();}},_getNextX:function(D,J){var K=this.widget;var N;var L=[];var M=null;if(D[0]>J[0]){N=K.get("tickSize")-this.centerPoint.x;L=this._dd.getTargetCoord(D[0]-N,D[1]);M=[L.x,L.y];}else{if(D[0]<J[0]){N=K.get("tickSize")+this.centerPoint.x;L=this._dd.getTargetCoord(D[0]+N,D[1]);M=[L.x,L.y];}else{}}return M;},_getNextY:function(D,J){var K=this.widget;var N;var L=[];var M=null;if(D[1]>J[1]){N=K.get("tickSize")-this.centerPoint.y;L=this._dd.getTargetCoord(D[0],D[1]-N);M=[L.x,L.y];}else{if(D[1]<J[1]){N=K.get("tickSize")+this.centerPoint.y;L=this._dd.getTargetCoord(D[0],D[1]+N);M=[L.x,L.y];}else{}}return M;},getThumbEl:function(){return this.widget.get("node").get("node");},getParentEl:function(){return this.widget.parent.get("node").get("node");},centerPoint:null,curCoord:null});function E(J,D){this.superApply(J,D);}B.extend(E,A.WidgetController,{apply:function(){this.addViewListeners();
},addViewListeners:function(){var D=this.widget;var J=this.view;D.on("xChange",J.setXOffset,J,true);D.on("yChange",J.setYOffset,J,true);D.on("tickSize",this.onTickSizeChange,this,true);D.on("lockedChange",this.onLockChange,this,true);},onLockChange:function(){var D=this.view._dd;if(this.get("locked")){D.lock();}else{D.unlock();}},onTickSizeChange:function(){if(this.get("tickSize")===0){this.view._dd.clearTicks();}}});F.prototype.viewClass=H;F.prototype.controllerClass=E;A.SliderThumb=F;A.SliderThumbView=H;A.SliderThumbController=E;})();(function(){var C=YAHOO,G=C.util,K=G.Event,B=G.Dom,J=C.lang,F=C.widget;function I(E,D){this.constructor.superclass.constructor.apply(this,arguments);}I.NAME="Slider";I.CONFIG={group:{},thumb:{},type:{value:"horiz",validator:function(D){return(D=="horiz"||D=="vert"||D=="region");}},bgEnabled:{value:true},keysEnabled:{value:true},keyIncrement:{value:20},tickPause:{value:40},animationDuration:{value:0.2},animate:{value:!J.isUndefined(G.Anim)},locked:{value:false,set:function(E){var D=this.getThumb();if(E){D.lock();}else{D.unlock();}}}};J.extend(I,F.Widget,{initializer:function(D){if(this.get("group")){this.initThumb();}},initThumb:function(){var D=this.getThumb();D.parent=this;this.set("tickPause",D.getTickPause());},getThumb:function(){return this.get("thumb");},lock:function(){this.set("locked",true);},unlock:function(){this.set("locked",false);},isLocked:function(){return this.get("locked");},getValue:function(){return this.getThumb().getValue();},getXValue:function(){return this.getThumb().getXValue();},getYValue:function(){return this.getThumb().getYValue();},setValueToMin:function(){this._setValToLimit(false);},setValueToMax:function(){this._setValToLimit(true);},_setValToLimit:function(E){var N=(E)?"max":"min",L=this.getThumb(),M=F.SliderThumb,D=M.X,O=M.Y;if(L._isHoriz){this.setValue(L.get(N+D));}else{if(L._isVert){this.setValue(L.get(N+O));}else{this.setRegionValue(L.get(N+D),L.get(N+O));}}},setValue:function(M,L,D){if(this.isLocked()&&!L){return false;}if(isNaN(M)){return false;}var E=this.getThumb();if(E._isRegion){return false;}else{if(E._isHoriz){E.set("x",M,D);}else{if(E._isVert){E.set("y",M,D);}}}},setRegionValue:function(E,D,N,L){if(this.isLocked()&&!N){return false;}if(isNaN(E)&&isNaN(D)){return false;}var M=this.getThumb();if(E||E===0){M.set("x",E,L);}if(D||D===0){M.set("y",D,L);}},_slideStart:function(){if(!this._sliding){this.fireEvent("slideStart");this._sliding=true;}},_slideEnd:function(){if(this._sliding&&this.moveComplete){this.fireEvent("slideEnd");this._sliding=false;this.moveComplete=false;}},stepYValue:function(D){var L=this.get("keyIncrement")*D,E=this.getThumb();var M=this.getYValue()+L;if(E._isVert){this.setValue(M);}else{if(E._isRegion){this.setRegionValue(null,M);}}},stepXValue:function(D){var L=this.get("keyIncrement")*D,E=this.getThumb();var M=this.getXValue()+L;if(E._isHoriz){this.setValue(M);}else{if(E._isRegion){this.setRegionValue(M,null);}}},endMove:function(){this.unlock();this.moveComplete=true;this.fireEvent("endMove");this.fireEvents();},fireEvents:function(L){var E=this.getThumb();if(!L){this.view.cachePosition();}if(!this.isLocked()){if(E._isRegion){var N=E.getXValue();var M=E.getYValue();if(N!=this.previousX||M!=this.previousY){this.fireEvent("change",{x:N,y:M});}this.previousX=N;this.previousY=M;}else{var D=E.getValue();if(D!=this.previousVal){this.fireEvent("change",D);}this.previousVal=D;}this._slideEnd();}},focus:function(){this.view.focus();if(this.isLocked()){return false;}else{this._slideStart();return true;}}});I.INC=1;I.DEC=-1;I.getHorizSlider=function(L,E,D,O,N){var M=new F.SliderThumb(E,{group:L,minX:D,maxX:O,tickSize:N});return new I(L,{group:L,thumb:M,type:"horiz"});};I.getVertSlider=function(E,D,O,N,M){var L=new F.SliderThumb(D,{group:E,minY:O,maxY:N,tickSize:M});return new I(E,{group:E,thumb:L,type:"vert"});};I.getRegionSlider=function(L,E,D,P,Q,O,N){var M=new F.SliderThumb(E,{group:L,minX:D,maxX:P,minY:Q,maxY:O,tickSize:N});return new I(L,{group:L,thumb:M,type:"region"});};function H(D){this.superApply(D);this.thumb=D.getThumb();}J.extend(H,F.WidgetView,{render:function(){this.baselinePos=B.getXY(this.getBackgroundEl());this.thumb.render();this.thumbView=this.thumb.view;this.initDD();},update:function(){this.thumbView.update();},initDD:function(){this._dd=new G.DragDrop(this.widget.get("node").get("id"),this.widget.get("group"),true);this._dd.isTarget=false;},focus:function(){var D=this.getBackgroundEl();if(D.focus){try{D.focus();}catch(E){}}this.verifyOffset();},verifyOffset:function(E){var D=B.getXY(this.getBackgroundEl());if(D){if(D[0]!=this.baselinePos[0]||D[1]!=this.baselinePos[1]){this.thumbView._dd.resetConstraints();this.baselinePos=D;return false;}}return true;},cachePosition:function(){this.thumbView._dd.cachePosition();},getBackgroundEl:function(){return this.widget.get("node").get("node");},_dd:null});function A(E,D){this.superApply(E,D);this.thumb=this.widget.getThumb();}J.extend(A,F.WidgetController,{apply:function(){this.addKeyListeners();this.addDDListeners();this.addThumbDDListeners();this.addViewListeners();},addKeyListeners:function(){var D=this.view.getBackgroundEl();K.on(D,"keydown",this.onKeyDown,this,true);K.on(D,"keypress",this.onKeyPress,this,true);},addDDListeners:function(){var E=this,D=this.view._dd;D.onMouseUp=function(L){E.onBGMouseUp(L);};D.b4MouseDown=function(L){E.beforeBGMouseDown(L);};D.onDrag=function(L){E.onBGDrag(L);};D.onMouseDown=function(L){E.onBGMouseDown(L);};this.widget.on("endMove",this.sync,this,true);},addThumbDDListeners:function(){var E=this,D=this.thumb.view._dd;D.onMouseDown=function(L){E.onThumbMouseDown(L);};D.startDrag=function(L){E.onThumbStartDrag(L);};D.onDrag=function(L){E.onThumbDrag(L);};D.onMouseUp=function(L){E.onThumbMouseUp(L);};},addViewListeners:function(){this.widget.on("lockedChange",this.onLockChange,this,true);},sync:function(){var E=this.thumb.view.getValue(),D=this.widget;if(this.thumb._isRegion){D.setRegionValue(E[0],E[1],false,true);
}else{D.setValue(E,false,true);}},beforeBGMouseDown:function(E){var D=this.thumb.view._dd;D.autoOffset();D.resetConstraints();},onBGMouseDown:function(E){var D=this.widget;if(!D.isLocked()&&D.get("bgEnabled")){D.focus();this._moveThumb(E);}},_moveThumb:function(E){var D=K.getPageX(E);var L=K.getPageY(E);this.thumb.view.moveThumb(D,L);},onBGDrag:function(D){if(!this.widget.isLocked()){this._moveThumb(D);}},onBGMouseUp:function(E){var D=this.widget;if(!D.isLocked()&&!D.moveComplete){D.endMove();}},onThumbMouseDown:function(D){return this.widget.focus();},onThumbStartDrag:function(D){this.widget._slideStart();},onThumbDrag:function(D){this.sync();this.widget.fireEvents(true);},onThumbMouseUp:function(E){var D=this.widget;if(!D.isLocked()&&!D.moveComplete){D.endMove();}},onLockChange:function(){var D=this.view._dd;if(this.get("locked")){D.lock();}else{D.unlock();}},onKeyPress:function(D){if(this.widget.get("keysEnabled")){switch(K.getCharCode(D)){case 37:case 38:case 39:case 40:case 36:case 35:K.preventDefault(D);break;default:}}},onKeyDown:function(L){var D=this.widget,E=I;if(D.get("keysEnabled")){var M=true;switch(K.getCharCode(L)){case 37:D.stepXValue(E.DEC);break;case 38:D.stepYValue(E.DEC);break;case 39:D.stepXValue(E.INC);break;case 40:D.stepYValue(E.INC);break;case 36:D.setValueToMin();break;case 35:D.setValueToMax();break;default:M=false;}if(M){K.stopEvent(L);}}}});I.prototype.viewClass=H;I.prototype.controllerClass=A;F.Slider=I;F.SliderView=H;F.SliderController=A;})();YAHOO.register("slider",YAHOO.widget.Slider,{version:"@VERSION@",build:"@BUILD@"});