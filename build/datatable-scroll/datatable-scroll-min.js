YUI.add("datatable-scroll",function(h,g){var d=h.Lang,a=d.isString,e=d.isNumber,c=d.isArray,b;function f(j,i){return parseInt(j.getComputedStyle(i),10)|0;}h.DataTable.Scrollable=b=function(){};b.ATTRS={scrollable:{value:false,setter:"_setScrollable"}};h.mix(b.prototype,{scrollTo:function(j){var i;if(j&&this._tbodyNode&&(this._yScrollNode||this._xScrollNode)){if(c(j)){i=this.getCell(j);}else{if(e(j)){i=this.getRow(j);}else{if(a(j)){i=this._tbodyNode.one("#"+j);}else{if(j instanceof h.Node&&j.ancestor(".yui3-datatable")===this.get("boundingBox")){i=j;}}}}i&&i.scrollIntoView();}return this;},_CAPTION_TABLE_TEMPLATE:'<table class="{className}" role="presentation"></table>',_SCROLL_LINER_TEMPLATE:'<div class="{className}"></div>',_SCROLLBAR_TEMPLATE:'<div class="{className}"><div></div></div>',_X_SCROLLER_TEMPLATE:'<div class="{className}"></div>',_Y_SCROLL_HEADER_TEMPLATE:'<table cellspacing="0" aria-hidden="true" class="{className}"></table>',_Y_SCROLLER_TEMPLATE:'<div class="{className}"><div class="{scrollerClassName}"></div></div>',_addScrollbarPadding:function(){var k=this._yScrollHeader,m="."+this.getClassName("header"),n,o,p,l,j;if(k){n=h.DOM.getScrollbarWidth()+"px";o=k.all("tr");for(l=0,j=o.size();l<j;l+=+p.get("rowSpan")){p=o.item(l).all(m).pop();p.setStyle("paddingRight",n);}}},_afterScrollableChange:function(j){var i=this._xScrollNode;if(this._xScroll&&i){if(this._yScroll&&!this._yScrollNode){i.setStyle("paddingRight",h.DOM.getScrollbarWidth()+"px");}else{if(!this._yScroll&&this._yScrollNode){i.setStyle("paddingRight","");}}}this._syncScrollUI();},_afterScrollCaptionChange:function(i){if(this._xScroll||this._yScroll){this._syncScrollUI();}},_afterScrollColumnsChange:function(i){if(this._xScroll||this._yScroll){if(this._yScroll&&this._yScrollHeader){this._syncScrollHeaders();}this._syncScrollUI();}},_afterScrollDataChange:function(i){if(this._xScroll||this._yScroll){this._syncScrollUI();}},_afterScrollHeightChange:function(i){if(this._yScroll){this._syncScrollUI();}},_afterScrollSort:function(j){var k,i;if(this._yScroll&&this._yScrollHeader){i="."+this.getClassName("header");k=this._theadNode.all(i);this._yScrollHeader.all(i).each(function(m,l){m.set("className",k.item(l).get("className"));});}},_afterScrollWidthChange:function(i){if(this._xScroll||this._yScroll){this._syncScrollUI();}},_bindScrollbar:function(){var j=this._scrollbarNode,i=this._yScrollNode;if(j&&i&&!this._scrollbarEventHandle){this._scrollbarEventHandle=new h.Event.Handle([j.on("scroll",this._syncScrollPosition,this),i.on("scroll",this._syncScrollPosition,this)]);}},_bindScrollResize:function(){if(!this._scrollResizeHandle){this._scrollResizeHandle=h.on("resize",this._syncScrollUI,null,this);}},_bindScrollUI:function(){this.after({columnsChange:h.bind("_afterScrollColumnsChange",this),heightChange:h.bind("_afterScrollHeightChange",this),widthChange:h.bind("_afterScrollWidthChange",this),captionChange:h.bind("_afterScrollCaptionChange",this),scrollableChange:h.bind("_afterScrollableChange",this),sort:h.bind("_afterScrollSort",this)});this.after(["dataChange","*:add","*:remove","*:reset","*:change"],h.bind("_afterScrollDataChange",this));},_clearScrollLock:function(){if(this._scrollLock){this._scrollLock.cancel();delete this._scrollLock;}},_createScrollbar:function(){var i=this._scrollbarNode;if(!i){i=this._scrollbarNode=h.Node.create(h.Lang.sub(this._SCROLLBAR_TEMPLATE,{className:this.getClassName("scrollbar")}));i.setStyle("width",(h.DOM.getScrollbarWidth()+1)+"px");}return i;},_createScrollCaptionTable:function(){if(!this._captionTable){this._captionTable=h.Node.create(h.Lang.sub(this._CAPTION_TABLE_TEMPLATE,{className:this.getClassName("caption","table")}));this._captionTable.empty();}return this._captionTable;},_createXScrollNode:function(){if(!this._xScrollNode){this._xScrollNode=h.Node.create(h.Lang.sub(this._X_SCROLLER_TEMPLATE,{className:this.getClassName("x","scroller")}));}return this._xScrollNode;},_createYScrollHeader:function(){var i=this._yScrollHeader;if(!i){i=this._yScrollHeader=h.Node.create(h.Lang.sub(this._Y_SCROLL_HEADER_TEMPLATE,{className:this.getClassName("scroll","columns")}));}return i;},_createYScrollNode:function(){var i;if(!this._yScrollNode){i=this.getClassName("y","scroller");this._yScrollContainer=h.Node.create(h.Lang.sub(this._Y_SCROLLER_TEMPLATE,{className:this.getClassName("y","scroller","container"),scrollerClassName:i}));this._yScrollNode=this._yScrollContainer.one("."+i);}return this._yScrollContainer;},_disableScrolling:function(){this._removeScrollCaptionTable();this._disableXScrolling();this._disableYScrolling();this._unbindScrollResize();this._uiSetWidth(this.get("width"));},_disableXScrolling:function(){this._removeXScrollNode();},_disableYScrolling:function(){this._removeYScrollHeader();this._removeYScrollNode();this._removeYScrollContainer();this._removeScrollbar();},destructor:function(){this._unbindScrollbar();this._unbindScrollResize();this._clearScrollLock();},initializer:function(){this._setScrollProperties();this.after(["scrollableChange","heightChange","widthChange"],this._setScrollProperties);this.after("renderView",h.bind("_syncScrollUI",this));h.Do.after(this._bindScrollUI,this,"bindUI");},_removeScrollCaptionTable:function(){if(this._captionTable){if(this._captionNode){this._tableNode.prepend(this._captionNode);}this._captionTable.remove().destroy(true);delete this._captionTable;}},_removeXScrollNode:function(){var i=this._xScrollNode;if(i){i.replace(i.get("childNodes").toFrag());i.remove().destroy(true);delete this._xScrollNode;}},_removeYScrollContainer:function(){var i=this._yScrollContainer;if(i){i.replace(i.get("childNodes").toFrag());i.remove().destroy(true);delete this._yScrollContainer;}},_removeYScrollHeader:function(){if(this._yScrollHeader){this._yScrollHeader.remove().destroy(true);delete this._yScrollHeader;}},_removeYScrollNode:function(){var i=this._yScrollNode;if(i){i.replace(i.get("childNodes").toFrag());i.remove().destroy(true);delete this._yScrollNode;
}},_removeScrollbar:function(){if(this._scrollbarNode){this._scrollbarNode.remove().destroy(true);delete this._scrollbarNode;}if(this._scrollbarEventHandle){this._scrollbarEventHandle.detach();delete this._scrollbarEventHandle;}},_setScrollable:function(i){if(i===true){i="xy";}if(a(i)){i=i.toLowerCase();}return(i===false||i==="y"||i==="x"||i==="xy")?i:h.Attribute.INVALID_VALUE;},_setScrollProperties:function(){var k=this.get("scrollable")||"",j=this.get("width"),i=this.get("height");this._xScroll=j&&k.indexOf("x")>-1;this._yScroll=i&&k.indexOf("y")>-1;},_syncScrollPosition:function(l){var m=this._scrollbarNode,j=this._yScrollNode,k=l.currentTarget,i;if(m&&j){if(this._scrollLock&&this._scrollLock.source!==k){return;}this._clearScrollLock();this._scrollLock=h.later(300,this,this._clearScrollLock);this._scrollLock.source=k;i=(k===m)?j:m;i.set("scrollTop",k.get("scrollTop"));}},_syncScrollCaptionUI:function(){var i=this._captionNode,j=this._tableNode,k=this._captionTable,l;if(i){l=i.getAttribute("id");if(!k){k=this._createScrollCaptionTable();this.get("contentBox").prepend(k);}if(!i.get("parentNode").compareTo(k)){k.empty().insert(i);if(!l){l=h.stamp(i);i.setAttribute("id",l);}j.setAttribute("aria-describedby",l);}}else{if(k){this._removeScrollCaptionTable();}}},_syncScrollColumnWidths:function(){var i=[];if(this._theadNode&&this._yScrollHeader){this._theadNode.all("."+this.getClassName("header")).each(function(j){i.push((h.UA.ie&&h.UA.ie<8)?(j.get("clientWidth")-f(j,"paddingLeft")-f(j,"paddingRight"))+"px":j.getComputedStyle("width"));});this._yScrollHeader.all("."+this.getClassName("scroll","liner")).each(function(j,k){j.setStyle("width",i[k]);});}},_syncScrollHeaders:function(){var i=this._yScrollHeader,k=this._SCROLL_LINER_TEMPLATE,l=this.getClassName("scroll","liner"),j=this.getClassName("header"),m=this._theadNode.all("."+j);if(this._theadNode&&i){i.empty().appendChild(this._theadNode.cloneNode(true));i.all("[id]").removeAttribute("id");i.all("."+j).each(function(q,o){var n=h.Node.create(h.Lang.sub(k,{className:l})),p=m.item(o);n.setStyle("padding",p.getComputedStyle("paddingTop")+" "+p.getComputedStyle("paddingRight")+" "+p.getComputedStyle("paddingBottom")+" "+p.getComputedStyle("paddingLeft"));n.appendChild(q.get("childNodes").toFrag());q.appendChild(n);},this);this._syncScrollColumnWidths();this._addScrollbarPadding();}},_syncScrollUI:function(){var i=this._xScroll,n=this._yScroll,j=this._xScrollNode,l=this._yScrollNode,m=j&&j.get("scrollLeft"),k=l&&l.get("scrollTop");this._uiSetScrollable();if(i||n){if((this.get("width")||"").slice(-1)==="%"){this._bindScrollResize();}else{this._unbindScrollResize();}this._syncScrollCaptionUI();}else{this._disableScrolling();}if(this._yScrollHeader){this._yScrollHeader.setStyle("display","none");}if(i){if(!n){this._disableYScrolling();}this._syncXScrollUI(n);}if(n){if(!i){this._disableXScrolling();}this._syncYScrollUI(i);}if(m&&this._xScrollNode){this._xScrollNode.set("scrollLeft",m);}if(k&&this._yScrollNode){this._yScrollNode.set("scrollTop",k);}},_syncXScrollUI:function(q){var l=this._xScrollNode,o=this._yScrollContainer,p=this._tableNode,k=this.get("width"),i=this.get("boundingBox").get("offsetWidth"),n=h.DOM.getScrollbarWidth(),j,m;if(!l){l=this._createXScrollNode();(o||p).replace(l).appendTo(l);}j=f(l,"borderLeftWidth")+f(l,"borderRightWidth");l.setStyle("width","");this._uiSetDim("width","");if(q&&this._yScrollContainer){this._yScrollContainer.setStyle("width","");}if(h.UA.ie&&h.UA.ie<8){p.setStyle("width",k);p.get("offsetWidth");}p.setStyle("width","");m=p.get("offsetWidth");p.setStyle("width",m+"px");this._uiSetDim("width",k);l.setStyle("width",(i-j)+"px");if((l.get("offsetWidth")-j)>m){if(q){p.setStyle("width",(l.get("offsetWidth")-j-n)+"px");}else{p.setStyle("width","100%");}}},_syncYScrollUI:function(w){var s=this._yScrollContainer,m=this._yScrollNode,k=this._xScrollNode,j=this._yScrollHeader,v=this._scrollbarNode,u=this._tableNode,r=this._theadNode,l=this._captionTable,n=this.get("boundingBox"),q=this.get("contentBox"),i=this.get("width"),t=n.get("offsetHeight"),p=h.DOM.getScrollbarWidth(),o;if(l&&!w){l.setStyle("width",i||"100%");}if(!s){s=this._createYScrollNode();m=this._yScrollNode;u.replace(s).appendTo(m);}o=w?k:s;if(!w){u.setStyle("width","");}if(w){t-=p;}m.setStyle("height",(t-o.get("offsetTop")-f(o,"borderTopWidth")-f(o,"borderBottomWidth"))+"px");if(w){s.setStyle("width",(u.get("offsetWidth")+p)+"px");}else{this._uiSetYScrollWidth(i);}if(l&&!w){l.setStyle("width",s.get("offsetWidth")+"px");}if(r&&!j){j=this._createYScrollHeader();s.prepend(j);this._syncScrollHeaders();}if(j){this._syncScrollColumnWidths();j.setStyle("display","");if(!v){v=this._createScrollbar();this._bindScrollbar();q.prepend(v);}this._uiSetScrollbarHeight();this._uiSetScrollbarPosition(o);}},_uiSetScrollable:function(){this.get("boundingBox").toggleClass(this.getClassName("scrollable","x"),this._xScroll).toggleClass(this.getClassName("scrollable","y"),this._yScroll);},_uiSetScrollbarHeight:function(){var k=this._scrollbarNode,i=this._yScrollNode,j=this._yScrollHeader;if(k&&i&&j){k.get("firstChild").setStyle("height",this._tbodyNode.get("scrollHeight")+"px");k.setStyle("height",(parseFloat(i.getComputedStyle("height"))-parseFloat(j.getComputedStyle("height")))+"px");}},_uiSetScrollbarPosition:function(i){var k=this._scrollbarNode,j=this._yScrollHeader;if(k&&i&&j){k.setStyles({top:(parseFloat(j.getComputedStyle("height"))+f(i,"borderTopWidth")+i.get("offsetTop"))+"px",left:(i.get("offsetWidth")-h.DOM.getScrollbarWidth()-1-f(i,"borderRightWidth"))+"px"});}},_uiSetYScrollWidth:function(m){var j=this._yScrollContainer,o=this._tableNode,i,k,l,n;if(j&&o){n=h.DOM.getScrollbarWidth();if(m){k=j.get("offsetWidth")-j.get("clientWidth")+n;j.setStyle("width",m);l=j.get("clientWidth")-k;o.setStyle("width",l+"px");i=o.get("offsetWidth");j.setStyle("width",(i+n)+"px");}else{o.setStyle("width","");j.setStyle("width","");j.setStyle("width",(o.get("offsetWidth")+n)+"px");}}},_unbindScrollbar:function(){if(this._scrollbarEventHandle){this._scrollbarEventHandle.detach();
}},_unbindScrollResize:function(){if(this._scrollResizeHandle){this._scrollResizeHandle.detach();delete this._scrollResizeHandle;}}},true);h.Base.mix(h.DataTable,[b]);},"@VERSION@",{"requires":["datatable-base","datatable-column-widths","dom-screen"],"skinnable":true});