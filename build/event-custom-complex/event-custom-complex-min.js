YUI.add("event-custom-complex",function(g){var c,f,e={},b=g.CustomEvent.prototype,d=g.EventTarget.prototype,a=function(h,j){var i;for(i in j){if(j.hasOwnProperty(i)&&!c.hasOwnProperty(i)){h[i]=j[i];}}};g.EventFacade=function(i,h){i=i||e;this._event=i;this.details=i.details;this.type=i.type;this._type=i.type;this.target=i.target;this.currentTarget=h;this.relatedTarget=i.relatedTarget;};g.mix(g.EventFacade.prototype,{stopPropagation:function(){this._event.stopPropagation();this.stopped=1;},stopImmediatePropagation:function(){this._event.stopImmediatePropagation();this.stopped=2;},preventDefault:function(){this._event.preventDefault();this.prevented=1;},halt:function(h){this._event.halt(h);this.prevented=1;this.stopped=(h)?2:1;}});b.fireComplex=function(r){var s,m,h,o,j,p,v,k,i,u=this,t=u.host||u,n,l;if(u.stack){if(u.queuable&&u.type!=u.stack.next.type){u.log("queue "+u.type);u.stack.queue.push([u,r]);return true;}}s=u.stack||{id:u.id,next:u,silent:u.silent,stopped:0,prevented:0,bubbling:null,type:u.type,afterQueue:new g.Queue(),defaultTargetOnly:u.defaultTargetOnly,queue:[]};k=u.getSubs();u.stopped=(u.type!==s.type)?0:s.stopped;u.prevented=(u.type!==s.type)?0:s.prevented;u.target=u.target||t;if(u.stoppedFn){v=new g.EventTarget({fireOnce:true,context:t});u.events=v;v.on("stopped",u.stoppedFn);}u.currentTarget=t;u.details=r.slice();u.log("Firing "+u.type);u._facade=null;m=u._getFacade(r);if(g.Lang.isObject(r[0])){r[0]=m;}else{r.unshift(m);}if(k[0]){u._procSubs(k[0],r,m);}if(u.bubbles&&t.bubble&&!u.stopped){l=s.bubbling;s.bubbling=u.type;if(s.type!=u.type){s.stopped=0;s.prevented=0;}p=t.bubble(u,r,null,s);u.stopped=Math.max(u.stopped,s.stopped);u.prevented=Math.max(u.prevented,s.prevented);s.bubbling=l;}if(u.prevented){if(u.preventedFn){u.preventedFn.apply(t,r);}}else{if(u.defaultFn&&((!u.defaultTargetOnly&&!s.defaultTargetOnly)||t===m.target)){u.defaultFn.apply(t,r);}}u._broadcast(r);if(k[1]&&!u.prevented&&u.stopped<2){if(s.id===u.id||u.type!=t._yuievt.bubbling){u._procSubs(k[1],r,m);while((n=s.afterQueue.last())){n();}}else{i=k[1];if(s.execDefaultCnt){i=g.merge(i);g.each(i,function(q){q.postponed=true;});}s.afterQueue.add(function(){u._procSubs(i,r,m);});}}u.target=null;if(s.id===u.id){o=s.queue;while(o.length){h=o.pop();j=h[0];s.next=j;j.fire.apply(j,h[1]);}u.stack=null;}p=!(u.stopped);if(u.type!=t._yuievt.bubbling){s.stopped=0;s.prevented=0;u.stopped=0;u.prevented=0;}return p;};b._getFacade=function(){var h=this._facade,j,i=this.details;if(!h){h=new g.EventFacade(this,this.currentTarget);}j=i&&i[0];if(g.Lang.isObject(j,true)){a(h,j);h.type=j.type||h.type;}h.details=this.details;h.target=this.originalTarget||this.target;h.currentTarget=this.currentTarget;h.stopped=0;h.prevented=0;this._facade=h;return this._facade;};b.stopPropagation=function(){this.stopped=1;if(this.stack){this.stack.stopped=1;}if(this.events){this.events.fire("stopped",this);}};b.stopImmediatePropagation=function(){this.stopped=2;if(this.stack){this.stack.stopped=2;}if(this.events){this.events.fire("stopped",this);}};b.preventDefault=function(){if(this.preventable){this.prevented=1;if(this.stack){this.stack.prevented=1;}}};b.halt=function(h){if(h){this.stopImmediatePropagation();}else{this.stopPropagation();}this.preventDefault();};d.addTarget=function(h){this._yuievt.targets[g.stamp(h)]=h;this._yuievt.hasTargets=true;};d.getTargets=function(){return g.Object.values(this._yuievt.targets);};d.removeTarget=function(h){delete this._yuievt.targets[g.stamp(h)];};d.bubble=function(v,r,p,u){var n=this._yuievt.targets,q=true,w,s=v&&v.type,j,m,o,k,h=p||(v&&v.target)||this,l;if(!v||((!v.stopped)&&n)){for(m in n){if(n.hasOwnProperty(m)){w=n[m];j=w.getEvent(s,true);k=w.getSibling(s,j);if(k&&!j){j=w.publish(s);}l=w._yuievt.bubbling;w._yuievt.bubbling=s;if(!j){if(w._yuievt.hasTargets){w.bubble(v,r,h,u);}}else{j.sibling=k;j.target=h;j.originalTarget=h;j.currentTarget=w;o=j.broadcast;j.broadcast=false;j.emitFacade=true;j.stack=u;q=q&&j.fire.apply(j,r||v.details||[]);j.broadcast=o;j.originalTarget=null;if(j.stopped){break;}}w._yuievt.bubbling=l;}}}return q;};c=new g.EventFacade();f=g.Object.keys(c);},"@VERSION@",{requires:["event-custom-base"]});