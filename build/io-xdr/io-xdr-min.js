YUI.add("io-xdr",function(a,m){var k=a.publish("io:xdrReady",{fireOnce:true}),e={},h={},j=a.config.doc,l=a.config.win,f=l&&l.XDomainRequest;function g(n,r,d){var p='<object id="io_swf" type="application/x-shockwave-flash" data="'+n+'" width="0" height="0">'+'<param name="movie" value="'+n+'">'+'<param name="FlashVars" value="yid='+r+"&uid="+d+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",q=j.createElement("div");j.body.appendChild(q);q.innerHTML=p;}function b(q,n,p){if(n==="flash"){q.c.responseText=decodeURI(q.c.responseText);}if(p==="xml"){q.c.responseXML=a.DataType.XML.parse(q.c.responseText);}return q;}function i(d,n){return d.c.abort(d.id,n);}function c(d){return f?h[d.id]!==4:d.c.isInProgress(d.id);}a.mix(a.IO.prototype,{_transport:{},_ieEvt:function(p,r){var q=this,n=p.id,d="timeout";p.c.onprogress=function(){h[n]=3;};p.c.onload=function(){h[n]=4;q.xdrResponse("success",p,r);};p.c.onerror=function(){h[n]=4;q.xdrResponse("failure",p,r);};if(r[d]){p.c.ontimeout=function(){h[n]=4;q.xdrResponse(d,p,r);};p.c[d]=r[d];}},xdr:function(d,n,q){var p=this;if(q.xdr.use==="flash"){e[n.id]=q;l.setTimeout(function(){try{n.c.send(d,{id:n.id,uid:n.uid,method:q.method,data:q.data,headers:q.headers});}catch(o){p.xdrResponse("transport error",n,q);delete e[n.id];}},a.io.xdr.delay);}else{if(f){p._ieEvt(n,q);n.c.open(q.method||"GET",d);n.c.send(q.data);}else{n.c.send(d,n,q);}}return{id:n.id,abort:function(){return n.c?i(n,q):false;},isInProgress:function(){return n.c?c(n.id):false;},io:p};},xdrResponse:function(q,s,v){v=e[s.id]?e[s.id]:v;var t=this,n=f?h:e,p=v.xdr.use,r=v.xdr.dataType;switch(q){case"start":t.start(s,v);break;case"success":t.success(b(s,p,r),v);delete n[s.id];break;case"timeout":case"abort":case"transport error":s.c={status:0,statusText:q};case"failure":t.failure(b(s,p,r),v);delete n[s.id];break;}},_xdrReady:function(n,d){a.fire(k,n,d);},transport:function(d){if(d.id==="flash"){g(a.UA.ie?d.src+"?d="+new Date().valueOf().toString():d.src,a.id,d.uid);a.IO.transports.flash=function(){return j.getElementById("io_swf");};}}});a.io.xdrReady=function(o,d){var n=a.io._map[d];a.io.xdr.delay=0;n._xdrReady.apply(n,[o,d]);};a.io.xdrResponse=function(d,n,q){var p=a.io._map[n.uid];p.xdrResponse.apply(p,[d,n,q]);};a.io.transport=function(n){var d=a.io._map["io:0"]||new a.IO();n.uid=d._uid;d.transport.apply(d,[n]);};a.io.xdr={delay:100};},"@VERSION@",{"requires":["io-base","datatype-xml-parse"]});