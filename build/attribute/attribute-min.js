YUI.add("attribute",function(B){B.State=function(){this.data={};};B.State.prototype={add:function(O,R){B.each(R,function(T,S){if(!this.data[S]){this.data[S]={};}this.data[S][O]=T;},this);},remove:function(R,T){var S=this.data,O=function(U){if(S[U]&&(R in S[U])){delete S[U][R];}};if(B.Lang.isString(T)){O(T);}else{B.each(T||S,function(V,U){if(B.Lang.isString(U)){O(U);}else{O(V);}},this);}},get:function(O,R){var T=this.data,S;if(R){return(T[R]&&O in T[R])?T[R][O]:undefined;}else{B.each(T,function(V,U){if(O in T[U]){S=S||{};S[U]=V[O];}},this);return S;}}};var J=B.Object,K=".",G="Change",M="get",F="set",E="getter",C="setter",I="value",P="init",L="initValue",N="readOnly",H="writeOnce",D="validator",Q=B.EventTarget;function A(){Q.call(this,{emitFacade:true});this._conf=new B.State();}A.prototype={addAttr:function(R,O){if(!this.attrAdded(R)){O=O||{};var T,S=(I in O);if(S){T=O.value;delete O.value;}O[P]=true;this._conf.add(R,O);if(S){this.set(R,T);}}else{}return this;},attrAdded:function(O){return !!(this._conf.get(O,P));},removeAttr:function(O){this._conf.remove(O);},get:function(S){var R=this._conf,T,O,U;if(S.indexOf(K)!==-1){T=S.split(K);S=T.shift();}U=R.get(S,I);O=R.get(S,E)||R.get(S,M);U=(O)?O.call(this,U):U;U=(T)?J.getValue(U,T):U;return U;},set:function(O,S,R){return this._setAttr(O,S,R);},reset:function(R){if(R){this._set(R,this._conf.get(R,L));}else{var O=this._conf.data.initValue;B.each(O,function(S,T){this._set(T,S);},this);}return this;},_set:function(O,S,R){return this._setAttr(O,S,R,true);},_setAttr:function(R,U,O,S){var Z=this._conf,X=Z.data,W=true,V=(!X.value||!(R in X.value)),Y,a,T;if(R.indexOf(K)!==-1){Y=R;a=R.split(K);R=a.shift();}if(!V&&!S){if(Z.get(R,H)){W=false;}if(Z.get(R,N)){W=false;}}if(!Z.get(R)){W=false;}T=this.get(R);if(a){U=J.setValue(B.clone(T),a,U);if(U===undefined){W=false;}}if(W){this._fireAttrChange(R,T,U,R,Y,O);}return this;},_fireAttrChange:function(T,V,O,R,W,U){T=T+G;this.publish(T,{queuable:false,defaultFn:this._defAttrChangeFn,silent:true});var S={type:T,prevVal:V,newVal:O,attrName:R,subAttrName:W};if(U){B.mix(S,U);}this.fire(S);},_defAttrChangeFn:function(W){var S=this._conf,R=W.attrName,X=W.newVal,O=S.get(R,D),U=S.get(R,C)||S.get(R,F),T,V;if(!O||O.call(this,X)){if(U){V=U.call(this,X);if(V!==undefined){X=V;}}T={value:X};if(S.get(R,L)===undefined){T[L]=X;}S.add(R,T);W.newVal=S.get(R,I);}else{W.stopImmediatePropagation();}},setAttrs:function(R){for(var O in R){if(R.hasOwnProperty(O)){this.set(O,R[O]);}}return this;},getAttrs:function(T){var W={},U,R,O,V,S=(T===true);T=(T&&!S)?T:J.keys(this._conf.data[I]);for(U=0,R=T.length;U<R;U++){O=T[U];V=this.get(O);if(!S||this._conf.get(O,I)!=this._conf.get(O,L)){W[O]=this.get(O);}}return W;},addAttrs:function(R,S){if(R){var O,T,U;S=this._splitAttrVals(S);for(O in R){if(R.hasOwnProperty(O)){T=R[O];U=this._getAttrInitVal(O,T,S);if(U!==undefined){T.value=U;}this.addAttr(O,T);}}}return this;},_splitAttrVals:function(T){var V={},U={},W,O,S,R;for(R in T){if(T.hasOwnProperty(R)){if(R.indexOf(K)!==-1){W=R.split(K);O=W.shift();S=U[O]=U[O]||[];S[S.length]={path:W,value:T[R]};}else{V[R]=T[R];}}}return{simple:V,complex:U};},_getAttrInitVal:function(X,V,Z){var R=(V.valueFn)?V.valueFn.call(this):V.value,O,S,U,T,a,Y,W;if(!V[N]&&Z){O=Z.simple;if(O&&O.hasOwnProperty(X)){R=O[X];}S=Z.complex;if(S&&S.hasOwnProperty(X)){W=S[X];for(U=0,T=W.length;U<T;++U){a=W[U].path;Y=W[U].value;J.setValue(R,a,Y);}}}return R;}};B.mix(A,Q,false,null,1);B.Attribute=A;},"@VERSION@",{requires:["event-custom"]});