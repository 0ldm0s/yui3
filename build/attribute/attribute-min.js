YUI.add("attribute",function(C){C.State=function(){this.data={};};C.State.prototype={add:function(O,Y,a){var Z=this.data;Z[Y]=Z[Y]||{};Z[Y][O]=a;},addAll:function(O,Z){var Y;for(Y in Z){if(Z.hasOwnProperty(Y)){this.add(O,Y,Z[Y]);}}},remove:function(O,Y){var Z=this.data;if(Z[Y]&&(O in Z[Y])){delete Z[Y][O];}},removeAll:function(O,Z){var Y=this.data;C.each(Z||Y,function(b,a){if(C.Lang.isString(a)){this.remove(O,a);}else{this.remove(O,b);}},this);},get:function(O,Y){var Z=this.data;return(Z[Y]&&O in Z[Y])?Z[Y][O]:undefined;},getAll:function(O){var Z=this.data,Y;C.each(Z,function(b,a){if(O in Z[a]){Y=Y||{};Y[a]=b[O];}},this);return Y;}};var I=C.Object,J=C.EventTarget,T=".",R="Change",L="getter",K="setter",G="value",W="added",B="initializing",H="initValue",M="readOnly",U="writeOnce",X="validator",S="published",E="broadcast",Q="defaultValue",A="lazy",P="lazyAdd",N="isLazyAdd",F,V={};V[M]=1;V[U]=1;V[L]=1;V[E]=1;function D(){this._ATTR_E_FACADE={};J.call(this,{emitFacade:true});this._conf=new C.State();}D.INVALID_VALUE={};F=D.INVALID_VALUE;D.prototype={addAttr:function(Z,Y,b){var O=this._conf;b=(P in Y)?Y[P]:b;if(b&&!this.attrAdded(Z)){O.add(Z,A,Y||{});O.add(Z,W,true);}else{if(!this.attrAdded(Z)||O.get(Z,N)){Y=Y||{};var c,a=(G in Y);if(a){c=Y.value;delete Y.value;}Y.added=true;Y.initializing=true;O.addAll(Z,Y);if(a){this.set(Z,c);}O.remove(Z,B);}}return this;},attrAdded:function(O){return !!this._conf.get(O,W);},modifyAttr:function(Z,Y){if(this.attrAdded(Z)){if(this._isLazyAttr(Z)){this._addLazyAttr(Z);}var a,O=this._conf;for(a in Y){if(V[a]&&Y.hasOwnProperty(a)){O.add(Z,a,Y[a]);if(a===E){O.remove(Z,S);}}}}},removeAttr:function(O){this._conf.removeAll(O);},get:function(a){var d=a,Z=this._conf,b,O,c;if(a.indexOf(T)!==-1){b=a.split(T);a=b.shift();}if(this._tCfgs&&this._tCfgs[a]){var Y={};Y[a]=this._tCfgs[a];delete this._tCfgs[a];this._addAttrs(Y,this._tVals);}if(this._isLazyAttr(a)){this._addLazyAttr(a);}c=Z.get(a,G);O=Z.get(a,L);c=(O)?O.call(this,c,d):c;c=(b)?I.getValue(c,b):c;return c;},_isLazyAttr:function(O){return this._conf.get(O,A);},_addLazyAttr:function(Z){var Y=this._conf;var O=Y.get(Z,A);Y.add(Z,N,true);Y.remove(Z,A);this.addAttr(Z,O);},set:function(O,Z,Y){return this._setAttr(O,Z,Y);},reset:function(O){if(O){if(this._isLazyAttr(O)){this._addLazyAttr(O);}this.set(O,this._conf.get(O,H));}else{var Y=this._conf.data.added;C.each(Y,function(Z,a){this.reset(a);},this);}return this;},_set:function(O,Z,Y){return this._setAttr(O,Z,Y,true);},_setAttr:function(Y,b,O,Z){var d=true,g=this._conf,e=g.data,c,f,h,a;if(Y.indexOf(T)!==-1){f=Y;h=Y.split(T);Y=h.shift();}if(this._isLazyAttr(Y)){this._addLazyAttr(Y);}c=(!e.value||!(Y in e.value));if(!this.attrAdded(Y)){}else{if(!c&&!Z){if(g.get(Y,U)){d=false;}if(g.get(Y,M)){d=false;}}if(d){a=this.get(Y);if(h){b=I.setValue(C.clone(a),h,b);if(b===undefined){d=false;}}if(d){if(g.get(Y,B)){this._setAttrVal(Y,f,a,b);}else{this._fireAttrChange(Y,f,a,b,O);}}}}return this;},_fireAttrChange:function(a,e,d,Z,c){var O=a+R,Y=this._conf,b;if(!Y.get(a,S)){this.publish(O,{queuable:false,defaultFn:this._defAttrChangeFn,silent:true,broadcast:Y.get(a,E)});Y.add(a,S,true);}b=(c)?C.merge(c):this._ATTR_E_FACADE;b.type=O;b.attrName=a;b.subAttrName=e;b.prevVal=d;b.newVal=Z;this.fire(b);},_defAttrChangeFn:function(O){if(!this._setAttrVal(O.attrName,O.subAttrName,O.prevVal,O.newVal)){O.stopImmediatePropagation();}else{O.newVal=this._conf.get(O.attrName,G);}},_setAttrVal:function(i,h,c,b){var e=true,g=this._conf,Z=g.get(i,X),d=g.get(i,K),f=g.get(i,B),Y=h||i,a;if(Z){var O=Z.call(this,b,Y);if(!O&&f){b=g.get(i,Q);O=true;}}if(!Z||O){if(d){a=d.call(this,b,Y);if(a===F){e=false;}else{if(a!==undefined){b=a;}}}if(e){if(!h&&b===c){e=false;}else{if(g.get(i,H)===undefined){g.add(i,H,b);}g.add(i,G,b);}}}else{e=false;}return e;},setAttrs:function(Y){for(var O in Y){if(Y.hasOwnProperty(O)){this.set(O,Y[O]);}}return this;},getAttrs:function(a){var d={},b,Y,O,c,Z=(a===true);a=(a&&!Z)?a:I.keys(this._conf.data.added);for(b=0,Y=a.length;b<Y;b++){O=a[b];c=this.get(O);if(!Z||this._conf.get(O,G)!=this._conf.get(O,H)){d[O]=this.get(O);}}return d;},addAttrs:function(O,Y,Z){if(O){this._tCfgs=O;this._tVals=this._splitAttrVals(Y);this._addAttrs(O,this._tVals,Z);this._tCfgs=this._tVals=null;}return this;},_addAttrs:function(Y,Z,a){var O,b,c;for(O in Y){if(Y.hasOwnProperty(O)){b=Y[O];b.defaultValue=b.value;c=this._getAttrInitVal(O,b,this._tVals);if(c!==undefined){b.value=c;}if(this._tCfgs[O]){delete this._tCfgs[O];}this.addAttr(O,b,a);}}},_splitAttrVals:function(a){var c={},b={},d,O,Z,Y;if(a){for(Y in a){if(a.hasOwnProperty(Y)){if(Y.indexOf(T)!==-1){d=Y.split(T);O=d.shift();Z=b[O]=b[O]||[];Z[Z.length]={path:d,value:a[Y]};}else{c[Y]=a[Y];}}}return{simple:c,complex:b};}else{return null;}},_getAttrInitVal:function(e,c,g){var Y=(c.valueFn)?c.valueFn.call(this):c.value,O,Z,b,a,h,f,d;if(!c.readOnly&&g){O=g.simple;if(O&&O.hasOwnProperty(e)){Y=O[e];}Z=g.complex;if(Z&&Z.hasOwnProperty(e)){d=Z[e];for(b=0,a=d.length;b<a;++b){h=d[b].path;f=d[b].value;I.setValue(Y,h,f);}}}return Y;}};C.mix(D,J,false,null,1);C.Attribute=D;},"@VERSION@",{requires:["event-custom"]});