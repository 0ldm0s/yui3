YUI.add("attribute",function(B){B.State=function(){this.data={};};B.State.prototype={add:function(O,T,V){var U=this.data;U[T]=U[T]||{};U[T][O]=V;},addAll:function(O,U){var T;for(T in U){if(U.hasOwnProperty(T)){this.add(O,T,U[T]);}}},remove:function(O,T){var U=this.data;if(U[T]&&(O in U[T])){delete U[T][O];}},removeAll:function(O,U){var T=this.data;B.each(U||T,function(W,V){if(B.Lang.isString(V)){this.remove(O,V);}else{this.remove(O,W);}},this);},get:function(O,T){var U=this.data;return(U[T]&&O in U[T])?U[T][O]:undefined;},getAll:function(O){var U=this.data,T;B.each(U,function(W,V){if(O in U[V]){T=T||{};T[V]=W[O];}},this);return T;}};var H=B.Object,P=".",M="Change",K="getter",J="setter",F="value",R="added",A="initializing",G="initValue",L="readOnly",Q="writeOnce",S="validator",N="published",D="broadcast",E,I=B.EventTarget;function C(){this._ATTR_E_FACADE={};I.call(this,{emitFacade:true});this._conf=new B.State();}C.INVALID_VALUE={};E=C.INVALID_VALUE;C.prototype={addAttr:function(U,T){if(!this.attrAdded(U)){T=T||{};var W,V=(F in T),O=this._conf;if(V){W=T.value;delete T.value;}T[R]=true;T[A]=true;O.addAll(U,T);if(V){this.set(U,W);}O.remove(U,A);}else{}return this;},attrAdded:function(O){return !!(this._conf.get(O,R));},removeAttr:function(O){this._conf.removeAll(O);},get:function(U){var X=U,T=this._conf,V,O,W;if(U.indexOf(P)!==-1){V=U.split(P);U=V.shift();}W=T.get(U,F);O=T.get(U,K);W=(O)?O.call(this,W,X):W;W=(V)?H.getValue(W,V):W;return W;},set:function(O,U,T){return this._setAttr(O,U,T);},reset:function(T){if(T){this.set(T,this._conf.get(T,G));}else{var O=this._conf.data.initValue;B.each(O,function(U,V){this.set(V,U);},this);}return this;},_set:function(O,U,T){return this._setAttr(O,U,T,true);},_setAttr:function(T,W,O,U){var Y=true,b=this._conf,Z=b.data,X,a,c,V;if(T.indexOf(P)!==-1){a=T;c=T.split(P);T=c.shift();}X=(!Z.value||!(T in Z.value));if(!this.attrAdded(T)){}else{if(!X&&!U){if(b.get(T,Q)){Y=false;}if(b.get(T,L)){Y=false;}}if(Y){V=this.get(T);if(c){W=H.setValue(B.clone(V),c,W);if(W===undefined){Y=false;}}if(Y){if(b.get(T,A)){this._setAttrVal(T,a,V,W);}else{this._fireAttrChange(T,a,V,W,O);}}}}return this;},_fireAttrChange:function(Z,Y,V,U,O){var W=Z+M,X=this._conf,a;if(!X.get(Z,N)){var T={queuable:false,defaultFn:this._defAttrChangeFn,silent:true};T.broadcast=X.get(Z,D);this.publish(W,T);X.add(Z,N,true);}a=(O)?B.merge(O):this._ATTR_E_FACADE;a.type=W;a.attrName=Z;a.subAttrName=Y;a.prevVal=V;a.newVal=U;this.fire(a);},_defAttrChangeFn:function(O){if(!this._setAttrVal(O.attrName,O.subAttrName,O.prevVal,O.newVal)){O.stopImmediatePropagation();}else{O.newVal=this._conf.get(O.attrName,F);}},_setAttrVal:function(b,a,W,V){var Y=true,Z=this._conf,T=Z.get(b,S),X=Z.get(b,J),O=a||b,U;if(!T||T.call(this,V,O)){if(X){U=X.call(this,V,O);if(U===E){Y=false;}else{if(U!==undefined){V=U;}}}if(Y){if(!a&&V===W){Y=false;}else{if(Z.get(b,G)===undefined){Z.add(b,G,V);}Z.add(b,F,V);}}}else{Y=false;}return Y;},setAttrs:function(T){for(var O in T){if(T.hasOwnProperty(O)){this.set(O,T[O]);}}return this;},getAttrs:function(V){var Y={},W,T,O,X,U=(V===true);V=(V&&!U)?V:H.keys(this._conf.data[F]);for(W=0,T=V.length;W<T;W++){O=V[W];X=this.get(O);if(!U||this._conf.get(O,F)!=this._conf.get(O,G)){Y[O]=this.get(O);}}return Y;},addAttrs:function(T,U){if(T){var O,V,W;U=this._splitAttrVals(U);for(O in T){if(T.hasOwnProperty(O)){V=T[O];W=this._getAttrInitVal(O,V,U);if(W!==undefined){V.value=W;}this.addAttr(O,V);}}}return this;},_splitAttrVals:function(V){var X={},W={},Y,O,U,T;for(T in V){if(V.hasOwnProperty(T)){if(T.indexOf(P)!==-1){Y=T.split(P);O=Y.shift();U=W[O]=W[O]||[];U[U.length]={path:Y,value:V[T]};}else{X[T]=V[T];}}}return{simple:X,complex:W};},_getAttrInitVal:function(Z,X,b){var T=(X.valueFn)?X.valueFn.call(this):X.value,O,U,W,V,c,a,Y;if(!X[L]&&b){O=b.simple;if(O&&O.hasOwnProperty(Z)){T=O[Z];}U=b.complex;if(U&&U.hasOwnProperty(Z)){Y=U[Z];for(W=0,V=Y.length;W<V;++W){c=Y[W].path;a=Y[W].value;H.setValue(T,c,a);}}}return T;}};B.mix(C,I,false,null,1);B.Attribute=C;},"@VERSION@",{requires:["event-custom"]});