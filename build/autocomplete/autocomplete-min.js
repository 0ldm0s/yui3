YUI.add("autocomplete-base",function(f){var g=f.Escape,j=f.Lang,q=f.Array,i=f.Object,s=j.isArray,d=j.isFunction,r=j.isObject,t=j.isString,w=j.trim,m=f.Attribute.INVALID_VALUE,o="_functionValidator",z="_sourceSuccess",c="allowBrowserAutocomplete",h="inputNode",y="query",e="queryDelimiter",b="requestTemplate",l="results",n="resultListLocator",k="value",u="valueChange",a="clear",v=y,p=l;function x(){f.before(this._bindUIACBase,this,"bindUI");f.before(this._destructorACBase,this,"destructor");f.before(this._syncUIACBase,this,"syncUI");this.publish(a,{defaultFn:this._defClearFn,queueable:true});this.publish(v,{defaultFn:this._defQueryFn,queueable:true});this.publish(p,{defaultFn:this._defResultsFn,queueable:true});}x.ATTRS={allowBrowserAutocomplete:{value:false},inputNode:{setter:f.one,writeOnce:"initOnly"},maxResults:{value:0},minQueryLength:{value:1},query:{readOnly:true,value:null},queryDelay:{value:100},queryDelimiter:{value:null},requestTemplate:{setter:"_setRequestTemplate",value:null},resultFilters:{setter:"_setResultFilters",value:[]},resultFormatter:{validator:o},resultHighlighter:{setter:"_setResultHighlighter"},resultListLocator:{setter:"_setLocator"},results:{readOnly:true,value:[]},resultTextLocator:{setter:"_setLocator"},source:{setter:"_setSource"},tokenInput:{readOnly:true},value:{value:""}};x.CSS_PREFIX="ac";x.UI_SRC=(f.Widget&&f.Widget.UI_SRC)||"ui";x.prototype={sendRequest:function(C,D){var A,B=this.get("source");if(B){if(C||C===""){this._set(y,C);}else{C=this.get(y);}if(!D){D=this.get(b);}A=D?D(C):C;B.sendRequest({request:A,callback:{success:f.bind(this._onResponse,this,C)}});}return this;},_bindUIACBase:function(){var B=this.get(h),A=B&&B.tokenInput;if(A){B=A.get(h);this._set("tokenInput",A);}if(!B){f.error("No inputNode specified.");return;}this._inputNode=B;this._acBaseEvents=[B.on(u,this._onInputValueChange,this),this.after(c+"Change",this._syncBrowserAutocomplete),this.after(u,this._afterValueChange)];},_destructorACBase:function(){var A=this._acBaseEvents;while(A&&A.length){A.pop().detach();}},_syncUIACBase:function(){this._syncBrowserAutocomplete();this.set(k,this.get(h).get(k),{src:x.UI_SRC});},_createArraySource:function(B){var A=this;return{sendRequest:function(C){A[z](B.concat(),C);}};},_createObjectSource:function(B){var A=this;return{sendRequest:function(C){var D=C.request;A[z](i.owns(B,D)?B[D]:[],C);}};},_functionValidator:function(A){return A===null||d(A);},_getObjectValue:function(D,C){if(!D){return;}for(var B=0,A=C.length;D&&B<A;B++){D=D[C[B]];}return D;},_parseResponse:function(C,A,R){var I={data:R,query:C,results:[]},K=this.get(n),J=[],H=A&&A.results,E,B,L,D,Q,M,N,O,F,G,P;if(H&&K){H=K(H);}if(H&&H.length){E=this.get("resultFilters");P=this.get("resultTextLocator");for(M=0,N=H.length;M<N;++M){F=H[M];G=P?P(F):F.toString();J.push({display:g.html(G),raw:F,text:G});}for(M=0,N=E.length;M<N;++M){J=E[M](C,J.concat());if(!J){return;}if(!J.length){break;}}if(J.length){L=this.get("resultFormatter");Q=this.get("resultHighlighter");O=this.get("maxResults");if(O&&O>0&&J.length>O){J.length=O;}if(Q){D=Q(C,J.concat());if(!D){return;}for(M=0,N=D.length;M<N;++M){F=J[M];F.highlighted=D[M];F.display=F.highlighted;}}if(L){B=L(C,J.concat());if(!B){return;}for(M=0,N=B.length;M<N;++M){J[M].display=B[M];}}}}I.results=J;this.fire(p,I);},_parseValue:function(A){var B=this.get(e);if(B){A=A.split(B);A=A[A.length-1];}return j.trimLeft(A);},_setLocator:function(A){if(this[o](A)){return A;}var B=this;A=A.toString().split(".");return function(C){return C&&B._getObjectValue(C,A);};},_setRequestTemplate:function(A){if(this[o](A)){return A;}A=A.toString();return function(B){return j.sub(A,{query:encodeURIComponent(B)});};},_setResultFilters:function(C){var A,B;if(C===null){return[];}A=f.AutoCompleteFilters;B=function(D){if(d(D)){return D;}if(t(D)&&A&&d(A[D])){return A[D];}return false;};if(s(C)){C=q.map(C,B);return q.every(C,function(D){return !!D;})?C:m;}else{C=B(C);return C?[C]:m;}},_setResultHighlighter:function(A){var B;if(this._functionValidator(A)){return A;}B=f.AutoCompleteHighlighters;if(t(A)&&B&&d(B[A])){return B[A];}return m;},_setSource:function(B){var A="autocomplete-sources module not loaded";if((B&&d(B.sendRequest))||B===null){return B;}else{if(t(B)){if(this._createStringSource){return this._createStringSource(B);}else{f.error(A);}}else{if(s(B)){return this._createArraySource(B);}else{if(r(B)){return this._createObjectSource(B);}else{if(f.JSONPRequest&&B instanceof f.JSONPRequest){if(this._createJSONPSource){return this._createJSONPSource(B);}else{f.error(A);}}}}}}return m;},_sourceSuccess:function(B,A){A.callback.success({data:B,response:{results:B}});},_syncBrowserAutocomplete:function(){var A=this.get(h);if(A.get("nodeName").toLowerCase()==="input"){A.setAttribute("autocomplete",this.get(c)?"on":"off");}},_updateValue:function(B){var D=this.get(e),C,A,E;B=j.trimLeft(B);if(D){C=w(D);E=q.map(w(this.get(k)).split(D),w);A=E.length;if(A>1){E[A-1]=B;B=E.join(C+" ");}B=B+C+" ";}this.set(k,B);},_afterValueChange:function(G){var C,D,A,B=G.newVal,F,E;if(G.src!==x.UI_SRC){this._inputNode.set(k,B);return;}A=this.get("minQueryLength");F=this._parseValue(B)||"";if(A>=0&&F.length>=A){C=this.get("queryDelay");E=this;D=function(){E.fire(v,{inputValue:B,query:F});};if(C){clearTimeout(this._delay);this._delay=setTimeout(D,C);}else{D();}}else{clearTimeout(this._delay);this.fire(a);}},_onInputValueChange:function(B){var A=B.newVal;if(A===this.get(k)){return;}this.set(k,A,{src:x.UI_SRC});},_onResponse:function(A,B){if(A===this.get(y)){this._parseResponse(A,B.response,B.data);}},_defClearFn:function(){this._set(y,null);this._set(l,[]);},_defQueryFn:function(B){var A=B.query;this.sendRequest(A);},_defResultsFn:function(A){this._set(l,A[l]);}};f.AutoCompleteBase=x;},"@VERSION@",{requires:["array-extras","base-build","escape","event-valuechange","node-base"],optional:["autocomplete-sources"]});YUI.add("autocomplete-sources",function(g){var e=g.Lang,a="_sourceSuccess",c="maxResults",d="requestTemplate",b="resultListLocator";
function f(){}f.prototype={_YQL_SOURCE_REGEX:/^(?:select|set|use)\s+/i,_createIOSource:function(l){var i={},j={},k=this,n,h,m;j.sendRequest=function(p){var o=function(s){var t=s.request,q,u,r;if(i[t]){k[a](i[t],s);}else{q=k.get(c);u=k.get(d);r=l;if(u){r+=u(t);}r=e.sub(r,{maxResults:q>0?q:1000,query:encodeURIComponent(t)});if(n&&n.isInProgress()){n.abort();}n=g.io(r,{on:{success:function(y,v){var x;try{x=g.JSON.parse(v.responseText);}catch(w){g.error("JSON parse error",w);}if(x){i[t]=x;k[a](x,s);}}}});}};h=p;if(!m){m=true;g.use("io-base","json-parse",function(){j.sendRequest=o;o(h);});}};return j;},_createJSONPSource:function(l){var i={},j={},k=this,h,m;j.sendRequest=function(o){var n=function(p){var q=p.request;if(i[q]){k[a](i[q],p);}else{l._config.on.success=function(r){i[q]=r;k[a](r,p);};l.send(q);}};h=o;if(!m){m=true;g.use("jsonp",function(){if(!(l instanceof g.JSONPRequest)){l=new g.JSONPRequest(l,{format:g.bind(k._jsonpFormatter,k)});}j.sendRequest=n;n(h);});}};return j;},_createStringSource:function(h){if(this._YQL_SOURCE_REGEX.test(h)){return this._createYQLSource(h);}else{if(h.indexOf("{callback}")!==-1){return this._createJSONPSource(h);}else{return this._createIOSource(h);}}},_createYQLSource:function(k){var i={},l={},j=this,h,m;if(!this.get(b)){this.set(b,this._defaultYQLLocator);}l.sendRequest=function(p){var o,n=function(t){var u=t.request,v,q,s,r;if(i[u]){j[a](i[u],t);}else{v=function(w){i[u]=w;j[a](w,t);};q=j.get(c);s={proto:j.get("yqlProtocol")};r=e.sub(k,{maxResults:q>0?q:1000,query:u});if(o){o._callback=v;o._opts=s;o._params.q=r;}else{o=new g.YQLRequest(r,v,null,s);}o.send();}};h=p;if(!m){m=true;g.use("yql",function(){l.sendRequest=n;n(h);});}};return l;},_defaultYQLLocator:function(i){var j=i&&i.query&&i.query.results,h;if(j&&e.isObject(j)){h=g.Object.values(j)||[];j=h.length===1?h[0]:h;if(!e.isArray(j)){j=[j];}}else{j=[];}return j;},_jsonpFormatter:function(i,j,k){var h=this.get(c),l=this.get(d);if(l){i+=l(k);}return e.sub(i,{callback:j,maxResults:h>0?h:1000,query:encodeURIComponent(k)});}};f.ATTRS={yqlProtocol:{value:"http"}};g.Base.mix(g.AutoCompleteBase,[f]);},"@VERSION@",{requires:["autocomplete-base"],optional:["io-base","json-parse","jsonp","yql"]});YUI.add("autocomplete-list",function(b){var h=b.Lang,u=b.Node,k=b.Array,o=9,r="_CLASS_ITEM",s="_CLASS_ITEM_ACTIVE",d="_CLASS_ITEM_HOVER",t="_SELECTOR_ITEM",f="activeItem",j="alwaysShowList",n="circular",q="hoveredItem",l="id",e="item",c="list",v="result",i="results",p="visible",g="width",m="select",a=b.Base.create("autocompleteList",b.Widget,[b.AutoCompleteBase,b.WidgetPosition,b.WidgetPositionAlign,b.WidgetStack],{ARIA_TEMPLATE:"<div/>",ITEM_TEMPLATE:"<li/>",LIST_TEMPLATE:"<ul/>",initializer:function(){var w=this.get("inputNode");if(!w){b.error("No inputNode specified.");return;}this._inputNode=w;this._listEvents=[];this.DEF_PARENT_NODE=w.get("parentNode");this[r]=this.getClassName(e);this[s]=this.getClassName(e,"active");this[d]=this.getClassName(e,"hover");this[t]="."+this[r];this.publish(m,{defaultFn:this._defSelectFn});},destructor:function(){while(this._listEvents.length){this._listEvents.pop().detach();}},bindUI:function(){this._bindInput();this._bindList();},renderUI:function(){var A=this._createAriaNode(),x=this.get("contentBox"),z=this._inputNode,y=this.get("listNode"),w=z.get("parentNode");if(!y){y=this._createListNode();x.append(y);}z.addClass(this.getClassName("input")).setAttrs({"aria-autocomplete":c,"aria-expanded":false,"aria-owns":y.get("id"),role:"combobox"});w.append(A);this._ariaNode=A;this._boundingBox=this.get("boundingBox");this._contentBox=x;this._listNode=y;this._parentNode=w;},syncUI:function(){this._syncResults();this._syncVisibility();},hide:function(){return this.get(j)?this:this.set(p,false);},selectItem:function(w){if(w){if(!w.hasClass(this[r])){return this;}}else{w=this.get(f);if(!w){return this;}}this.fire(m,{itemNode:w,result:w.getData(v)});return this;},_activateNextItem:function(){var x=this.get(f),w;if(x){w=x.next(this[t])||(this.get(n)?null:x);}else{w=this._getFirstItemNode();}this.set(f,w);return this;},_activatePrevItem:function(){var x=this.get(f),w=x?x.previous(this[t]):this.get(n)&&this._getLastItemNode();this.set(f,w||null);return this;},_add:function(w){var x=[];k.each(h.isArray(w)?w:[w],function(y){x.push(this._createItemNode(y).setData(v,y));},this);x=b.all(x);this._listNode.append(x.toFrag());return x;},_ariaSay:function(y,w){var x=this.get("strings."+y);this._ariaNode.setContent(w?h.sub(x,w):x);},_bindInput:function(){var y=this._inputNode,w=this.get("tokenInput"),x=(w&&w.get("boundingBox"))||y;if(!this.get("align.node")){this.set("align.node",x);}if(!this.get(g)){this.set(g,x.get("offsetWidth"));}this._listEvents.push(y.on("blur",this._onInputBlur,this));},_bindList:function(){this._listEvents.concat([this.after("mouseover",this._afterMouseOver),this.after("mouseout",this._afterMouseOut),this.after("activeItemChange",this._afterActiveItemChange),this.after("alwaysShowListChange",this._afterAlwaysShowListChange),this.after("hoveredItemChange",this._afterHoveredItemChange),this.after("resultsChange",this._afterResultsChange),this.after("visibleChange",this._afterVisibleChange),this._listNode.delegate("click",this._onItemClick,this[t],this)]);},_clear:function(){this.set(f,null);this._set(q,null);this._listNode.get("children").remove(true);},_createAriaNode:function(){var w=u.create(this.ARIA_TEMPLATE);return w.addClass(this.getClassName("aria")).setAttrs({"aria-live":"polite",role:"status"});},_createItemNode:function(w){var x=u.create(this.ITEM_TEMPLATE);return x.addClass(this[r]).setAttrs({id:b.stamp(x),role:"option"}).setAttribute("data-text",w.text).append(w.display);},_createListNode:function(){var w=u.create(this.LIST_TEMPLATE);return w.addClass(this.getClassName(c)).setAttrs({id:b.stamp(w),role:"listbox"});},_getFirstItemNode:function(){return this._listNode.one(this[t]);},_getLastItemNode:function(){return this._listNode.one(this[t]+":last-child");},_syncResults:function(x){var w;
if(!x){x=this.get(i);}this._clear();if(x.length){w=this._add(x);this._ariaSay("items_available");}if(this.get("activateFirstItem")&&!this.get(f)){this.set(f,this._getFirstItemNode());}},_syncVisibility:function(w){if(this.get(j)){w=true;this.set(p,w);}if(typeof w==="undefined"){w=this.get(p);}this._inputNode.set("aria-expanded",w);this._boundingBox.set("aria-hidden",!w);if(w){this._syncUIPosAlign();}else{this.set(f,null);this._set(q,null);}},_afterActiveItemChange:function(y){var x=this._inputNode,w=y.newVal,z=y.prevVal;if(z){z.removeClass(this[s]);}if(w){w.addClass(this[s]).scrollIntoView();x.set("aria-activedescendant",w.get(l));}else{x.scrollIntoView();}},_afterAlwaysShowListChange:function(w){this.set(p,w.newVal||this.get(i).length>0);},_afterHoveredItemChange:function(x){var w=x.newVal,y=x.prevVal;if(y){y.removeClass(this[d]);}if(w){w.addClass(this[d]);}},_afterMouseOver:function(w){var x=w.domEvent.target.ancestor(this[t],true);this._mouseOverList=true;if(x){this._set(q,x);}},_afterMouseOut:function(){this._mouseOverList=false;this._set(q,null);},_afterResultsChange:function(w){this._syncResults(w.newVal);if(!this.get(j)){this.set(p,!!w.newVal.length);}},_afterVisibleChange:function(w){this._syncVisibility(!!w.newVal);},_onInputBlur:function(w){if(!this._mouseOverList||this._lastInputKey===o){this.hide();}},_onItemClick:function(w){var x=w.currentTarget;w.preventDefault();this.set(f,x);this.selectItem(x);},_defSelectFn:function(w){var x=w.result.text;this._inputNode.focus();this._updateValue(x);this._ariaSay("item_selected",{item:x});this.hide();}},{ATTRS:{activateFirstItem:{value:false},activeItem:{setter:b.one,value:null},align:{value:{points:["tl","bl"]}},alwaysShowList:{value:false},circular:{value:true},hoveredItem:{readOnly:true,value:null},strings:{valueFn:function(){return b.Intl.get("autocomplete-list");}},tabSelect:{value:true},visible:{value:false}},CSS_PREFIX:b.ClassNameManager.getClassName("aclist"),HTML_PARSER:{listNode:function(){return this.getClassName(c);}}});b.AutoCompleteList=a;b.AutoComplete=a;},"@VERSION@",{after:["autocomplete-sources"],skinnable:true,lang:["en"],requires:["autocomplete-base","widget","widget-position","widget-position-align","widget-stack"]});YUI.add("autocomplete-plugin",function(b){var a=b.Plugin;function c(d){d.inputNode=d.host;if(!d.render&&d.render!==false){d.render=true;}c.superclass.constructor.apply(this,arguments);}b.extend(c,b.AutoCompleteList,{},{NAME:"autocompleteListPlugin",NS:"ac",CSS_PREFIX:b.ClassNameManager.getClassName("aclist")});a.AutoComplete=c;a.AutoCompleteList=c;},"@VERSION@",{requires:["autocomplete-list","node-pluginhost"]});YUI.add("autocomplete",function(a){},"@VERSION@",{use:["autocomplete-base","autocomplete-sources","autocomplete-list","autocomplete-plugin"]});