YUI.add("widget-stack",function(D){var M=D.Lang,S=D.UA,b=D.Node,E=D.Widget,a="zIndex",O="shim",X="visible",d="boundingBox",V="renderUI",F="bindUI",R="syncUI",P="offsetWidth",C="offsetHeight",G="width",U="height",K="px",N="shimdeferred",e="shimresize",W="visibleChange",B="widthChange",J="heightChange",Z="shimChange",A="zIndexChange",H="contentUpdate",Q="stacked",c="show-scrollbars",I="hide-scrollbars";function T(L){this._stackNode=this.get(d);this._stackHandles={};D.after(this._renderUIStack,this,V);D.after(this._syncUIStack,this,R);D.after(this._bindUIStack,this,F);}T.ATTRS={shim:{value:(S.ie==6)},zIndex:{value:0,set:function(L){return this._setZIndex(L);}}};T.HTML_PARSER={zIndex:function(L){return L.getStyle(a);}};T.SHIM_CLASS=E.getClassName(O);T.STACKED_CLASS=E.getClassName(Q);T.SHIM_TEMPLATE='<iframe class="'+T.SHIM_CLASS+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false"></iframe>';T.prototype={_syncUIStack:function(){this._uiSetShim(this.get(O));this._uiSetZIndex(this.get(a));},_bindUIStack:function(){this.after(Z,this._onShimChange);this.after(A,this._onZIndexChange);},_renderUIStack:function(){this._stackNode.addClass(T.STACKED_CLASS);var L=navigator.userAgent.toLowerCase().indexOf("macintosh")!=-1;if(L&&S.gecko&&S.gecko<=1.9){this._fixMacGeckoScrollbars();}},_setZIndex:function(L){if(M.isString(L)){L=parseInt(L,10);}if(!M.isNumber(L)){L=0;}return L;},_onShimChange:function(L){this._uiSetShim(L.newVal);},_onZIndexChange:function(L){this._uiSetZIndex(L.newVal);},_uiSetZIndex:function(L){this._stackNode.setStyle(a,L);},_uiSetShim:function(L){if(L){if(this.get(X)){this._renderShim();}else{this._renderShimDeferred();}}else{this._destroyShim();}},_renderShimDeferred:function(){this._stackHandles[N]=this._stackHandles[N]||[];var Y=this._stackHandles[N],L=function(f){if(f.newVal){this._renderShim();}};Y.push(this.on(W,L));},_addShimResizeHandlers:function(){this._stackHandles[e]=this._stackHandles[e]||[];var Y=this.sizeShim,L=this._stackHandles[e];this.sizeShim();L.push(this.after(W,Y));L.push(this.after(B,Y));L.push(this.after(J,Y));L.push(this.after(H,Y));},_detachStackHandles:function(L){var f=this._stackHandles[L];if(f){for(var Y=f.length;Y<=0;--Y){f[Y].detach();delete f[Y];}}},_renderShim:function(){var L=this._shimNode,Y=this._stackNode;if(!L){L=this._shimNode=this._getShimTemplate();Y.insertBefore(L,Y.get("firstChild"));if(S.ie==6){this._addShimResizeHandlers();}this._detachStackHandles(N);}},_destroyShim:function(){if(this._shimNode){this._shimNode.get("parentNode").removeChild(this._shimNode);this._shimNode=null;this._detachStackHandles(N);this._detachStackHandles(e);}},_fixMacGeckoScrollbars:function(){this._toggleMacGeckoScrollbars();this.after(W,this._toggleMacGeckoScrollbars);},_toggleMacGeckoScrollbars:function(){if(this.get(X)){this._showMacGeckoScrollbars();}else{this._hideMacGeckoScrollbars();}},_hideMacGeckoScrollbars:function(){this._stackNode.replaceClass(E.getClassName(c),E.getClassName(I));},_showMacGeckoScrollbars:function(){this._stackNode.replaceClass(E.getClassName(I),E.getClassName(c));},sizeShim:function(){var Y=this._shimNode,L=this._stackNode;if(Y&&S.ie===6&&this.get(X)){Y.setStyle(G,L.get(P)+K);Y.setStyle(U,L.get(C)+K);}},_getShimTemplate:function(){if(!T._SHIM_TEMPLATE){T._SHIM_TEMPLATE=b.create(T.SHIM_TEMPLATE);}return T._SHIM_TEMPLATE.cloneNode(true);}};D.WidgetStack=T;},"@VERSION@",{requires:["widget"]});