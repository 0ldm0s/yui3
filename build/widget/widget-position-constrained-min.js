YUI.add("widget-position-constrained",function(C){var F="constrain",D="constrain|xyChange",A="constrainChange",H="bindUI",E="syncUI",I="xy",B="x",M="y",J=C.Node,N="viewportRegion",K="region",L;function G(O){if(!this._posNode){C.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrained is added");}C.after(this._syncUIPosConstrained,this,E);C.after(this._bindUIPosConstrained,this,H);}G.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:false}};L=G.PREVENT_OVERLAP={x:{"tltr":1,"blbr":1,"brbl":1,"trtl":1},y:{"trbr":1,"tlbl":1,"bltl":1,"brtr":1}};G.prototype={getConstrainedXY:function(R,Q){Q=Q||this.get(F);var P=this._getRegion((Q===true)?null:Q),O=this._posNode.get(K);return[this._constrain(R[0],B,O,P),this._constrain(R[1],M,O,P)];},constrain:function(S,P){var R,O,Q=P||this.get(F);if(Q){R=S||this.get(I);O=this.getConstrainedXY(R,Q);if(O[0]!==R[0]||O[1]!==R[1]){this.set(I,O,{constrained:true});}}},_setConstrain:function(O){return(O===true)?O:J.one(O);},_constrain:function(O,P,W,Q){if(Q){if(this.get("preventOverlap")){O=this._preventOverlap(O,P,W,Q);}var T=(P==B),V=(T)?Q.width:Q.height,S=(T)?W.width:W.height,R=(T)?Q.left:Q.top,U=(T)?Q.right-S:Q.bottom-S;if(O<R||O>U){if(S<V){if(O<R){O=R;}else{if(O>U){O=U;}}}else{O=R;}}}return O;},_preventOverlap:function(P,Q,Z,R){var U=this.get("align"),Y=(Q===B),W,T,S,V,X,O;if(U&&U.points&&L[U.points.join()]){T=this._getRegion(U.node);if(T){W=(Y)?Z.width:Z.height;S=(Y)?T.left:T.top;V=(Y)?T.right:T.bottom;X=(Y)?T.left-R.left:T.top-R.top;O=(Y)?R.right-T.right:R.bottom-T.bottom;}if(P>S){if(O<W&&X>W){P=S;}}else{if(X<W&&O>W){P=V;}}}return P;},_bindUIPosConstrained:function(){this.after(A,this._afterConstrainChange);},_syncUIPosConstrained:function(){this._enableConstraints(this.get(F));},_afterConstrainChange:function(O){this._enableConstraints(O.newVal);},_enableConstraints:function(O){if(O){this.constrain();this.on(D,this._constrainOnXYChange);}else{this.detach(D);}},_constrainOnXYChange:function(O){if(!O.constrained){O.newVal=this.getConstrainedXY(O.newVal);}},_getRegion:function(O){var P;if(!O){P=this._posNode.get(N);}else{O=J.one(O);if(O){P=O.get(K);}}return P;}};C.WidgetPositionConstrained=G;},"@VERSION@",{requires:["widget","widget-position"]});