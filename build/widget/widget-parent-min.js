YUI.add("widget-parent",function(C){var B=C.Lang;function A(){}A.ATTRS={defaultItemType:{validator:B.isString},activeItem:{readOnly:true},multiple:{value:false,validator:B.isBoolean,writeOnce:true},selection:{readOnly:true,setter:"_setSelection"},items:{value:[],readOnly:true}};A.prototype={_afterSelectionChange:function(F){if(F.target==this){var D=F.newVal,E=0;if(D){E=1;if(B.isArray(D)&&(D.length<this.get("items").length)){E=2;}}this.set("selected",E,{src:this});}},_afterParentSelectedChange:function(E){var F=E.newVal,D=this.get("items");if(this==E.target&&E.src!=this&&D.length>0&&(F===0||F===1)){C.each(D,function(G){G.set("selected",F,{src:this});},this);}},_setSelection:function(G){var F=null,E=this.get("items"),D=this.get("root")||this;if(D.get("multiple")&&E.length>0){F=[];C.each(E,function(H){if(H.get("selected")>0){F.push(H);}});}else{if(G.get("selected")>0){F=G;}}return F;},_afterItemSelectedChange:function(G){var F=G.target,E=this.get("selection"),D=this.get("root")||this;if(G.src!=this){if(!D.get("multiple")&&E&&G.newVal>0){E.set("selected",0,{src:this});}this._set("selection",F);}},_afterItemFocusedChange:function(D){var E=null;if(D.newVal===true){E=D.target;}this._set("activeItem",E);},_createItem:function(E){var F,G,D;if(E.type){G=E.type;delete E[G];}else{G=this.get("defaultItemType");}D=C[G];if(D){F=new D(E);}return F;},_defItemAdded:function(G){var F=G.item,E=G.index,D=this.get("items");if(F.get("parent")){F.remove();}if(B.isNumber(E)){D.splice(E,0,F);}else{D.push(F);}this._set("items",D);F._set("parent",this);F.addTarget(this);if(F.get("selected")){this._set("selection",F);}F.after("selectedChange",C.bind(this._afterItemSelectedChange,this));F.after("focusedChange",C.bind(this._afterItemFocusedChange,this));},_defItemRemoved:function(G){var F=G.item,E=G.index,D=this.get("items");if(F.get("focused")){F.set("focused",false);}if(F.get("selected")){F.set("selected",0);}D.splice(E,1);this._set("items",D);F.removeTarget(this);F._set("parent",null);},add:function(G,E){var D,H,F;if(B.isArray(G)){D=[];C.each(G,function(I){H=this.add(I);if(H){D.push(H);}},this);if(D.length>0){F=D;}}else{if(G instanceof C.Widget){H=G;}else{H=this._createItem(G);}if(this.fire("itemAdded",{item:H,index:E})){F=H;}}return F;},remove:function(D){var F=this.get("items")[D],E;if(F&&this.fire("itemRemoved",{item:F,index:D})){E=F;}return E;},removeAll:function(){var D=[],E,F;C.each(this.get("items"),function(H,G){F=this.remove(G);if(F){D.push(F);}});if(D.length>0){E=D;}return E;},item:function(D){return this.get("items")[D];},_renderUIParent:function(){var D=this.get("contentBox");C.each(this.get("items"),function(E){E.render(D);});},initializer:function(D){this.publish("itemAdded",{defaultFn:this._defItemAdded});this.publish("itemRemoved",{defaultFn:this._defItemRemoved});if(D&&D.items){this.add(D.items);}C.after(this._renderUIParent,this,"renderUI");this.after("selectionChange",this._afterSelectionChange);this.after("selectedChange",this._afterParentSelectedChange);}};C.WidgetParent=A;},"@VERSION@",{requires:["widget"]});