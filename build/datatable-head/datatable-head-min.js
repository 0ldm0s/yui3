YUI.add("datatable-head",function(f,e){var c=f.Lang,d=c.sub,a=c.isArray,b=f.Array;f.namespace("DataTable").HeaderView=f.Base.create("tableHeader",f.View,[],{CELL_TEMPLATE:'<th id="{id}" colspan="{_colspan}" rowspan="{_rowspan}" class="{className}" scope="col" {_id}{abbr}>{content}</th>',ROW_TEMPLATE:"<tr>{content}</tr>",THEAD_TEMPLATE:'<thead class="{className}"></thead>',getClassName:function(){var g=this.host,h=(g&&g.constructor.NAME)||this.constructor.NAME;if(g&&g.getClassName){return g.getClassName.apply(g,arguments);}else{return f.ClassNameManager.getClassName.apply(f.ClassNameManager,[h].concat(b(arguments,0,true)));}},render:function(){var t=this.get("container"),q=this.theadNode||(this.theadNode=this._createTHeadNode()),h=this.columns,k={_colspan:1,_rowspan:1,abbr:""},m,o,l,s,g,n,p,r;if(q&&h){n="";if(h.length){for(m=0,o=h.length;m<o;++m){p="";for(l=0,s=h[m].length;l<s;++l){g=h[m][l];r=f.merge(k,g,{className:this.getClassName("header"),content:g.label||g.key||("Column "+(l+1))});r._id=g._id?' data-yui3-col-id="'+g._id+'"':"";if(g.abbr){r.abbr=' abbr="'+g.abbr+'"';}if(g.className){r.className+=" "+g.className;}if(g._first){r.className+=" "+this.getClassName("first","header");}if(g._id){r.className+=" "+this.getClassName("col",g._id);}p+=d(g.headerTemplate||this.CELL_TEMPLATE,r);}n+=d(this.ROW_TEMPLATE,{content:p});}}q.setHTML(n);if(q.get("parentNode")!==t){t.insertBefore(q,t.one("tfoot, tbody"));}}this.bindUI();return this;},_afterColumnsChange:function(g){this.columns=this._parseColumns(g.newVal);this.render();},bindUI:function(){if(!this._eventHandles.columnsChange){this._eventHandles.columnsChange=this.after("columnsChange",f.bind("_afterColumnsChange",this));}},_createTHeadNode:function(){return f.Node.create(d(this.THEAD_TEMPLATE,{className:this.getClassName("columns")}));},destructor:function(){(new f.EventHandle(f.Object.values(this._eventHandles))).detach();},initializer:function(g){this.host=g.host;this.columns=this._parseColumns(g.columns);this._eventHandles=[];},_parseColumns:function(n){var k=[],q=[],p=1,s,t,h,g,r,m,o,l;if(a(n)&&n.length){n=n.slice();q.push([n,-1]);while(q.length){s=q[q.length-1];t=s[0];m=s[1]+1;for(o=t.length;m<o;++m){t[m]=h=f.merge(t[m]);g=h.children;f.stamp(h);if(!h.id){h.id=f.guid();}if(a(g)&&g.length){q.push([g,-1]);s[1]=m;p=Math.max(p,q.length);break;}else{h._colspan=1;}}if(m>=o){if(q.length>1){s=q[q.length-2];r=s[0][s[1]];r._colspan=0;for(m=0,o=t.length;m<o;++m){t[m]._parent=r;r._colspan+=t[m]._colspan;}}q.pop();}}for(m=0;m<p;++m){k.push([]);}q.push([n,-1]);while(q.length){s=q[q.length-1];t=s[0];m=s[1]+1;for(o=t.length;m<o;++m){h=t[m];g=h.children;k[q.length-1].push(h);s[1]=m;h._headers=[h.id];for(l=q.length-2;l>=0;--l){r=q[l][0][q[l][1]];h._headers.unshift(r.id);}if(g&&g.length){q.push([g,-1]);break;}else{h._rowspan=p-q.length+1;}}if(m>=o){q.pop();}}}for(m=0,o=k.length;m<o;m+=h._rowspan){h=k[m][0];h._first=true;}return k;}});},"@VERSION@",{"requires":["datatable-core","view","classnamemanager"]});