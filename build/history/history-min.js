YUI.add("history",function(A){YUI.add("history",function(C){var E=C.Lang,Q=C.UA,S=C.Event.Target,B=C.config.win.history,W=C.config.win.location,J,K,T="Missing or invalid argument",N=/([^=&]+)=([^&]*)/g,M="history:ready",R="history:globalStateChange",F="history:moduleStateChange";if(!YUI.Env.history){YUI.Env.history=K={ready:false,_modules:[],_fqstates:[],_stateField:null,_historyIFrame:null};}function O(){return W.hash.substr(1);}function U(){var L=[],G=[],H;C.Object.each(K._modules,function(X,Y){L.push(Y+"="+X.initialState);G.push(Y+"="+X.currentState);});H=L.join("&")+"|"+G.join("&");if(Q.webkit){H+="|"+K._fqstates.join(",");}K._stateField.set("value",H);}function P(L){var G,H;if(!L){C.Object.each(K._modules,function(X,Y){X.currentState=X.initialState;X.fire(F,X.currentState);J.fire(R);});return;}H=[];N.lastIndex=0;while((G=N.exec(L))){H[G[1]]=G[2];}C.Object.each(K._modules,function(X,Z){var Y=H[Z];if(!Y||X.currentState!==Y){X.currentState=Y||X.initialState;X.fire(F,X.currentState);J.fire(R);}});}function I(X){var G,L;G="<html><body>"+X+"</body></html>";try{L=K._historyIFrame.get("contentWindow.document");L.invoke("open");L.invoke("write",G,"","","","");L.invoke("close");return true;}catch(H){return false;}}function D(){var G,L,H;if(!K._historyIFrame.get("contentWindow.document")){setTimeout(D,10);return;}G=K._historyIFrame.get("contentWindow.document.body");L=G?G.get("innerText"):null;H=O();setInterval(function(){var Z,X,Y;G=K._historyIFrame.get("contentWindow.document.body");Z=G?G.get("innerText"):null;Y=O();if(Z!==L){L=Z;P(L);if(!L){X=[];C.Object.each(K._modules,function(a,b){X.push(b+"="+a.initialState);});Y=X.join("&");}else{Y=L;}W.hash=H=Y;U();}else{if(Y!==H){H=Y;I(Y);}}},50);K.ready=true;J.fire(M);}function V(){var H,b,Z,X,G,Y,L,a;b=K._stateField.get("value").split("|");if(b.length>1){N.lastIndex=0;while((H=N.exec(b[0]))){Z=H[1];G=H[2];X=K._modules[Z];if(X){X.initialState=G;}}N.lastIndex=0;while((H=N.exec(b[1]))){Z=H[1];Y=H[2];X=K._modules[Z];if(X){X.currentState=Y;}}}if(b.length>2){K._fqstates=b[2].split(",");}if(Q.ie){if(Q.ie<8||C.config.doc.documentMode<8){D();}else{C.on("hashchange",function(){var c=O();P(c);U();},window);K.ready=true;J.fire(M);}}else{L=B.length;a=O();setInterval(function(){var e,c,d;c=O();d=B.length;if(c!==a){a=c;L=d;P(a);U();}else{if(d!==L&&Q.webkit){a=c;L=d;e=K._fqstates[L-1];P(e);U();}}},50);K.ready=true;J.fire(M);}}J={register:function(L,G){var H;if(!E.isString(L)||E.trim(L)===""||!E.isString(G)){throw new Error(T);}if(K._modules[L]){return;}if(K.ready){return null;}L=encodeURIComponent(L);G=encodeURIComponent(G);H=new J.Module(L,G);K._modules[L]=H;return H;},initialize:function(G,X){var H,L;if(K.ready){return true;}G=C.get(G);if(!G){throw new Error(T);}H=G.get("tagName").toUpperCase();L=G.get("type");if(H!=="TEXTAREA"&&(H!=="INPUT"||L!=="hidden"&&L!=="text")){throw new Error(T);}if(Q.ie&&(Q.ie<8||C.config.doc.documentMode<8)){X=C.get(X);if(!X||X.get("tagName").toUpperCase()!=="IFRAME"){throw new Error(T);}}if(Q.opera&&!E.isUndefined(B.navigationMode)){B.navigationMode="compatible";}K._stateField=G;K._historyIFrame=X;C.on("domready",V);return true;},navigate:function(H,L){var G;if(!E.isString(H)||!E.isString(L)){throw new Error(T);}G={};G[H]=L;return J.multiNavigate(G);},multiNavigate:function(H){var G,L;if(!K.ready){return false;}C.Object.each(H,function(X,Y){if(!K._modules[Y]){}});G=[];C.Object.each(K._modules,function(X,Z){var Y;if(H[Z]){Y=H[decodeURIComponent(Z)];}else{Y=decodeURIComponent(X.currentState);}Z=encodeURIComponent(Z);Y=encodeURIComponent(Y);G.push(Z+"="+Y);});L=G.join("&");if(Q.ie&&(Q.ie<8||C.config.doc.documentMode<8)){return I(L);}else{W.hash=L;if(Q.webkit){K._fqstates[B.length]=L;U();}return true;}},getCurrentState:function(H){var G;if(!E.isString(H)){throw new Error(T);}if(!K.ready){return null;}G=K._modules[H];if(!G){return null;}return decodeURIComponent(G.currentState);},getBookmarkedState:function(X){var G,H,L;if(!E.isString(X)){throw new Error(T);}L=W.href;H=L.indexOf("#");if(H>=0){L=L.substr(H+1);N.lastIndex=0;while((G=N.exec(L))){if(G[1]===X){return decodeURIComponent(G[2]);}}}return null;},getQueryStringParameter:function(Y,H){var G,X,L;H=H||W.href;L=H.indexOf("?");X=L>=0?H.substr(L+1):H;L=X.lastIndexOf("#");X=L>=0?X.substr(0,L):X;N.lastIndex=0;while((G=N.exec(X))){if(G[1]===Y){return decodeURIComponent(G[2]);}}return null;}};C.mix(J,S.prototype);S.call(J);J.Module=function(H,G){S.call(this);this.id=H;this.initialState=G;this.currentState=G;};C.mix(J.Module,S,false,null,1);C.History=J;},"3.0.0",{requires:["event","node"],skinnable:false});},"@VERSION@",{use:["event","node"],skinnable:false});