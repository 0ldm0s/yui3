YUI.add("io",function(C){var f=C.config.win;var m=0;var J={"X-Requested-With":"XMLHttpRequest"};var O={};var a={};var N={flash:null};var k=[];var P=1;var g=false;function I(Y,s){if(g===false||k.length<g){var r=d();k.push({uri:Y,id:r,cfg:s});}else{return false;}if(P===1){c();}return r;}function B(u){var s;for(var Y=0;Y<k.length;Y++){if(k[Y].id===u){s=k.splice(Y,1);var t=k.unshift(s[0]);break;}}}function c(){var Y=k.shift();b(Y.uri,Y.cfg,Y.id);}function G(Y){if(Y){g=Y;return Y;}else{return k.length;}}function X(){var Y=(k.length>g>0)?g:k.length;if(Y>1){for(var r=0;r<Y;r++){c();}}else{c();}}function Q(){P=0;}function Z(r){if(C.Lang.isNumber(r)){for(var Y=0;Y<k.length;Y++){if(k[Y].id===r){k.splice(Y,1);break;}}}}function b(r,v){var v=v||{};var u=T((arguments.length=3)?arguments[2]:null,v);var Y=(v.method)?v.method.toUpperCase():"GET";var t=(v.data)?v.data:null;if(v.xdr==="flash"){if(v.on){a[u.id]=v.on;}u.c.send(r,v,u.id);return u;}if(v.form){var s=n(v.form);if(t){s+="&"+t;}if(Y==="POST"){t=s;W("Content-Type","application/x-www-form-urlencoded");}else{if(Y==="GET"){r=h(r,s);}}}else{if(t&&Y==="GET"){r=h(r,v.data);}else{if(t&&Y==="POST"){W("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");}}}if(v.timeout){i(u,v);}u.c.onreadystatechange=function(){K(u,v);};V(u.c,Y,r);H(u.c,(v.headers||{}));e(u,(t||""),v);u.abort=function(){S(u,v);};u.status=function(){return u.c.readyState!==4&&u.c.readyState!==0;};return u;}function R(r,s){var Y=new C.Event.Target().publish("transaction:"+r);Y.subscribe(s.on[r],(s.context||this),s.arguments);return Y;}function M(s,r){r.on=r.on||{};var Y;C.fire("io:start",s);if(a[s]&&a[s].start){r.on.start=a[s].start;}if(r.on.start){Y=R("start",r);Y.fire(s);}}function U(r,s){s.on=s.on||{};var Y;C.fire("io:complete",r.id,r.c);if(a[r.id]&&a[r.id].complete){s.on.complete=a[r.id].complete;delete a[r.id];}if(s.on.complete){Y=R("complete",s);Y.fire(r.id,r.c);}}function l(r,s){s.on=s.on||{};var Y;C.fire("io:success",r.id,r.c);if(s.on.success){Y=R("success",s);Y.fire(r.id,r.c);}}function F(r,s){s.on=s.on||{};var Y;C.fire("io:failure",r.id,r.c);if(a[r.id]&&a[r.id].failure){s.on.failure=a[r.id].failure;delete a[r.id];}if(s.on.failure){Y=R("failure",s);Y.fire(r.id,r.c);}}function E(s,r){r.on=r.on||{};var Y;C.fire("io:abort",o.id);if(a[s]&&a[o.id].abort){r.on.abort=a[o.id].abort;delete a[o.id];}if(r.on.abort){Y=R("abort",r);Y.fire(s);}}function q(){return(f.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");}function j(r){var s=document.createElement("div");document.body.appendChild(s);var Y='<object id="yuiSwfIo" type="application/x-shockwave-flash" data="'+r+'" width="0" height="0">';Y+='<param name="movie" value="'+r+'">';Y+='<param name="allowScriptAccess" value="sameDomain">';Y+="</object>";s.innerHTML=Y;N.flash=C.config.doc.getElementById("yuiSwfIo");}function d(){var Y=m;m++;return Y;}function T(Y,s){var r={};r.id=C.Lang.isNumber(Y)?Y:d();if(s&&s.xdr){r.c=N[s.xdr];}else{r.c=q();}return r;}function h(Y,r){Y+=((Y.indexOf("?")==-1)?"?":"&")+r;return Y;}function W(Y,r){if(r){J[Y]=r;}else{delete J[Y];}}function A(Y){switch(Y.id){case"flash":j(Y.src);break;default:return false;}return true;}function H(s,Y){var r;for(r in J){if(J.hasOwnProperty(r)){Y[r]=J[r];}}for(r in Y){if(Y.hasOwnProperty(r)){s.setRequestHeader(r,Y[r]);}}}function V(s,Y,r){s.open(Y,r,true);}function e(r,Y,s){r.c.send(Y);M(r.id,s);}function i(Y,r){O[Y.id]=f.setTimeout(function(){S(Y,r);},r.timeout);}function D(Y){f.clearTimeout(O[Y]);delete O[Y];}function K(Y,r){if(Y.c.readyState===4){if(r.timeout){D(Y.id);}U(Y,r);p(Y,r);}}function p(s,t){var Y;try{if(s.c.status&&s.c.status!==0){Y=s.c.status;}else{Y=0;}}catch(r){Y=0;}if(Y>=200&&Y<300||Y===1223){l(s,t);}else{F(s,t);}L(s);}function S(Y,r){if(Y&&Y.c){Y.c.abort();if(r){if(r.timeout){D(Y.id);}}E(Y.id,r);L(Y);}}function L(Y){if(f.XMLHttpRequest){if(Y.c){Y.c.onreadystatechange=null;}}Y.c=null;Y=null;}function n(r){var z="";var x=(typeof r.id=="object")?r.id:C.config.doc.getElementById(r.id);var AA=r.useDisabled||false;var w=encodeURIComponent;var y,s,AB,Y;for(var u=0;u<x.elements.length;u++){y=x.elements[u];Y=y.disabled;s=y.name;AB=y.value;if((AA)?s:(s&&Y)){}switch(y.type){case"select-one":case"select-multiple":for(var t=0;t<y.options.length;t++){if(y.options[t].selected){if(C.UA.ie){z+=w(s)+"="+w(y.options[t].attributes["value"].specified?y.options[t].value:y.options[t].text)+"&";}else{z+=w(s)+"="+w(y.options[t].hasAttribute("value")?y.options[t].value:y.options[t].text)+"&";}}}break;case"radio":case"checkbox":if(y.checked){z+=w(s)+"="+w(AB)+"&";}break;case"file":case undefined:case"reset":case"button":break;case"submit":default:z+=w(s)+"="+w(AB)+"&";}}return z.substr(0,z.length-1);}b.start=M;b.complete=U;b.error=F;b.abort=E;b.header=W;b.transport=A;b.queue=I;b.queue.size=G;b.queue.start=X;b.queue.stop=Q;b.queue.promote=B;b.queue.purge=Z;C.io=b;},"3.0.0");