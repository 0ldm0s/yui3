YUI.add("io",function(C){var b=["start","complete","success","failure","abort"];var N=C.config.win;var a=0;var Q={"X-Requested-With":"XMLHttpRequest"};var c={};var f=[];var T=1;var M=false;function I(Y,j){if(M===false||f.length<M){var i=E();f.push({uri:Y,id:i,cfg:j});}else{return false;}if(T===1){L();}return i;}function F(l){var j;for(var Y=0;Y<f.length;Y++){if(f[Y].id===l){j=f.splice(Y,1);var k=f.unshift(j[0]);break;}}}function L(){var Y=f.shift();e(Y.uri,Y.cfg,Y.id);}function H(Y){if(Y){M=Y;return Y;}else{return f.length;}}function V(){var Y=(f.length>M>0)?M:f.length;if(Y>1){for(var j=0;j<Y;j++){L();}}else{L();}}function J(){T=0;}function B(j){if(C.Lang.isNumber(j)){for(var Y=0;Y<f.length;Y++){if(f[Y].id===j){f.splice(Y,1);break;}}}}function e(i,p,n){var l=Z(C.Lang.isNumber(n)?n:null);var Y=(p&&p.method)?p.method.toUpperCase():"GET";var k=(p&&p.data)?p.data:null;if(p){if(p.timeout){S(l,p);}if(p.form){var j=O(p.form);if(k){j+="&"+k;}if(Y==="POST"){k=j;X("Content-Type","application/x-www-form-urlencoded");}else{if(Y==="GET"){i=R(i,j);}}}else{if(k&&Y==="GET"){i=R(i,p.data);}else{if(k&&Y==="POST"){X("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");}}}if(p.on){h(l,p);}}l.c.onreadystatechange=function(){g(l,p);};D(l.c,Y,i);A(l.c,(p&&p.headers)?p.headers:{});W(l,(k||""),p);l.abort=function(){U(l,p);};l.status=function(){return l.c.readyState!==4&&l.c.readyState!==0;};return l;}function h(j,k){for(var Y=0;Y<b.length;Y++){if(k.on[b[Y]]){j["t:"+b[Y]]=new C.Event.Target().publish(b[Y]);Y.log("Transaction Event t:"+b[Y]+" published for transaction "+j.id,"info","io");j["t:"+b[Y]].subscribe(k.on[b[Y]],k.context,k.arguments);Y.log("Transaction Event t:"+b[Y]+" subscribed for transaction "+j.id,"info","io");}}}function G(Y){return(N.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");}function E(){var Y=a;a++;return Y;}function Z(j,Y){var k={};k.id=C.Lang.isNumber(j)?j:E();k.c=G(Y);return k;}function R(Y,i){Y+=((Y.indexOf("?")==-1)?"?":"&")+i;return Y;}function X(Y,i){if(i){Q[Y]=i;}else{delete Q[Y];}}function A(j,Y){var i;for(i in Q){if(Q.hasOwnProperty(i)){Y[i]=Q[i];}}for(i in Y){if(Y.hasOwnProperty(i)){j.setRequestHeader(i,Y[i]);}}}function D(j,Y,i){j.open(Y,i,true);}function W(j,i,k){j.c.send(i);var Y=(k&&k.arguments)?k.arguments:null;C.fire("io:start",j.id);if(j["t:start"]){j["t:start"].fire(j.id,Y);}}function S(Y,i){c[Y.id]=N.setTimeout(function(){U(Y,i);},i.timeout);}function P(Y){N.clearTimeout(c[Y]);delete c[Y];}function g(Y,i){if(Y.c.readyState===4){if(i&&i.timeout){P(Y.id);}C.fire("io:complete",Y.id,Y.c);if(Y["t:complete"]){Y["t:complete"].fire(Y.id,Y.c,i.arguments);}d(Y,i);}}function d(i,j){try{if(i.c.status&&i.c.status!==0){status=i.c.status;}else{status=0;}}catch(Y){status=0;}if(status>=200&&status<300||status===1223){C.fire("io:success",i.id,i.c);if(i["t:success"]){i["t:success"].fire(i.id,i.c,j.arguments);}}else{C.fire("io:failure",i.id,i.c);if(i["t:failure"]){i["t:failure"].fire(i.id,i.c,j.arguments);}}K(i,j);}function U(i,j){var Y=(j&&j.arguments)?j.arguments:null;if(i&&i.c){i.c.abort();if(j){if(j.timeout){P(i.id);}}C.fire("io:abort",i.id);if(i["t:abort"]){i["t:abort"].fire(i.id,Y);}K(i);}}function K(Y){if(N.XMLHttpRequest){Y.c.onreadystatechange=null;}Y.c=null;Y=null;}function O(k){var t="";var r=(typeof k.id=="object")?k.id:C.config.doc.getElementById(k.id);var u=k.useDisabled||false;var q=encodeURIComponent;var s,l,w,Y;for(var p=0;p<r.elements.length;p++){s=r.elements[p];Y=s.disabled;l=s.name;w=s.value;if((u)?l:(l&&Y)){}switch(s.type){case"select-one":case"select-multiple":for(var m=0;m<s.options.length;m++){if(s.options[m].selected){if(C.UA.ie){t+=q(l)+"="+q(s.options[m].attributes["value"].specified?s.options[m].value:s.options[m].text)+"&";}else{t+=q(l)+"="+q(s.options[m].hasAttribute("value")?s.options[m].value:s.options[m].text)+"&";}}}break;case"radio":case"checkbox":if(s.checked){t+=q(l)+"="+q(w)+"&";}break;case"file":case undefined:case"reset":case"button":break;case"submit":default:t+=q(l)+"="+q(w)+"&";}}return t.substr(0,t.length-1);}e.header=X;e.queue=I;e.queue.size=H;e.queue.start=V;e.queue.stop=J;e.queue.promote=F;e.queue.purge=B;C.io=e;},"3.0.0");