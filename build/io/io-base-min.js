YUI.add("io-base",function(D){var e="io:start",O="io:complete",B="io:success",G="io:failure",a="io:abort",X=0,N={"X-Requested-With":"XMLHttpRequest"},Z={},K=D.config.win;function c(h,n){var g,i,n=n||{},l=W((arguments.length===3)?arguments[2]:null,n),Y=(n.method)?n.method.toUpperCase():"GET",k=(n.data)?n.data:null;if(n.form){if(n.form.upload){g=D.io._upload(l,h,n);return g;}i=D.io._serialize(n.form);if(k){i+="&"+k;}if(Y==="POST"){k=i;V("Content-Type","application/x-www-form-urlencoded");}else{if(Y==="GET"){h=P(h,i);}}}else{if(k&&Y==="GET"){h=P(h,n.data);}else{if(k&&Y==="POST"){V("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");}}}if(n.xdr){D.io._xdr(h,l,n);return l;}if(n.timeout){Q(l,n);}l.c.onreadystatechange=function(){d(l,n);};try{E(l.c,Y,h);}catch(j){}C(l.c,(n.headers||{}));l.abort=function(){R(l,n);};l.isInProgress=function(){return l.c.readyState!==4&&l.c.readyState!==0;};U(l,(k||""),n);return l;}function A(f,g){var Y=new D.Event.Target().publish("transaction:"+f);Y.subscribe(g.on[f],(g.context||this),g.arguments);return Y;}function S(i,h){var Y=D.io._fn||{},f=(Y&&Y[i])?Y[i]:null,g;h.on=h.on||{};if(f){h.on.start=f.start;}D.fire(e,i);if(h.on.start){g=A("start",h);g.fire(i);}}function H(f,g){var Y;g.on=g.on||{};D.fire(O,f.id,f.c);if(g.on.complete){Y=A("complete",g);Y.fire(f.id,f.c);}}function T(h,i){var Y=D.io._fn||{},f=(Y&&Y[h.id])?Y[h.id]:null,g;i.on=i.on||{};if(f){i.on.success=f.success;h.c.responseText=decodeURI(h.c.responseText);delete Y[h.id];}D.fire(B,h.id,h.c);if(i.on.success){g=A("success",i);g.fire(h.id,h.c);}I(h,(i.xdr)?true:false);}function J(h,i){var Y=D.io._fn||{},f=(Y&&Y[h.id])?Y[h.id]:null,g;i.on=i.on||{};if(f){i.on.failure=f.failure;h.c.responseText=decodeURI(h.c.responseText);delete Y[h.id];}D.fire(G,h.id,h.c);if(i.on.failure){g=A("failure",i);g.fire(h.id,h.c);}I(h,(i.xdr)?true:false);}function R(h,i){var Y=D.io._fn||{},f=(Y&&Y[h.id])?Y[h.id]:null,g;i.on=i.on||{};if(h&&h.c&&!i.xdr){h.isAbort=true;h.c.abort();if(i){if(i.timeout){M(h.id);}}}if(f){i.on.abort=f.abort;delete Y[h.id];}D.fire(a,h.id);if(i.on.abort){g=A("abort",i);g.fire(h.id);}I(h,(i.xdr)?true:false);}function F(){var Y=X;X++;return Y;}function W(Y,g){var f={};f.id=D.Lang.isNumber(Y)?Y:F();if(g.xdr){f.c=D.io._transport[g.xdr.use];}else{if(g.form&&g.form.upload){f.c={};}else{f.c=L();}}return f;}function L(){return(K.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");}function P(Y,f){Y+=((Y.indexOf("?")==-1)?"?":"&")+f;return Y;}function V(Y,f){if(f){N[Y]=f;}else{delete N[Y];}}function C(g,Y){var f;for(f in N){if(N.hasOwnProperty(f)){if(Y[f]){break;}else{Y[f]=N[f];}}}for(f in Y){if(Y.hasOwnProperty(f)){g.setRequestHeader(f,Y[f]);}}}function E(g,Y,f){g.open(Y,f,true);}function U(f,Y,g){f.c.send(Y);S(f.id,g);}function Q(Y,f){Z[Y.id]=K.setTimeout(function(){R(Y,f);},f.timeout);}function M(Y){K.clearTimeout(Z[Y]);delete Z[Y];}function d(Y,f){if(Y.c.readyState===4&&!Y.isAbort){if(f.timeout){M(Y.id);}K.setTimeout(function(){H(Y,f);b(Y,f);},0);}}function b(g,h){var Y;try{if(g.c.status&&g.c.status!==0){Y=g.c.status;}else{Y=0;}}catch(f){Y=0;}if(Y>=200&&Y<300||Y===1223){T(g,h);}else{J(g,h);}}function I(f,Y){if(K.XMLHttpRequest&&!Y){if(f.c){f.c.onreadystatechange=null;}}f.c=null;f=null;}c.start=S;c.complete=H;c.success=T;c.failure=J;c.abort=R;c._id=F;c._timeout=Z;c.header=V;D.io=c;D.io.http=c;},"@VERSION@");