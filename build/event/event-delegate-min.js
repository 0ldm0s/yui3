YUI.add("event-delegate",function(F){var C=F.Array,B=F.Lang,A=B.isString,E=F.Selector.test;function D(N,O,I,H){if(!N||!O||!I||!H){return;}var L=C(arguments,0,true),J=F.Node.DOM_EVENTS[N],M=A(I)?I:null,G,K;if(B.isObject(J)&&J.delegate){return J.delegate.apply(J,arguments);}G=(M)?F.Selector.query(M,null,true):I;if(!G&&A(I)){K=F.on("available",function(){F.mix(K,F.delegate.apply(F,L),true);},I);return K;}if(G){L.splice(2,2,G);if(A(H)){H=F.delegate.compileFilter(H);}K=F.on.apply(F,L);K.sub.getCurrentTarget=H;K.sub._notify=F.delegate.notifySub;return K;}}D.notifySub=function(M,I,L){I=I.slice();if(this.args){I=I.push.apply(I,this.args);}var K=this.getCurrentTarget.apply(this,I),G=I[0],J,H;if(K){I[0]=J=new F.DOMEventFacade(G,K,L);J.container=G.currentTarget;M=this.context||K;H=this.fn.apply(M,I);if(this.once){L._delete(this);}}return H;};D.compileFilter=F.cached(function(G){var H=G.replace(/,/g," *,")+" *";return function(K){var I=K.currentTarget._node,J;if(E(K.target._node,G,I)){return K.target;}J=K.target._node;if(E(J,H)){while(J!==I){if(E(J,G,I)){return F.one(J);}J=J.parentNode;}}return false;};});F.delegate=F.Event.delegate=D;},"@VERSION@",{requires:["node-base"]});