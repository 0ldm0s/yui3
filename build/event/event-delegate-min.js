YUI.add("event-delegate",function(F){var C=F.Array,B=F.Lang,A=B.isString,E=F.Selector.test;function D(N,O,I,H){if(!N||!O||!I||!H){return;}var L=C(arguments,0,true),J=F.Node.DOM_EVENTS[N],M=A(I)?I:null,G,K;if(B.isObject(J)&&J.delegate){return J.delegate.apply(J,arguments);}G=(M)?F.Selector.query(M,null,true):I;if(!G&&A(I)){K=F.on("available",function(){F.mix(K,F.delegate.apply(F,L),true);},I);return K;}if(G){L.splice(2,2,G);if(A(H)){H=F.delegate.compileFilter(H);}K=F.on.apply(F,L);K.sub.getCurrentTarget=H;K.sub._notify=F.delegate.notifySub;return K;}}D.notifySub=function(K,O,I){O=O.slice();if(this.args){O=O.push.apply(O,this.args);}var J=this.getCurrentTarget.apply(this,O),H=O[0],G=H.currentTarget,L,N,M;if(J){J=C(J);for(L=J.length-1;L>=0;--L){M=J[L];O[0]=new F.DOMEventFacade(H,M,I);O[0].container=G;K=this.context||M;N=this.fn.apply(K,O);if(N===false){break;}}return N;}};D.compileFilter=F.cached(function(G){var H=G.replace(/,/g," *,")+" *";return function(L){var I=L.currentTarget._node,J=[],K;if(E(L.target._node,G,I)){J.push(L.target);}K=L.target._node;if(E(K,H)){while(K!==I){if(E(K,G,I)){J.push(F.one(K));}K=K.parentNode;}}if(J.length<=1){J=J[0];}return J;};});F.delegate=F.Event.delegate=D;},"@VERSION@",{requires:["node-base"]});