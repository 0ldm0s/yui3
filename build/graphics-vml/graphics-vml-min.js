YUI.add("graphics-vml",function(b,e){var l="vmlShape",o=b.Lang,i=o.isNumber,j=o.isArray,f=o.isString,q=b.DOM,r=b.Selector,d=b.config.doc,h=b.AttributeLite,s,a,t,g,k,p,n,c=b.ClassNameManager.getClassName;function m(){}m.prototype={_coordSpaceMultiplier:100,_round:function(u){return Math.round(u*this._coordSpaceMultiplier);},_addToPath:function(u){this._path=this._path||"";if(this._movePath){this._path+=this._movePath;this._movePath=null;}this._path+=u;},_currentX:0,_currentY:0,curveTo:function(A,v,I,H,E,D){var F,B,J,G,z,u,C;this._addToPath(" c "+this._round(A)+", "+this._round(v)+", "+this._round(I)+", "+this._round(H)+", "+this._round(E)+", "+this._round(D));G=Math.max(E,Math.max(A,I));u=Math.max(D,Math.max(v,H));z=Math.min(E,Math.min(A,I));C=Math.min(D,Math.min(v,H));F=Math.abs(G-z);B=Math.abs(u-C);J=[[this._currentX,this._currentY],[A,v],[I,H],[E,D]];this._setCurveBoundingBox(J,F,B);this._currentX=E;this._currentY=D;},quadraticCurveTo:function(B,A,D,C){var v=this._currentX,u=this._currentY,z=v+0.67*(B-v),w=u+0.67*(A-u),F=z+(D-v)*0.34,E=w+(C-u)*0.34;this.curveTo(z,w,F,E,D,C);},drawRect:function(u,A,v,z){this.moveTo(u,A);this.lineTo(u+v,A);this.lineTo(u+v,A+z);this.lineTo(u,A+z);this.lineTo(u,A);this._currentX=u;this._currentY=A;return this;},drawRoundRect:function(u,C,v,A,z,B){this.moveTo(u,C+B);this.lineTo(u,C+A-B);this.quadraticCurveTo(u,C+A,u+z,C+A);this.lineTo(u+v-z,C+A);this.quadraticCurveTo(u+v,C+A,u+v,C+A-B);this.lineTo(u+v,C+B);this.quadraticCurveTo(u+v,C,u+v-z,C);this.lineTo(u+z,C);this.quadraticCurveTo(u,C,u,C+B);return this;},drawCircle:function(v,B,u){var z=0,w=360,A=u*2;w*=65535;this._drawingComplete=false;this._trackSize(v+A,B+A);this.moveTo((v+A),(B+u));this._addToPath(" ae "+this._round(v+u)+", "+this._round(B+u)+", "+this._round(u)+", "+this._round(u)+", "+z+", "+w);return this;},drawEllipse:function(z,E,A,D){var C=0,B=360,v=A*0.5,u=D*0.5;B*=65535;this._drawingComplete=false;this._trackSize(z+A,E+D);this.moveTo((z+A),(E+u));this._addToPath(" ae "+this._round(z+v)+", "+this._round(z+v)+", "+this._round(E+u)+", "+this._round(v)+", "+this._round(u)+", "+C+", "+B);return this;},drawDiamond:function(v,B,A,u){var z=A*0.5,w=u*0.5;this.moveTo(v+z,B);this.lineTo(v+A,B+w);this.lineTo(v+z,B+u);this.lineTo(v,B+w);this.lineTo(v+z,B);return this;},drawWedge:function(v,B,z,w,u){var A=u*2;if(Math.abs(w)>360){w=360;}this._currentX=v;this._currentY=B;z*=-65535;w*=65536;z=Math.round(z);w=Math.round(w);this.moveTo(v,B);this._addToPath(" ae "+this._round(v)+", "+this._round(B)+", "+this._round(u)+" "+this._round(u)+", "+z+", "+w);this._trackSize(A,A);return this;},lineTo:function(z,y,w){var v=arguments,x,u,A=" l ";if(typeof z==="string"||typeof z==="number"){v=[[z,y]];}u=v.length;for(x=0;x<u;++x){A+=" "+this._round(v[x][0])+", "+this._round(v[x][1]);this._trackSize.apply(this,v[x]);this._currentX=v[x][0];this._currentY=v[x][1];}this._addToPath(A);return this;},moveTo:function(u,v){this._movePath=" m "+this._round(u)+", "+this._round(v);this._trackSize(u,v);this._currentX=u;this._currentY=v;},_closePath:function(){var B=this.get("fill"),A=this.get("stroke"),x=this.node,u=this.get("width"),v=this.get("height"),z=this._path,y="",C=this._coordSpaceMultiplier;this._fillChangeHandler();this._strokeChangeHandler();if(z){if(B&&B.color){y+=" x";}if(A){y+=" e";}}if(z){x.path=z+y;}if(!isNaN(u)&&!isNaN(v)){x.coordOrigin=this._left+", "+this._top;x.coordSize=(u*C)+", "+(v*C);x.style.position="absolute";x.style.width=u+"px";x.style.height=v+"px";}this._path=z;this._movePath=null;this._updateTransform();},end:function(){this._closePath();},closePath:function(){this._addToPath(" x e");},clear:function(){this._right=0;this._bottom=0;this._width=0;this._height=0;this._left=0;this._top=0;this._path="";this._movePath=null;},getBezierData:function(y,x){var z=y.length,w=[],v,u;for(v=0;v<z;++v){w[v]=[y[v][0],y[v][1]];}for(u=1;u<z;++u){for(v=0;v<z-u;++v){w[v][0]=(1-x)*w[v][0]+x*w[parseInt(v+1,10)][0];w[v][1]=(1-x)*w[v][1]+x*w[parseInt(v+1,10)][1];}}return[w[0][0],w[0][1]];},_setCurveBoundingBox:function(F,B,y){var x=0,v=this._currentX,C=v,A=this._currentY,u=A,z=Math.round(Math.sqrt((B*B)+(y*y))),D=1/z,E;for(;x<z;++x){E=this.getBezierData(F,D*x);v=isNaN(v)?E[0]:Math.min(E[0],v);C=isNaN(C)?E[0]:Math.max(E[0],C);A=isNaN(A)?E[1]:Math.min(E[1],A);u=isNaN(u)?E[1]:Math.max(E[1],u);}v=Math.round(v*10)/10;C=Math.round(C*10)/10;A=Math.round(A*10)/10;u=Math.round(u*10)/10;this._trackSize(C,u);this._trackSize(v,A);},_trackSize:function(u,v){if(u>this._right){this._right=u;}if(u<this._left){this._left=u;}if(v<this._top){this._top=v;}if(v>this._bottom){this._bottom=v;}this._width=this._right-this._left;this._height=this._bottom-this._top;},_left:0,_right:0,_top:0,_bottom:0,_width:0,_height:0};b.VMLDrawing=m;s=function(){this._transforms=[];this.matrix=new b.Matrix();this._normalizedMatrix=new b.Matrix();s.superclass.constructor.apply(this,arguments);};s.NAME="vmlShape";b.extend(s,b.GraphicBase,b.mix({_type:"shape",init:function(){this.initializer.apply(this,arguments);},initializer:function(u){var v=this,w=u.graphic;v.createNode();if(w){this._setGraphic(w);}this._updateHandler();},_setGraphic:function(u){var v;if(u instanceof b.VMLGraphic){this._graphic=u;}else{u=b.one(u);v=new b.VMLGraphic({render:u});v._appendShape(this);this._graphic=v;this._appendStrokeAndFill();}},_appendStrokeAndFill:function(){if(this._strokeNode){this.node.appendChild(this._strokeNode);}if(this._fillNode){this.node.appendChild(this._fillNode);}},createNode:function(){var J,F=this.get("x"),D=this.get("y"),G=this.get("width"),L=this.get("height"),I,A,P,M=this.get("visible")?"visible":"hidden",O,C,B,H,v,E,N,u,K,z;I=this.get("id");A=this._type=="path"?"shape":this._type;C="vml"+A+" "+c(l)+" "+c(this.constructor.NAME);B=this._getStrokeProps();K=this._getFillProps();P="<"+A+'  xmlns="urn:schemas-microsft.com:vml" id="'+I+'" class="'+C+'" style="behavior:url(#default#VML);display:inline-block;position:absolute;left:'+F+"px;top:"+D+"px;width:"+G+"px;height:"+L+"px;visibility:"+M+'"';
if(B&&B.weight&&B.weight>0){H=B.endcap;v=parseFloat(B.opacity);E=B.joinstyle;N=B.miterlimit;u=B.dashstyle;P+=' stroked="t" strokecolor="'+B.color+'" strokeWeight="'+B.weight+'px"';O='<stroke class="vmlstroke" xmlns="urn:schemas-microsft.com:vml" on="t" style="behavior:url(#default#VML);display:inline-block;"';O+=' opacity="'+v+'"';if(H){O+=' endcap="'+H+'"';}if(E){O+=' joinstyle="'+E+'"';}if(N){O+=' miterlimit="'+N+'"';}if(u){O+=' dashstyle="'+u+'"';}O+="></stroke>";this._strokeNode=d.createElement(O);P+=' stroked="t"';}else{P+=' stroked="f"';}if(K){if(K.node){z=K.node;this._fillNode=d.createElement(z);}if(K.color){P+=' fillcolor="'+K.color+'"';}P+=' filled="'+K.filled+'"';}P+=">";P+="</"+A+">";J=d.createElement(P);this.node=J;this._strokeFlag=false;this._fillFlag=false;},addClass:function(u){var v=this.node;q.addClass(v,u);},removeClass:function(u){var v=this.node;q.removeClass(v,u);},getXY:function(){var z=this._graphic,v=z.getXY(),u=this.get("x"),w=this.get("y");return[v[0]+u,v[1]+w];},setXY:function(v){var w=this._graphic,u=w.getXY();this.set("x",v[0]-u[0]);this.set("y",v[1]-u[1]);},contains:function(u){return u===b.one(this.node);},compareTo:function(u){var v=this.node;return v===u;},test:function(u){return r.test(this.node,u);},_getStrokeProps:function(){var B,D=this.get("stroke"),z,v,x="",u,w=0,y,C,A;if(D&&D.weight&&D.weight>0){B={};C=D.linecap||"flat";A=D.linejoin||"round";if(C!="round"&&C!="square"){C="flat";}z=parseFloat(D.opacity);v=D.dashstyle||"none";D.color=D.color||"#000000";D.weight=D.weight||1;D.opacity=i(z)?z:1;B.stroked=true;B.color=D.color;B.weight=D.weight;B.endcap=C;B.opacity=D.opacity;if(j(v)){x=[];y=v.length;for(w=0;w<y;++w){u=v[w];x[w]=u/D.weight;}}if(A=="round"||A=="bevel"){B.joinstyle=A;}else{A=parseInt(A,10);if(i(A)){B.miterlimit=Math.max(A,1);B.joinstyle="miter";}}B.dashstyle=x;}return B;},_strokeChangeHandler:function(A){if(!this._strokeFlag){return;}var w=this.node,E=this.get("stroke"),B,v,y="",u,x=0,z,D,C;if(E&&E.weight&&E.weight>0){D=E.linecap||"flat";C=E.linejoin||"round";if(D!="round"&&D!="square"){D="flat";}B=parseFloat(E.opacity);v=E.dashstyle||"none";E.color=E.color||"#000000";E.weight=E.weight||1;E.opacity=i(B)?B:1;w.stroked=true;w.strokeColor=E.color;w.strokeWeight=E.weight+"px";if(!this._strokeNode){this._strokeNode=this._createGraphicNode("stroke");w.appendChild(this._strokeNode);}this._strokeNode.endcap=D;this._strokeNode.opacity=E.opacity;if(j(v)){y=[];z=v.length;for(x=0;x<z;++x){u=v[x];y[x]=u/E.weight;}}if(C=="round"||C=="bevel"){this._strokeNode.joinstyle=C;}else{C=parseInt(C,10);if(i(C)){this._strokeNode.miterlimit=Math.max(C,1);this._strokeNode.joinstyle="miter";}}this._strokeNode.dashstyle=y;this._strokeNode.on=true;}else{if(this._strokeNode){this._strokeNode.on=false;}w.stroked=false;}this._strokeFlag=false;},_getFillProps:function(){var A=this.get("fill"),u,x,z,v,w,y=false;if(A){x={};if(A.type=="radial"||A.type=="linear"){u=parseFloat(A.opacity);u=i(u)?u:1;y=true;z=this._getGradientFill(A);w='<fill xmlns="urn:schemas-microsft.com:vml" class="vmlfill" style="behavior:url(#default#VML);display:inline-block;" opacity="'+u+'"';for(v in z){if(z.hasOwnProperty(v)){w+=" "+v+'="'+z[v]+'"';}}w+=" />";x.node=w;}else{if(A.color){u=parseFloat(A.opacity);y=true;x.color=A.color;if(i(u)){u=Math.max(Math.min(u,1),0);x.opacity=u;if(u<1){x.node='<fill xmlns="urn:schemas-microsft.com:vml" class="vmlfill" style="behavior:url(#default#VML);display:inline-block;" type="solid" opacity="'+u+'"/>';}}}}x.filled=y;}return x;},_fillChangeHandler:function(B){if(!this._fillFlag){return;}var x=this.node,A=this.get("fill"),u,w,y=false,v,z;if(A){if(A.type=="radial"||A.type=="linear"){y=true;z=this._getGradientFill(A);if(this._fillNode){for(v in z){if(z.hasOwnProperty(v)){if(v=="colors"){this._fillNode.colors.value=z[v];}else{this._fillNode[v]=z[v];}}}}else{w='<fill xmlns="urn:schemas-microsft.com:vml" class="vmlfill" style="behavior:url(#default#VML);display:inline-block;"';for(v in z){if(z.hasOwnProperty(v)){w+=" "+v+'="'+z[v]+'"';}}w+=" />";this._fillNode=d.createElement(w);x.appendChild(this._fillNode);}}else{if(A.color){x.fillcolor=A.color;u=parseFloat(A.opacity);y=true;if(i(u)&&u<1){A.opacity=u;if(this._fillNode){if(this._fillNode.getAttribute("type")!="solid"){this._fillNode.type="solid";}this._fillNode.opacity=u;}else{w='<fill xmlns="urn:schemas-microsft.com:vml" class="vmlfill" style="behavior:url(#default#VML);display:inline-block;" type="solid" opacity="'+u+'"/>';this._fillNode=d.createElement(w);x.appendChild(this._fillNode);}}else{if(this._fillNode){this._fillNode.opacity=1;this._fillNode.type="solid";}}}}}x.filled=y;this._fillFlag=false;},_updateFillNode:function(u){if(!this._fillNode){this._fillNode=this._createGraphicNode("fill");u.appendChild(this._fillNode);}},_getGradientFill:function(N){var R={},F,D,C=N.type,G=this.get("width"),Q=this.get("height"),H=i,L,E=N.stops,P=E.length,A,M,O=0,I,u="",y=N.cx,v=N.cy,z=N.fx,x=N.fy,J=N.r,B,K=N.rotation||0;if(C==="linear"){if(K<=270){K=Math.abs(K-270);}else{if(K<360){K=270+(360-K);}else{K=270;}}R.type="gradient";R.angle=K;}else{if(C==="radial"){F=G*(J*2);D=Q*(J*2);z=J*2*(z-0.5);x=J*2*(x-0.5);z+=y;x+=v;R.focussize=(F/G)/10+"% "+(D/Q)/10+"%";R.alignshape=false;R.type="gradientradial";R.focus="100%";R.focusposition=Math.round(z*100)+"% "+Math.round(x*100)+"%";}}for(;O<P;++O){L=E[O];M=L.color;A=L.opacity;A=H(A)?A:1;B=L.offset||O/(P-1);B*=(J*2);B=Math.round(100*B)+"%";I=O>0?O+1:"";R["opacity"+I]=A+"";u+=", "+B+" "+M;}if(parseFloat(B)<100){u+=", 100% "+M;}R.colors=u.substr(2);return R;},_addTransform:function(v,u){u=b.Array(u);this._transform=o.trim(this._transform+" "+v+"("+u.join(", ")+")");u.unshift(v);this._transforms.push(u);if(this.initialized){this._updateTransform();}},_updateTransform:function(){var z=this.node,I,w,A,H=this.get("x"),F=this.get("y"),D,B,G=this.matrix,u=this._normalizedMatrix,v=this instanceof b.VMLPath,C=0,E=this._transforms.length;if(this._transforms&&this._transforms.length>0){A=this.get("transformOrigin");
if(v){u.translate(this._left,this._top);}D=A[0]-0.5;B=A[1]-0.5;D=Math.max(-0.5,Math.min(0.5,D));B=Math.max(-0.5,Math.min(0.5,B));for(;C<E;++C){I=this._transforms[C].shift();if(I){u[I].apply(u,this._transforms[C]);G[I].apply(G,this._transforms[C]);}}if(v){u.translate(-this._left,-this._top);}w=u.a+","+u.c+","+u.b+","+u.d+","+0+","+0;}this._graphic.addToRedrawQueue(this);if(w){if(!this._skew){this._skew=d.createElement('<skew class="vmlskew" xmlns="urn:schemas-microsft.com:vml" on="false" style="behavior:url(#default#VML);display:inline-block;" />');this.node.appendChild(this._skew);}this._skew.matrix=w;this._skew.on=true;this._skew.origin=D+", "+B;}if(this._type!="path"){this._transforms=[];}z.style.left=(H+this._getSkewOffsetValue(u.dx))+"px";z.style.top=(F+this._getSkewOffsetValue(u.dy))+"px";},_getSkewOffsetValue:function(v){var u=b.MatrixUtil.sign(v),w=Math.abs(v);v=Math.min(w,32767)*u;return v;},_translateX:0,_translateY:0,_transform:"",translate:function(u,v){this._translateX+=u;this._translateY+=v;this._addTransform("translate",arguments);},translateX:function(u){this._translateX+=u;this._addTransform("translateX",arguments);},translateY:function(u){this._translateY+=u;this._addTransform("translateY",arguments);},skew:function(u,v){this._addTransform("skew",arguments);},skewX:function(u){this._addTransform("skewX",arguments);},skewY:function(u){this._addTransform("skewY",arguments);},rotate:function(u){this._addTransform("rotate",arguments);},scale:function(u,v){this._addTransform("scale",arguments);},on:function(v,u){if(b.Node.DOM_EVENTS[v]){return b.one("#"+this.get("id")).on(v,u);}return b.on.apply(this,arguments);},_draw:function(){},_updateHandler:function(w){var v=this,u=v.node;v._fillChangeHandler();v._strokeChangeHandler();u.style.width=this.get("width")+"px";u.style.height=this.get("height")+"px";this._draw();v._updateTransform();},_createGraphicNode:function(u){u=u||this._type;return d.createElement("<"+u+' xmlns="urn:schemas-microsft.com:vml" style="behavior:url(#default#VML);display:inline-block;" class="vml'+u+'"/>');},_getDefaultFill:function(){return{type:"solid",cx:0.5,cy:0.5,fx:0.5,fy:0.5,r:0.5};},_getDefaultStroke:function(){return{weight:1,dashstyle:"none",color:"#000",opacity:1};},set:function(){var u=this;h.prototype.set.apply(u,arguments);if(u.initialized){u._updateHandler();}},getBounds:function(){var z=this instanceof b.VMLPath,v=this.get("width"),A=this.get("height"),u=this.get("x"),B=this.get("y");if(z){u=u+this._left;B=B+this._top;v=this._right-this._left;A=this._bottom-this._top;}return this._getContentRect(v,A,u,B);},_getContentRect:function(J,B,H,E){var z=this.get("transformOrigin"),I=z[0]*J,G=z[1]*B,D=this.matrix.getTransformArray(this.get("transform")),F=new b.Matrix(),A=0,C=D.length,v,K,L,u=this instanceof b.VMLPath;if(u){F.translate(this._left,this._top);}I=!isNaN(I)?I:0;G=!isNaN(G)?G:0;F.translate(I,G);for(;A<C;A=A+1){v=D[A];K=v.shift();if(K){F[K].apply(F,v);}}F.translate(-I,-G);if(u){F.translate(-this._left,-this._top);}L=F.getContentRect(J,B,H,E);return L;},destroy:function(){var u=this.get("graphic");if(u){u.removeShape(this);}else{this._destroy();}},_destroy:function(){if(this.node){if(this._fillNode){this.node.removeChild(this._fillNode);this._fillNode=null;}if(this._strokeNode){this.node.removeChild(this._strokeNode);this._strokeNode=null;}b.one(this.node).remove(true);}}},b.VMLDrawing.prototype));s.ATTRS={transformOrigin:{valueFn:function(){return[0.5,0.5];}},transform:{setter:function(x){var w=0,u,v;this.matrix.init();this._normalizedMatrix.init();this._transforms=this.matrix.getTransformArray(x);u=this._transforms.length;for(;w<u;++w){v=this._transforms[w];}this._transform=x;return x;},getter:function(){return this._transform;}},x:{value:0},y:{value:0},id:{valueFn:function(){return b.guid();},setter:function(v){var u=this.node;if(u){u.setAttribute("id",v);}return v;}},width:{value:0},height:{value:0},visible:{value:true,setter:function(w){var v=this.node,u=w?"visible":"hidden";if(v){v.style.visibility=u;}return w;}},fill:{valueFn:"_getDefaultFill",setter:function(x){var v,w,u=this.get("fill")||this._getDefaultFill();if(x){if(x.hasOwnProperty("color")){x.type="solid";}for(v in x){if(x.hasOwnProperty(v)){u[v]=x[v];}}}w=u;if(w&&w.color){if(w.color===undefined||w.color=="none"){w.color=null;}}this._fillFlag=true;return w;}},stroke:{valueFn:"_getDefaultStroke",setter:function(y){var w,x,u,v=this.get("stroke")||this._getDefaultStroke();if(y){if(y.hasOwnProperty("weight")){u=parseInt(y.weight,10);if(!isNaN(u)){y.weight=u;}}for(w in y){if(y.hasOwnProperty(w)){v[w]=y[w];}}}x=v;this._strokeFlag=true;return x;}},autoSize:{value:false},pointerEvents:{value:"visiblePainted"},node:{readOnly:true,getter:function(){return this.node;}},graphic:{readOnly:true,getter:function(){return this._graphic;}}};b.VMLShape=s;t=function(){t.superclass.constructor.apply(this,arguments);};t.NAME="vmlPath";b.extend(t,b.VMLShape,{end:function(){this._closePath();this._updateTransform();}});t.ATTRS=b.merge(b.VMLShape.ATTRS,{width:{getter:function(){var u=Math.max(this._right-this._left,0);return u;}},height:{getter:function(){return Math.max(this._bottom-this._top,0);}},path:{readOnly:true,getter:function(){return this._path;}}});b.VMLPath=t;g=function(){g.superclass.constructor.apply(this,arguments);};g.NAME="vmlRect";b.extend(g,b.VMLShape,{_type:"rect"});g.ATTRS=b.VMLShape.ATTRS;b.VMLRect=g;k=function(){k.superclass.constructor.apply(this,arguments);};k.NAME="vmlEllipse";b.extend(k,b.VMLShape,{_type:"oval"});k.ATTRS=b.merge(b.VMLShape.ATTRS,{xRadius:{lazyAdd:false,getter:function(){var u=this.get("width");u=Math.round((u/2)*100)/100;return u;},setter:function(v){var u=v*2;this.set("width",u);return v;}},yRadius:{lazyAdd:false,getter:function(){var u=this.get("height");u=Math.round((u/2)*100)/100;return u;},setter:function(v){var u=v*2;this.set("height",u);return v;}}});b.VMLEllipse=k;a=function(u){a.superclass.constructor.apply(this,arguments);};a.NAME="vmlCircle";b.extend(a,s,{_type:"oval"});
a.ATTRS=b.merge(s.ATTRS,{radius:{lazyAdd:false,value:0},width:{setter:function(u){this.set("radius",u/2);return u;},getter:function(){var u=this.get("radius"),v=u&&u>0?u*2:0;return v;}},height:{setter:function(u){this.set("radius",u/2);return u;},getter:function(){var u=this.get("radius"),v=u&&u>0?u*2:0;return v;}}});b.VMLCircle=a;n=function(){n.superclass.constructor.apply(this,arguments);};n.NAME="vmlPieSlice";b.extend(n,b.VMLShape,b.mix({_type:"shape",_draw:function(A){var v=this.get("cx"),B=this.get("cy"),z=this.get("startAngle"),w=this.get("arc"),u=this.get("radius");this.clear();this.drawWedge(v,B,z,w,u);this.end();}},b.VMLDrawing.prototype));n.ATTRS=b.mix({cx:{value:0},cy:{value:0},startAngle:{value:0},arc:{value:0},radius:{value:0}},b.VMLShape.ATTRS);b.VMLPieSlice=n;p=function(){p.superclass.constructor.apply(this,arguments);};p.NAME="vmlGraphic";p.ATTRS={render:{},id:{valueFn:function(){return b.guid();},setter:function(v){var u=this._node;if(u){u.setAttribute("id",v);}return v;}},shapes:{readOnly:true,getter:function(){return this._shapes;}},contentBounds:{readOnly:true,getter:function(){return this._contentBounds;}},node:{readOnly:true,getter:function(){return this._node;}},width:{setter:function(u){if(this._node){this._node.style.width=u+"px";}return u;}},height:{setter:function(u){if(this._node){this._node.style.height=u+"px";}return u;}},autoSize:{value:false},preserveAspectRatio:{value:"xMidYMid"},resizeDown:{getter:function(){return this._resizeDown;},setter:function(u){this._resizeDown=u;if(this._node){this._redraw();}return u;}},x:{getter:function(){return this._x;},setter:function(u){this._x=u;if(this._node){this._node.style.left=u+"px";}return u;}},y:{getter:function(){return this._y;},setter:function(u){this._y=u;if(this._node){this._node.style.top=u+"px";}return u;}},autoDraw:{value:true},visible:{value:true,setter:function(u){this._toggleVisible(u);return u;}}};b.extend(p,b.GraphicBase,{_x:0,_y:0,getXY:function(){var v=this.parentNode,u=this.get("x"),z=this.get("y"),w;if(v){w=b.one(v).getXY();w[0]+=u;w[1]+=z;}else{w=b.DOM._getOffset(this._node);}return w;},_resizeDown:false,initializer:function(v){var w=this.get("render"),u=this.get("visible")?"visible":"hidden";this._shapes={};this._contentBounds={left:0,top:0,right:0,bottom:0};this._node=d.createElement("div");this._node.style.position="absolute";this._node.style.left=this.get("x")+"px";this._node.style.top=this.get("y")+"px";this._node.style.visibility=u;this._node.setAttribute("id",this.get("id"));this._contentNode=this._createGraphic();this._contentNode.style.position="absolute";this._contentNode.style.left="0px";this._contentNode.style.top="0px";this._contentNode.style.visibility=u;this._node.appendChild(this._contentNode);if(w){this.render(w);}},render:function(y){var u=b.one(y),v=this.get("width")||parseInt(u.getComputedStyle("width"),10),x=this.get("height")||parseInt(u.getComputedStyle("height"),10);u=u||d.body;u.appendChild(this._node);this.parentNode=u;this.set("width",v);this.set("height",x);return this;},destroy:function(){this.clear();b.one(this._node).remove(true);},addShape:function(u){u.graphic=this;if(!this.get("visible")){u.visible=false;}var w=this._getShapeClass(u.type),v=new w(u);this._appendShape(v);v._appendStrokeAndFill();return v;},_appendShape:function(v){var w=v.node,u=this._frag||this._contentNode;if(this.get("autoDraw")){u.appendChild(w);}else{this._getDocFrag().appendChild(w);}},removeShape:function(u){if(!(u instanceof s)){if(o.isString(u)){u=this._shapes[u];}}if(u&&(u instanceof s)){u._destroy();this._shapes[u.get("id")]=null;delete this._shapes[u.get("id")];}if(this.get("autoDraw")){this._redraw();}},removeAllShapes:function(){var u=this._shapes,v;for(v in u){if(u.hasOwnProperty(v)){u[v].destroy();}}this._shapes={};},_removeChildren:function(u){if(u.hasChildNodes()){var v;while(u.firstChild){v=u.firstChild;this._removeChildren(v);u.removeChild(v);}}},clear:function(){this.removeAllShapes();this._removeChildren(this._contentNode);},_toggleVisible:function(x){var w,v=this._shapes,u=x?"visible":"hidden";if(v){for(w in v){if(v.hasOwnProperty(w)){v[w].set("visible",x);}}}if(this._contentNode){this._contentNode.style.visibility=u;}if(this._node){this._node.style.visibility=u;}},setSize:function(u,v){u=Math.round(u);v=Math.round(v);this._node.style.width=u+"px";this._node.style.height=v+"px";},setPosition:function(u,v){u=Math.round(u);v=Math.round(v);this._node.style.left=u+"px";this._node.style.top=v+"px";},_createGraphic:function(){var u=d.createElement('<group xmlns="urn:schemas-microsft.com:vml" style="behavior:url(#default#VML);display:block;position:absolute;top:0px;left:0px;zoom:1;" />');return u;},_createGraphicNode:function(u){return d.createElement("<"+u+' xmlns="urn:schemas-microsft.com:vml" style="behavior:url(#default#VML);display:inline-block;zoom:1;" />');},getShapeById:function(u){return this._shapes[u];},_getShapeClass:function(v){var u=this._shapeClass[v];if(u){return u;}return v;},_shapeClass:{circle:b.VMLCircle,rect:b.VMLRect,path:b.VMLPath,ellipse:b.VMLEllipse,pieslice:b.VMLPieSlice},batch:function(v){var u=this.get("autoDraw");this.set("autoDraw",false);v.apply();this._redraw();this.set("autoDraw",u);},_getDocFrag:function(){if(!this._frag){this._frag=d.createDocumentFragment();}return this._frag;},addToRedrawQueue:function(u){var w,v;this._shapes[u.get("id")]=u;if(!this._resizeDown){w=u.getBounds();v=this._contentBounds;v.left=v.left<w.left?v.left:w.left;v.top=v.top<w.top?v.top:w.top;v.right=v.right>w.right?v.right:w.right;v.bottom=v.bottom>w.bottom?v.bottom:w.bottom;v.width=v.right-v.left;v.height=v.bottom-v.top;this._contentBounds=v;}if(this.get("autoDraw")){this._redraw();}},_redraw:function(){var B=this.get("autoSize"),C,v,y,K=0,w=0,A=this._resizeDown?this._getUpdatedContentBounds():this._contentBounds,x=A.left,I=A.right,D=A.top,z=A.bottom,F=A.width,G=A.height,u,E,L,H,J;if(B){if(B=="sizeContentToGraphic"){C=this.get("preserveAspectRatio");F=A.width;G=A.height;v=this.get("width");
y=this.get("height");if(C=="none"||F/G===v/y){K=x;w=D;E=F;L=G;}else{if(F*y/G>v){u=y/v;E=F;L=F*u;J=(v*(G/F))*(L/y);w=this._calculateCoordOrigin(C.slice(5).toLowerCase(),J,L);w=D+w;K=x;}else{u=v/y;E=G*u;L=G;H=(y*(F/G))*(E/v);K=this._calculateCoordOrigin(C.slice(1,4).toLowerCase(),H,E);K=K+x;w=D;}}this._contentNode.style.width=v+"px";this._contentNode.style.height=y+"px";this._contentNode.coordOrigin=K+", "+w;}else{E=F;L=G;this._contentNode.style.width=F+"px";this._contentNode.style.height=G+"px";this._state.width=F;this._state.height=G;if(this._node){this._node.style.width=F+"px";this._node.style.height=G+"px";}}this._contentNode.coordSize=E+", "+L;}else{this._contentNode.style.width=I+"px";this._contentNode.style.height=z+"px";this._contentNode.coordSize=I+", "+z;}if(this._frag){this._contentNode.appendChild(this._frag);this._frag=null;}},_calculateCoordOrigin:function(u,v,x){var w;switch(u){case"min":w=0;break;case"mid":w=(v-x)/2;break;case"max":w=(v-x);break;}return w;},_getUpdatedContentBounds:function(){var y,w,v,u=this._shapes,x={left:0,top:0,right:0,bottom:0};for(w in u){if(u.hasOwnProperty(w)){v=u[w];y=v.getBounds();x.left=Math.min(x.left,y.left);x.top=Math.min(x.top,y.top);x.right=Math.max(x.right,y.right);x.bottom=Math.max(x.bottom,y.bottom);}}x.width=x.right-x.left;x.height=x.bottom-x.top;this._contentBounds=x;return x;}});b.VMLGraphic=p;},"@VERSION@",{"requires":["graphics"]});