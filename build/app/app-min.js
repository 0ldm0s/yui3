YUI.add("controller",function(a){},"@VERSION@",{requires:["base-build"]});YUI.add("model",function(f){var c=YUI.namespace("Env.Model"),d=f.Lang,g=f.Object,a="change",b="error";function e(){e.superclass.constructor.apply(this,arguments);}f.Model=f.extend(e,f.Base,{idAttribute:"id",initializer:function(h){this.changed={};this.lastChange={};},destroy:function(i,k){var h=this;if(typeof i==="function"){k=i;i={};}function j(l){if(!l){h.list&&h.list.remove(h);e.superclass.destroy.call(h);}k&&k.apply(null,arguments);}if(i&&i["delete"]){this.sync("delete",i,j);}else{j();}return this;},generateClientId:function(){c.lastId||(c.lastId=0);return"c"+(c.lastId+=1);},getAsHTML:function(h){var i=this.get(h);return f.Escape.html(d.isValue(i)?String(i):"");},getAsURL:function(h){var i=this.get(h);return encodeURIComponent(d.isValue(i)?String(i):"");},isModified:function(){return this.isNew()||!g.isEmpty(this.changed);},isNew:function(){return !d.isValue(this.get("id"));},load:function(i,j){var h=this;if(typeof i==="function"){j=i;i={};}this.sync("read",i,function(l,k){if(!l){h.setAttrs(h.parse(k),i);h.changed={};}j&&j.apply(null,arguments);});return this;},parse:function(h){if(typeof h==="string"){try{return f.JSON.parse(h);}catch(i){this.fire(b,{error:i,response:h,type:"parse"});return null;}}return h;},save:function(i,j){var h=this;if(typeof i==="function"){j=i;i={};}this.sync(this.isNew()?"create":"update",i,function(l,k){if(!l&&k){h.setAttrs(h.parse(k),i);h.changed={};}j&&j.apply(null,arguments);});return this;},set:function(j,k,i){var h={};h[j]=k;return this.setAttrs(h,i);},setAttrs:function(h,i){var l=this.idAttribute,o,m,j,k,n;if(!this._validate(h)){return this;}i||(i={});n=i._transaction={};if(l!=="id"){if(g.owns(h,l)){h.id=h[l];}else{if(g.owns(h,"id")){h[l]=h.id;}}}for(j in h){if(g.owns(h,j)){this._setAttr(j,h[j],i);}}if(!g.isEmpty(n)){o=this.changed;k=this.lastChange={};for(j in n){if(g.owns(n,j)){m=n[j];o[j]=m.newVal;k[j]={newVal:m.newVal,prevVal:m.prevVal,src:m.src||null};}}if(!i.silent){if(!this._changeEvent){this._changeEvent=this.publish(a,{preventable:false});}this.fire(a,{changed:k});}}return this;},sync:function(){var h=f.Array(arguments,0,true).pop();if(typeof h==="function"){h();}},toJSON:function(){var h=this.getAttrs();delete h.clientId;delete h.destroyed;delete h.initialized;if(this.idAttribute!=="id"){delete h.id;}return h;},undo:function(m,i){var l=this.lastChange,k=this.idAttribute,h={},j;m||(m=g.keys(l));f.Array.each(m,function(n){if(g.owns(l,n)){n=n===k?"id":n;j=true;h[n]=l[n].prevVal;}});if(j){return this.setAttrs(h,i);}return true;},validate:function(){},_getAttrInitVal:function(i,j,m){var h=e.superclass._getAttrInitVal,n=this.idAttribute,l,k;if(n!=="id"&&(i==="id"||i===n)){l=f.Array(arguments,0,true);l[0]=n;k=h.apply(this,l);if(k){return k;}l[0]="id";return h.apply(this,l);}return h.apply(this,arguments);},_validate:function(h){var i=this.validate(h);if(d.isValue(i)){this.fire(b,{type:"validate",attributes:h,error:i});return false;}return true;},_defAttrChangeFn:function(i){var h=i.attrName;if(!this._setAttrVal(h,i.subAttrName,i.prevVal,i.newVal)){i.stopImmediatePropagation();}else{i.newVal=this.get(h);if(i._transaction){i._transaction[h]=i;}}}},{NAME:"model",ATTRS:{clientId:{valueFn:"generateClientId",readOnly:true},id:{value:null}}});},"@VERSION@",{requires:["base-build","escape","json-parse"]});YUI.add("model-list",function(g){var e=g.Lang,d=g.Array,c="add",f="refresh",a="remove";function b(){b.superclass.constructor.apply(this,arguments);}g.ModelList=g.extend(b,g.Base,{model:null,initializer:function(i){i||(i={});var h=this.model=i.model||this.model;this.publish(c,{defaultFn:this._defAddFn});this.publish(f,{defaultFn:this._defRefreshFn});this.publish(a,{defaultFn:this._defRemoveFn});if(h){this.after("*:idChange",this._afterIdChange);}else{}this._clear();},add:function(m,j){var l,k,h;if(e.isArray(m)){l=[];for(k=0,h=m.length;k<h;++k){l.push(this._add(m[k],j));}return l;}else{return this._add(m,j);}},create:function(j,i,k){var h=this;if(typeof i==="function"){k=i;i={};}if(!(j instanceof g.Model)){j=new this.model(j);}return j.save(i,function(l){if(!l){h.add(j,i);}k&&k.apply(null,arguments);});},getByClientId:function(h){return this._clientIdMap[h]||null;},getById:function(h){return this._idMap[h]||null;},invoke:function(h){return d.invoke(this._items,h,d(arguments,1,true));},load:function(i,j){var h=this;if(typeof i==="function"){j=i;i={};}this.sync("read",i,function(l,k){if(!l){h.refresh(h.parse(k),i);}j&&j.apply(null,arguments);});return this;},map:function(h,i){return d.map(this._items,h,i);},parse:function(h){if(typeof h==="string"){try{return g.JSON.parse(h)||[];}catch(i){g.error("Failed to parse JSON response.");return null;}}return h||[];},refresh:function(j,h){h||(h={});var i=g.merge(h,{src:"refresh",models:d.map(j,function(k){return k instanceof g.Model?k:new this.model(k);},this)});h.silent?this._defRefreshFn(i):this.fire(f,i);return this;},remove:function(m,j){var k,h,l;if(e.isArray(m)){l=[];for(k=0,h=m.length;k<h;++k){l.push(this._remove(m[k],j));}return l;}else{return this._remove(m,j);}},sort:function(i){var h=this.comparator,k=this._items.concat(),j;if(!h){return this;}i||(i={});k.sort(function(m,l){var o=h(m),n=h(l);return o<n?-1:(o>n?1:0);});j=g.merge(i,{models:k,src:"sort"});i.silent?this._defRefreshFn(j):this.fire(f,j);return this;},sync:function(){var h=d(arguments,0,true).pop();if(typeof h==="function"){h();}},toArray:function(){return this._items.concat();},toJSON:function(){return this.map(function(h){return h.toJSON();});},_add:function(i,h){var j;h||(h={});if(!(i instanceof g.Model)){i=new this.model(i);}if(this._clientIdMap[i.get("clientId")]){g.error("Model already in list.");return;}j=g.merge(h,{index:this._findIndex(i),model:i});h.silent?this._defAddFn(j):this.fire(c,j);return i;},_attachList:function(h){if(h.list){h.list.remove(h);}h.list=this;h.addTarget(this);},_detachList:function(h){delete h.list;h.removeTarget(this);},_clear:function(){d.each(this._items,this._detachList,this);
this._clientIdMap={};this._idMap={};this._items=[];},_findIndex:function(l){if(!this._items.length){return 0;}if(!this.comparator){return this._items.length;}var i=this.comparator,j=this._items,h=j.length,m=0,o=i(l),n,k;while(m<h){k=(m+h)/2;n=j[k];if(n&&i(n)<o){m=k+1;}else{h=k;}}return m;},_remove:function(j,i){var h=this.indexOf(j),k;i||(i={});if(h===-1){g.error("Model not in list.");return;}k=g.merge(i,{index:h,model:j});i.silent?this._defRemoveFn(k):this.fire(a,k);return j;},_afterIdChange:function(h){h.prevVal&&delete this._idMap[h.prevVal];h.newVal&&(this._idMap[h.newVal]=h.target);},_defAddFn:function(i){var h=i.model,j=h.get("id");this._clientIdMap[h.get("clientId")]=h;if(j){this._idMap[j]=h;}this._attachList(h);this._items.splice(i.index,0,h);},_defRefreshFn:function(h){if(h.src==="sort"){this._items=h.models.concat();return;}this._clear();if(h.models.length){this.add(h.models,{silent:true});}},_defRemoveFn:function(i){var h=i.model,j=h.get("id");this._detachList(h);delete this._clientIdMap[h.get("clientId")];if(j){delete this._idMap[j];}this._items.splice(i.index,1);}},{NAME:"modelList"});g.augment(b,g.ArrayList);g.ArrayList.addMethod(b.prototype,["get","getAsHTML","getAsURL"]);},"@VERSION@",{requires:["array-extras","array-invoke","arraylist","base-build","json-parse","model"]});YUI.add("view",function(b){function a(){a.superclass.constructor.apply(this,arguments);}b.View=b.extend(a,b.Base,{container:"<div/>",events:{},template:"",initializer:function(c){c||(c={});this.model=c.model;this.create(c.container||this.container);this.events=c.events?b.merge(this.events,c.events):this.events;this.attachEvents(this.events);},destructor:function(){this.container&&this.container.remove(true);},attachEvents:function(g){var d=this.container,i=b.Object.owns,h,e,f,c;for(c in g){if(!i(g,c)){continue;}e=g[c];for(f in e){if(!i(e,f)){continue;}h=e[f];if(typeof h==="string"){h=this[h];}d.delegate(f,h,c,this);}}},create:function(c){this.container=typeof c==="string"?b.Node.create(c):b.one(c);return this;},remove:function(){this.container.remove();return this;},render:function(){return this;}},{NAME:"view"});},"@VERSION@",{requires:["base-build","node-event-delegate"]});YUI.add("app",function(a){},"@VERSION@",{use:["controller","model","model-list","view"]});