YUI.add("event-custom-base",function(c){c.Env.evt={handles:{},plugins:{}};var m=0,f=1,l={objs:null,before:function(x,z,A,B){var y=x,w;if(B){w=[x,B].concat(c.Array(arguments,4,true));y=c.rbind.apply(c,w);}return this._inject(m,y,z,A);},after:function(x,z,A,B){var y=x,w;if(B){w=[x,B].concat(c.Array(arguments,4,true));y=c.rbind.apply(c,w);}return this._inject(f,y,z,A);},_inject:function(w,y,z,B){var C=c.stamp(z),A,x;if(!z._yuiaop){z._yuiaop={};}A=z._yuiaop;if(!A[B]){A[B]=new c.Do.Method(z,B);z[B]=function(){return A[B].exec.apply(A[B],arguments);};}x=C+c.stamp(y)+B;A[B].register(x,y,w);return new c.EventHandle(A[B],x);},detach:function(w){if(w.detach){w.detach();}},_unload:function(x,w){}};c.Do=l;l.Method=function(w,x){this.obj=w;this.methodName=x;this.method=w[x];this.before={};this.after={};};l.Method.prototype.register=function(x,y,w){if(w){this.after[x]=y;}else{this.before[x]=y;}};l.Method.prototype._delete=function(w){delete this.before[w];delete this.after[w];};l.Method.prototype.exec=function(){var y=c.Array(arguments,0,true),z,x,C,A=this.before,w=this.after,B=false;for(z in A){if(A.hasOwnProperty(z)){x=A[z].apply(this.obj,y);if(x){switch(x.constructor){case l.Halt:return x.retVal;case l.AlterArgs:y=x.newArgs;break;case l.Prevent:B=true;break;default:}}}}if(!B){x=this.method.apply(this.obj,y);}l.originalRetVal=x;l.currentRetVal=x;for(z in w){if(w.hasOwnProperty(z)){C=w[z].apply(this.obj,y);if(C&&C.constructor==l.Halt){return C.retVal;}else{if(C&&C.constructor==l.AlterReturn){x=C.newRetVal;l.currentRetVal=x;}}}}return x;};l.AlterArgs=function(x,w){this.msg=x;this.newArgs=w;};l.AlterReturn=function(x,w){this.msg=x;this.newRetVal=w;};l.Halt=function(x,w){this.msg=x;this.retVal=w;};l.Prevent=function(w){this.msg=w;};l.Error=l.Halt;var j=c.Array,d,t="after",b=["broadcast","monitored","bubbles","context","contextFn","currentTarget","defaultFn","defaultTargetOnly","details","emitFacade","fireOnce","async","host","preventable","preventedFn","queuable","silent","stoppedFn","target","type"],e=j.hash(b),s=Array.prototype.slice,k=9,g="yui:log",a=function(y,x,w){var z;for(z in x){if(e[z]&&(w||!(z in y))){y[z]=x[z];}}return y;};c.CustomEvent=function(w,x){x=x||{};this.id=c.stamp(this);this.type=w;this.context=c;this.logSystem=(w==g);this.silent=this.logSystem;if(d){this.subscribers={};}this._subscribers=[];if(d){this.afters={};}this._afters=[];this.preventable=true;this.bubbles=true;this.signature=k;this.applyConfig(x,true);};c.CustomEvent.MAINTAIN_DEPRECATED_SUBS=false;c.CustomEvent.mixConfigs=a;c.CustomEvent.prototype={constructor:c.CustomEvent,hasSubs:function(w){var z=this._subscribers.length,x=this._afters.length,y=this.sibling;if(y){z+=y._subscribers.length;x+=y._afters.length;}if(w){return(w=="after")?x:z;}return(z+x);},monitor:function(y){this.monitored=true;var x=this.id+"|"+this.type+"_"+y,w=s.call(arguments,0);w[0]=x;return this.host.on.apply(this.host,w);},getSubs:function(){var y=this._subscribers,w=this._afters,x=this.sibling;y=(x)?y.concat(x._subscribers):y.concat();w=(x)?w.concat(x._afters):w.concat();return[y,w];},applyConfig:function(x,w){a(this,x,w);},_on:function(A,y,x,w){if(!A){this.log("Invalid callback for CE: "+this.type);}var z=new c.Subscriber(A,y,x,w);if(this.fireOnce&&this.fired){if(this.async){setTimeout(c.bind(this._notify,this,z,this.firedWith),0);}else{this._notify(z,this.firedWith);}}if(w==t){this._afters.push(z);}else{this._subscribers.push(z);}if(d){if(w==t){this.afters[z.id]=z;}else{this.subscribers[z.id]=z;}}return new c.EventHandle(this,z);},subscribe:function(y,x){var w=(arguments.length>2)?s.call(arguments,2):null;return this._on(y,x,w,true);},on:function(y,x){var w=(arguments.length>2)?s.call(arguments,2):null;if(this.host){this.host._monitor("attach",this.type,{args:arguments});}return this._on(y,x,w,true);},after:function(y,x){var w=(arguments.length>2)?s.call(arguments,2):null;return this._on(y,x,w,t);},detach:function(A,y){if(A&&A.detach){return A.detach();}var x,z,B=0,w=this._subscribers,C=this._afters;for(x=w.length;x>=0;x--){z=w[x];if(z&&(!A||A===z.fn)){this._delete(z,w,x);B++;}}for(x=C.length;x>=0;x--){z=C[x];if(z&&(!A||A===z.fn)){this._delete(z,C,x);B++;}}return B;},unsubscribe:function(){return this.detach.apply(this,arguments);},_notify:function(z,y,w){this.log(this.type+"->"+"sub: "+z.id);var x;x=z.notify(y,this);if(false===x||this.stopped>1){this.log(this.type+" cancelled by subscriber");return false;}return true;},log:function(x,w){if(!this.silent){}},fire:function(){if(this.fireOnce&&this.fired){this.log("fireOnce event: "+this.type+" already fired");return true;}else{var w=s.call(arguments,0);this.fired=true;if(this.fireOnce){this.firedWith=w;}if(this.emitFacade){return this.fireComplex(w);}else{return this.fireSimple(w);}}},fireSimple:function(w){this.stopped=0;this.prevented=0;if(this.hasSubs()){var x=this.getSubs();this._procSubs(x[0],w);this._procSubs(x[1],w);}this._broadcast(w);return this.stopped?false:true;},fireComplex:function(w){w[0]=w[0]||{};return this.fireSimple(w);},_procSubs:function(A,y,w){var B,z,x;for(z=0,x=A.length;z<x;z++){B=A[z];if(B&&B.fn){if(false===this._notify(B,y,w)){this.stopped=2;}if(this.stopped==2){return false;}}}return true;},_broadcast:function(x){if(!this.stopped&&this.broadcast){var w=x.concat();w.unshift(this.type);if(this.host!==c){c.fire.apply(c,w);}if(this.broadcast==2){c.Global.fire.apply(c.Global,w);}}},unsubscribeAll:function(){return this.detachAll.apply(this,arguments);},detachAll:function(){return this.detach();},_delete:function(z,y,x){var w=z._when;if(!y){y=(w===t)?this._afters:this._subscribers;x=j.indexOf(y,z,0);}if(z&&y[x]===z){y.splice(x,1);}if(d){if(w===t){delete this.afters[z.id];}else{delete this.subscribers[z.id];}}if(this.host){this.host._monitor("detach",this.type,{ce:this,sub:z});}if(z){z.deleted=true;}}};c.Subscriber=function(z,y,x,w){this.fn=z;this.context=y;this.id=c.stamp(this);this.args=x;this._when=w;};c.Subscriber.prototype={constructor:c.Subscriber,_notify:function(A,y,z){if(this.deleted&&!this.postponed){if(this.postponed){delete this.fn;
delete this.context;}else{delete this.postponed;return null;}}var w=this.args,x;switch(z.signature){case 0:x=this.fn.call(A,z.type,y,A);break;case 1:x=this.fn.call(A,y[0]||null,A);break;default:if(w||y){y=y||[];w=(w)?y.concat(w):y;x=this.fn.apply(A,w);}else{x=this.fn.call(A);}}if(this.once){z._delete(this);}return x;},notify:function(x,z){var A=this.context,w=true;if(!A){A=(z.contextFn)?z.contextFn():z.context;}if(c.config&&c.config.throwFail){w=this._notify(A,x,z);}else{try{w=this._notify(A,x,z);}catch(y){c.error(this+" failed: "+y.message,y);}}return w;},contains:function(x,w){if(w){return((this.fn==x)&&this.context==w);}else{return(this.fn==x);}},valueOf:function(){return this.id;}};c.EventHandle=function(w,x){this.evt=w;this.sub=x;};c.EventHandle.prototype={batch:function(w,x){w.call(x||this,this);if(c.Lang.isArray(this.evt)){c.Array.each(this.evt,function(y){y.batch.call(x||y,w);});}},detach:function(){var w=this.evt,y=0,x;if(w){if(c.Lang.isArray(w)){for(x=0;x<w.length;x++){y+=w[x].detach();}}else{w._delete(this.sub);y=1;}}return y;},monitor:function(w){return this.evt.monitor.apply(this.evt,arguments);}};var i=c.Lang,v=":",u="|",h="~AFTER~",p=/(.*?)(:)(.*?)/,r=c.cached(function(w){return w.replace(p,"*$2$3");}),n=c.cached(function(w,x){if(!x||!i.isString(w)||w.indexOf(v)>-1){return w;}return x+v+w;}),o=c.cached(function(y,A){var x=y,z,B,w;if(!i.isString(x)){return x;}w=x.indexOf(h);if(w>-1){B=true;x=x.substr(h.length);}w=x.indexOf(u);if(w>-1){z=x.substr(0,(w));x=x.substr(w+1);if(x=="*"){x=null;}}return[z,(A)?n(x,A):x,B,x];}),q=function(w){var x=(i.isObject(w))?w:{};this._yuievt=this._yuievt||{id:c.guid(),events:{},targets:{},config:x,chain:("chain" in x)?x.chain:c.config.chain,bubbling:false,defaults:{context:x.context||this,host:this,emitFacade:x.emitFacade,fireOnce:x.fireOnce,queuable:x.queuable,monitored:x.monitored,broadcast:x.broadcast,defaultTargetOnly:x.defaultTargetOnly,bubbles:("bubbles" in x)?x.bubbles:true}};};q.prototype={constructor:q,once:function(){var w=this.on.apply(this,arguments);w.batch(function(x){if(x.sub){x.sub.once=true;}});return w;},onceAfter:function(){var w=this.after.apply(this,arguments);w.batch(function(x){if(x.sub){x.sub.once=true;}});return w;},parseType:function(w,x){return o(w,x||this._yuievt.config.prefix);},on:function(A,F,y){var I=o(A,this._yuievt.config.prefix),K,L,x,O,H,G,M,C=c.Env.evt.handles,z,w,D,N=c.Node,J,E,B;this._monitor("attach",I[1],{args:arguments,category:I[0],after:I[2]});if(i.isObject(A)){if(i.isFunction(A)){return c.Do.before.apply(c.Do,arguments);}K=F;L=y;x=s.call(arguments,0);O=[];if(i.isArray(A)){B=true;}z=A._after;delete A._after;c.each(A,function(R,Q){if(i.isObject(R)){K=R.fn||((i.isFunction(R))?R:K);L=R.context||L;}var P=(z)?h:"";x[0]=P+((B)?R:Q);x[1]=K;x[2]=L;O.push(this.on.apply(this,x));},this);return(this._yuievt.chain)?this:new c.EventHandle(O);}G=I[0];z=I[2];D=I[3];if(N&&c.instanceOf(this,N)&&(D in N.DOM_EVENTS)){x=s.call(arguments,0);x.splice(2,0,N.getDOMNode(this));return c.on.apply(c,x);}A=I[1];if(c.instanceOf(this,YUI)){w=c.Env.evt.plugins[A];x=s.call(arguments,0);x[0]=D;if(N){J=x[2];if(c.instanceOf(J,c.NodeList)){J=c.NodeList.getDOMNodes(J);}else{if(c.instanceOf(J,N)){J=N.getDOMNode(J);}}E=(D in N.DOM_EVENTS);if(E){x[2]=J;}}if(w){M=w.on.apply(c,x);}else{if((!A)||E){M=c.Event._attach(x);}}}if(!M){H=this._yuievt.events[A]||this.publish(A);M=H._on(F,y,(arguments.length>3)?s.call(arguments,3):null,(z)?"after":true);}if(G){C[G]=C[G]||{};C[G][A]=C[G][A]||[];C[G][A].push(M);}return(this._yuievt.chain)?this:M;},subscribe:function(){return this.on.apply(this,arguments);},detach:function(F,H,w){var L=this._yuievt.events,A,C=c.Node,J=C&&(c.instanceOf(this,C));if(!F&&(this!==c)){for(A in L){if(L.hasOwnProperty(A)){L[A].detach(H,w);}}if(J){c.Event.purgeElement(C.getDOMNode(this));}return this;}var z=o(F,this._yuievt.config.prefix),E=i.isArray(z)?z[0]:null,M=(z)?z[3]:null,B,I=c.Env.evt.handles,K,G,D,y,x=function(R,P,Q){var O=R[P],S,N;if(O){for(N=O.length-1;N>=0;--N){S=O[N].evt;if(S.host===Q||S.el===Q){O[N].detach();}}}};if(E){G=I[E];F=z[1];K=(J)?c.Node.getDOMNode(this):this;if(G){if(F){x(G,F,K);}else{for(A in G){if(G.hasOwnProperty(A)){x(G,A,K);}}}return this;}}else{if(i.isObject(F)&&F.detach){F.detach();return this;}else{if(J&&((!M)||(M in C.DOM_EVENTS))){D=s.call(arguments,0);D[2]=C.getDOMNode(this);c.detach.apply(c,D);return this;}}}B=c.Env.evt.plugins[M];if(c.instanceOf(this,YUI)){D=s.call(arguments,0);if(B&&B.detach){B.detach.apply(c,D);return this;}else{if(!F||(!B&&C&&(F in C.DOM_EVENTS))){D[0]=F;c.Event.detach.apply(c.Event,D);return this;}}}y=L[z[1]];if(y){y.detach(H,w);}return this;},unsubscribe:function(){return this.detach.apply(this,arguments);},detachAll:function(w){return this.detach(w);},unsubscribeAll:function(){return this.detachAll.apply(this,arguments);},publish:function(y,z){var x,D,w,C,B=this._yuievt,A=B.config.prefix;if(i.isObject(y)){w={};c.each(y,function(F,E){w[E]=this.publish(E,F||z);},this);return w;}y=(A)?n(y,A):y;this._monitor("publish",y,{args:arguments});x=B.events;D=x[y];if(D){if(z){D.applyConfig(z,true);}}else{C=B.defaults;D=new c.CustomEvent(y,C);if(z){D.applyConfig(z,true);}x[y]=D;}return x[y];},_monitor:function(z,w,A){var x,y=this.getEvent(w);if((this._yuievt.config.monitored&&(!y||y.monitored))||(y&&y.monitored)){x=w+"_"+z;A.monitored=z;this.fire.call(this,x,A);}},fire:function(z){var D=i.isString(z),y=(D)?z:(z&&z.type),C,x,B=this._yuievt.config.prefix,A,w=(D)?s.call(arguments,1):arguments;y=(B)?n(y,B):y;this._monitor("fire",y,{args:w});C=this.getEvent(y,true);A=this.getSibling(y,C);if(A&&!C){C=this.publish(y);}if(!C){if(this._yuievt.hasTargets){return this.bubble({type:y},w,this);}x=true;}else{C.sibling=A;x=C.fire.apply(C,w);}return(this._yuievt.chain)?this:x;},getSibling:function(w,y){var x;if(w.indexOf(v)>-1){w=r(w);x=this.getEvent(w,true);if(x){x.applyConfig(y);x.bubbles=false;x.broadcast=0;}}return x;},getEvent:function(x,w){var z,y;if(!w){z=this._yuievt.config.prefix;x=(z)?n(x,z):x;}y=this._yuievt.events;
return y[x]||null;},after:function(y,x){var w=s.call(arguments,0);switch(i.type(y)){case"function":return c.Do.after.apply(c.Do,arguments);case"array":case"object":w[0]._after=true;break;default:w[0]=h+y;}return this.on.apply(this,w);},before:function(){return this.on.apply(this,arguments);}};c.EventTarget=q;c.mix(c,q.prototype);q.call(c,{bubbles:false});YUI.Env.globalEvents=YUI.Env.globalEvents||new q();c.Global=YUI.Env.globalEvents;},"@VERSION@",{requires:["oop"]});