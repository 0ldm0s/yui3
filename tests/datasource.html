<html>
<head>
<title>DataSource Tests</title>
</head>

<body class="yui-skin-sam">
<h1>DataSource Tests</h1>
<p><input type="button" value="Run Tests" id="btnRun" disabled="true" /></p>

<script type="text/javascript" src="../build/yui/yui.js"></script>
<script type="text/javascript" src="../build/datasource/datasource-debug.js" id="src_ds"></script>
<script type="text/javascript">

(function() {
    YUI({
        base: "../build/",
        //filter: "debug",
        useConsole: true,
        insertBefore: "src_ds"
    }).use("dump", "yuitest", "console", "base", "datasource", function(Y) {

        // Set up the page
        var btnRun = Y.get("#btnRun");
        btnRun.set("disabled", false);
        Y.on("click", function(){
            Y.Test.Runner.run();
        }, btnRun);
        var myConsole = new Y.Console().render();
 
        var testClass = new Y.Test.Case({
            name: "Class Tests",
        
            testConstructorBase: function(){
                var ds = new Y.DataSource.Base();
                Y.Assert.areEqual((ds instanceof Y.DataSource.Base), true);
            },
            
            testConstructorLocal: function(){
                var ds = new Y.DataSource.Local();
                Y.Assert.areEqual((ds instanceof Y.DataSource.Local), true);
                Y.Assert.areEqual((ds instanceof Y.DataSource.Base), true);
            }
        });
        
        var testLocal = new Y.Test.Case({
            name: "DataSource.Local Tests",

            testDefaults: function(){
                var ds = new Y.DataSource.Local({
                    liveData: ["a","b","c","d"]
                }),
                    response = ds.sendRequest();
                    
                Y.ArrayAssert.itemsAreSame(["a","b","c","d"], response, "Expected live array.");
            }                    
        });

        Y.Test.Runner.add(testClass);
        Y.Test.Runner.add(testLocal);
        Y.Test.Runner.run();
    });
})();
</script>
</body>
</html>
