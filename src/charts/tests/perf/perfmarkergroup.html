<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <applet code="https://github.com/bestiejs/benchmark.js/raw/v1.0.0/nano.jar" archive="https://github.com/bestiejs/benchmark.js/raw/v1.0.0/nano.jar" style="display: none;"></applet>
        <script type='text/javascript' src="https://raw.github.com/bestiejs/benchmark.js/v1.0.0/benchmark.js"></script>
        <script src="../../../../build/yui/yui.js"></script>
        <script type="text/javascript" src="js/generatedataprovider.js"></script>
        <script src="perfmarkergroup-benchmark.js"></script>
    </head>

    <body class='yui3-skin-sam'>

        <p><button id="start">Start Benchmarks against Local YUI</button></p>
        <div id="log"></div>
        <script>

            YUI({
                'generate-dataprovider': {
                    fullpath: 'js/generatedataprovider.js'
                },
                'perfmarkergroup-benchmark': {
                    fullpath: 'perfmarkergroup-benchmark.js',
                    requires: ['charts']
                },
                'skin-sam-test-console': {
                    fullpath: '../../../common/tests/assets/test-console.css',
                    type    : 'css'
                },
                'test-console': {
                    fullpath : '../../../common/tests/assets/test-console.js',
                    requires : ['console-filters'],
                    skinnable: true
                },
                defaultGraphicEngine: (window.location.search.match(/[?&]defaultGraphicEngine=([^&]+)/) || [])[1] || 'svg',
				filter: (window.location.search.match(/[?&]filter=([^&]+)/) || [])[1] || 'raw',
                useBrowserConsole: false
            }).use('generate-dataprovider', 'charts', 'perfmarkergroup-benchmark', 'test-console', function (Y) {

                new Y.Console().render('#log');


                var suite = Y.BenchmarkSuite,
                    start = Y.one('#start');

                suite.on('start', function () {
                    Y.log('Starting benchmarks.');
                });

                suite.on('cycle', function (ev) {
                    Y.log(String(ev.target));
                });

                suite.on('complete', function () {
                    start.set('disabled', false);
                    Y.log('Finished benchmarks.');
                });

                start.on('click', function () {
                    suite.run({async:true});
                });
            });

        </script>
    </body>
</html>
