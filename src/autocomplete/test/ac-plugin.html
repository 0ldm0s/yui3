<!DOCTYPE html>
<html>
<head>
<title>ac-plugin</title>

<link rel="stylesheet" href="http://yui.yahooapis.com/3.0.0b1/build/cssfonts/fonts-min.css">
<style>
body {
    font-size:16px;
}
.demoified {
    font-size:200%;
    border:10px solid red;
}
script.mine {
    clear:left;
    white-space:pre;
    display:block;
    font-family:monospace;
    background:#eef;
}
script::before, script::after {
    content:"<script>";
}
script::after {
    content:"</script>";
}
script[src]::before {
    content:"<script src=\"" attr(src) "\">";
    white-space:nowrap;
}
script[src] {
    background:#fff;
}
.lipsum { display:none; }
</style>

</head>
<body>
    <form>
        <input class="input" id="input" value="change me!" size="100">
    </form>
</body>

<script class="mine" src="../../../build/yui/yui.js"></script>
<script class="mine" src="./ac-plugin.js"></script>
<script class="mine" src="../../value-change/build_tmp/value-change.js"></script>

<script>
YUI({
    debug: true,
    base : "../../../build/",
    filter : "raw"
}).use('ac-plugin', 'plugin', 'node-base', 'datasource', function (Y) {
    window.Y = Y;

    var ac = window.ac = Y.get("#input");
    ac.plug(Y.Plugin.ACPlugin);
    
  
    var myDS = new Y.DataSource.Get({
        source : "http://query.yahooapis.com/v1/public/yql?" +
            "format=json&" +
            "env=http%3A%2F%2Fdatatables.org%2Falltables.env&",
        scriptCallbackParam : "callback"
    });

    myDS.plug({fn : Y.Plugin.DataSourceJSONSchema, cfg : {
        schema : {
            resultListLocator : "query.results.Result"
        }
    }});

    ac.plug(Y.Plugin.ACPlugin, {
        queryTemplate : function (q) { return "q=" + encodeURIComponent(
            "select * from search.suggest where query =\"" +
            q.replace(/(["\\])/g, '\\$1') +
            "\" limit 10"
        )},
        dataSource : myDS
    });

    // ac.ac.on("ac:query", function (e) {
    //     // console.log(" ac:query", e);
    // });
    ac.ac.on("ac:load", function (e) {
        console.log(" ac:render", e, e.results);
    });

    
});
</script>


</body>
</html>
